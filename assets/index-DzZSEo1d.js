(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();async function J(a){if(a.length===0)return"";const n=await Z(a),i=Array.from(n,o=>String.fromCodePoint(o)).join("");return btoa(i)}async function X(a){if(a.length===0)return"";const n=atob(a),i=Uint8Array.from(n,o=>o.charCodeAt(0));return await V(i)}async function Z(a){const n=new Blob([a]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(n).arrayBuffer())}async function V(a){const n=new Blob([a]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(n).text()}async function G(){const a=(await ee()??te())?.content||"";return Y(),a}function Q(a){const n={content:a};localStorage.setItem("editorState",JSON.stringify(n))}function Y(){window.history.replaceState(null,"",window.location.pathname)}async function ee(){const a=window.location.hash,n="#doc=";try{if(a.startsWith(n)){const i=await X(a.substring(n.length));return JSON.parse(i)}return null}catch(i){return console.error("Error parsing URL state:",i.message),console.error("The URL appears to be truncated or corrupted."),null}}function te(){const a=localStorage.getItem("editorState");if(!a)return null;try{return JSON.parse(a)}catch(n){return console.error("Error parsing saved state",n),null}}function ne(a,n,i,o){let e=n;const r=[],s=[];let p=0,u="",m=!1;function k(c){a.innerHTML=i(c)}function L(c,t,l){if(t===c){let g=0;const v=Math.min(l,c.childNodes.length);for(let w=0;w<v;w++)g+=c.childNodes[w].textContent.length,w<c.childNodes.length-1&&(g+=1);return g}let h=t;for(;h&&h.parentNode!==c;)h=h.parentNode;if(!h)return 0;let f=0;for(let g=c.firstChild;g&&g!==h;g=g.nextSibling)f+=g.textContent.length+1;try{const g=document.createRange();g.setStart(h,0),g.setEnd(t,l),f+=g.toString().length}catch{}return f}function C(){const c=window.getSelection();return c.rangeCount?L(a,c.focusNode,c.focusOffset):0}function N(){const c=window.getSelection();if(!c.rangeCount)return{start:0,end:0};const t=L(a,c.anchorNode,c.anchorOffset),l=L(a,c.focusNode,c.focusOffset);return{start:Math.min(t,l),end:Math.max(t,l)}}function T(c){const t=window.getSelection(),l=Array.from(a.children);if(l.length===0){t.collapse(a,0);return}let h=c;for(let w=0;w<l.length;w++){const S=l[w],B=S.textContent.length;if(h<=B){const E=document.createTreeWalker(S,NodeFilter.SHOW_TEXT);for(;E.nextNode();){const _=E.currentNode.textContent.length;if(h<=_){t.collapse(E.currentNode,h);return}h-=_}t.collapse(S,0);return}if(h-=B,w<l.length-1){if(h===0){const E=document.createTreeWalker(S,NodeFilter.SHOW_TEXT);let _=null;for(;E.nextNode();)_=E.currentNode;_?t.collapse(_,_.textContent.length):t.collapse(S,S.childNodes.length);return}h-=1}}const f=l[l.length-1],g=document.createTreeWalker(f,NodeFilter.SHOW_TEXT);let v=null;for(;g.nextNode();)v=g.currentNode;v?t.collapse(v,v.textContent.length):t.collapse(f,f.childNodes.length)}function O(){const c=window.getSelection();if(!c.rangeCount)return;const t=c.getRangeAt(0).getBoundingClientRect();if(!t||t.height===0)return;const l=40,h=window.innerHeight;t.bottom>h-l?window.scrollBy({top:t.bottom-h+l,behavior:"smooth"}):t.top<l&&window.scrollBy({top:t.top-l,behavior:"smooth"})}function $(c,t){const l=Date.now();if(c===u&&l-p<500&&r.length>0){p=l;return}r.push({text:e,offset:t}),s.length=0,p=l,u=c}function M(){if(r.length===0)return;s.push({text:e,offset:C()});const c=r.pop();e=c.text,k(e),T(c.offset),O(),o(e)}function j(){if(s.length===0)return;r.push({text:e,offset:C()});const c=s.pop();e=c.text,k(e),T(c.offset),O(),o(e)}function R(c){if(c===0)return 0;let t=c;for(;t>0&&/\s/.test(e[t-1]);)t--;for(;t>0&&!/\s/.test(e[t-1]);)t--;return t}function A(c){const t=e.length;if(c>=t)return t;let l=c;for(;l<t&&!/\s/.test(e[l]);)l++;for(;l<t&&/\s/.test(e[l]);)l++;return l}function P(c){if(c===0)return 0;let t=c;for(;t>0&&e[t-1]!==`
`;)t--;return t}function q(c){const t=e.length;if(c>=t)return t;let l=c;for(;l<t&&e[l]!==`
`;)l++;return l}function x(c){k(e),T(c),O(),o(e)}function F(c){if(m||c.inputType==="insertCompositionText"||(c.preventDefault(),c.inputType==="insertFromPaste"||c.inputType==="deleteByCut"))return;const{start:t,end:l}=N(),h=t!==l;switch(c.inputType){case"insertText":{const f=c.data||"";$("insertText",t),e=e.slice(0,t)+f+e.slice(l),x(t+f.length);break}case"insertParagraph":case"insertLineBreak":{$("insertLine",t),e=e.slice(0,t)+`
`+e.slice(l),x(t+1);break}case"deleteContentBackward":{h?($("delete",t),e=e.slice(0,t)+e.slice(l),x(t)):t>0&&($("delete",t),e=e.slice(0,t-1)+e.slice(t),x(t-1));break}case"deleteContentForward":{h?($("delete",t),e=e.slice(0,t)+e.slice(l),x(t)):t<e.length&&($("delete",t),e=e.slice(0,t)+e.slice(t+1),x(t));break}case"deleteWordBackward":{if(h)$("deleteWord",t),e=e.slice(0,t)+e.slice(l),x(t);else{const f=R(t);f<t&&($("deleteWord",t),e=e.slice(0,f)+e.slice(t),x(f))}break}case"deleteWordForward":{if(h)$("deleteWord",t),e=e.slice(0,t)+e.slice(l),x(t);else{const f=A(t);f>t&&($("deleteWord",t),e=e.slice(0,t)+e.slice(f),x(t))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(h)$("deleteLine",t),e=e.slice(0,t)+e.slice(l),x(t);else{const f=P(t);f<t&&($("deleteLine",t),e=e.slice(0,f)+e.slice(t),x(f))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(h)$("deleteLine",t),e=e.slice(0,t)+e.slice(l),x(t);else{const f=q(t);f>t&&($("deleteLine",t),e=e.slice(0,t)+e.slice(f),x(t))}break}case"historyUndo":{M();break}case"historyRedo":{j();break}case"insertReplacementText":{const f=c.getTargetRanges();if(f.length>0){const g=f[0],v=L(a,g.startContainer,g.startOffset),w=L(a,g.endContainer,g.endOffset),S=c.dataTransfer?.getData("text/plain")||c.data||"";$("replace",v),e=e.slice(0,v)+S+e.slice(w),x(v+S.length)}break}}}function I(){m=!0}function W(){m=!1;const c=C();e=Array.from(a.children).map(t=>t.textContent).join(`
`),k(e),T(c),o(e)}function U(c){c.preventDefault();const{start:t,end:l}=N();t!==l&&c.clipboardData.setData("text/plain",e.slice(t,l))}function H(c){c.preventDefault();const{start:t,end:l}=N();t!==l&&(c.clipboardData.setData("text/plain",e.slice(t,l)),$("cut",t),e=e.slice(0,t)+e.slice(l),x(t))}function K(c){c.preventDefault();const t=c.clipboardData.getData("text/plain");if(!t)return;const{start:l,end:h}=N();$("paste",l),e=e.slice(0,l)+t+e.slice(h),x(l+t.length)}function z(c){(c.metaKey||c.ctrlKey)&&c.key==="z"&&(c.preventDefault(),c.shiftKey?j():M())}return a.addEventListener("keydown",z),a.addEventListener("beforeinput",F),a.addEventListener("compositionstart",I),a.addEventListener("compositionend",W),a.addEventListener("copy",U),a.addEventListener("cut",H),a.addEventListener("paste",K),k(e),{getText:()=>e}}const y={escaped:/\\([\\`*_{}\[\]()#+\-.!~^|$])/g,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),inlineMath:new RegExp("(?<!\\$)\\$(?!\\$)([^\\$\\n]+?)\\$(?!\\$)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,superscript:/\^([^\s^](?:[^^\n]*?[^\s^])?)\^/g,subscript:new RegExp("(?<!~)~(?!~)([^\\s~](?:[^~\\n]*?[^\\s~])?)~(?!~)","g"),autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g,footnoteRef:/\[\^([^\]]+)\]/g};function d(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let D={};function se(a){const n={},i=a.split(`
`);for(const o of i){const e=o.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);e&&(n[e[1].toLowerCase()]={url:e[2],title:e[3]||""})}return n}function ae(a){const n=a.split(`
`),i=[];let o=0,e=0;if(n[0].match(/^---\s*$/)&&n.length>1){for(let r=1;r<n.length;r++)if(n[r].match(/^\s*---\s*$/)){const s=n.slice(0,r+1).join(`
`);i.push({type:"metadata",text:s,offset:0}),o=s.length+1,e=r+1;break}}for(;e<n.length;){const r=n[e];if(r.match(/^```/)){let s=e+1;for(;s<n.length&&!n[s].match(/^\s*```/);)s++;if(s<n.length){const p=n.slice(e,s+1).join(`
`);i.push({type:"code",text:p,offset:o}),o+=p.length+1,e=s+1;continue}}if(r.match(/^\$\$\s*$/)){let s=e+1;for(;s<n.length&&!n[s].match(/^\s*\$\$/);)s++;if(s<n.length){const p=n.slice(e,s+1).join(`
`);i.push({type:"math",text:p,offset:o}),o+=p.length+1,e=s+1;continue}}if(r.match(/^\|.*\|\s*$/)&&e+1<n.length){const s=n[e+1];if(s.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const p=u=>u.split("|").length-1;if(p(r)===p(s)){let u=e+2;for(;u<n.length&&n[u].match(/^\|.*\|\s*$/);)u++;const m=n.slice(e,u).join(`
`);i.push({type:"table",text:m,offset:o}),o+=m.length+1,e=u;continue}}}if(r.match(/^>(?:\s|$)/)){let s=e+1;for(;s<n.length&&n[s].match(/^>(?:\s|$)/);)s++;const p=n.slice(e,s).join(`
`);i.push({type:"blockquote",text:p,offset:o}),o+=p.length+1,e=s;continue}if(r.match(/^#{1,6}[ \t]+.+$/)){i.push({type:"heading",text:r,offset:o}),o+=r.length+1,e++;continue}if(r!==""&&!r.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&e+1<n.length){const s=n[e+1];if(s.match(/^=+\s*$/)||s.match(/^-+\s*$/)){const p=r+`
`+s;i.push({type:"setext",text:p,offset:o}),o+=p.length+1,e+=2;continue}}if(r.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){i.push({type:"hr",text:r,offset:o}),o+=r.length+1,e++;continue}if(r.match(/^(?: {4}|\t)/)&&!r.match(/^\s*[*\-+] /)&&!r.match(/^\s*\d+\. /)&&!r.match(/^\s*>(?:\s|$)/)){let s=e+1;for(;s<n.length&&n[s].match(/^(?: {4}|\t)/)&&!n[s].match(/^\s*[*\-+] /)&&!n[s].match(/^\s*\d+\. /)&&!n[s].match(/^\s*>(?:\s|$)/);)s++;const p=n.slice(e,s).join(`
`);i.push({type:"indented-code",text:p,offset:o}),o+=p.length+1,e=s;continue}i.push({type:"line",text:r,offset:o}),o+=r.length+1,e++}return i}function b(a){let n=a;const i=[],o=r=>{const s=`PROTECTED${i.length}`;return i.push(r),s};n=n.replace(y.escaped,(r,s)=>o(`<span class="md-syntax">\\</span>${d(s)}`)).replace(y.inlineCode,(r,s)=>o(`<code><span class="md-syntax">\`</span>${d(s)}<span class="md-syntax">\`</span></code>`)).replace(y.inlineMath,(r,s)=>o(`<code class="math"><span class="md-syntax">$</span>${d(s)}<span class="md-syntax">$</span></code>`)).replace(y.comment,(r,s)=>o(`<span class="comment">&lt;!--${d(s)}--&gt;</span>`)).replace(y.autoLink,(r,s)=>o(`<span class="md-syntax">&lt;</span><a href="${d(s)}" target="_blank" rel="noopener noreferrer">${d(s)}</a><span class="md-syntax">&gt;</span>`)).replace(y.autoEmail,(r,s)=>o(`<span class="md-syntax">&lt;</span><a href="mailto:${d(s)}">${d(s)}</a><span class="md-syntax">&gt;</span>`)).replace(y.htmlTag,r=>o(`<code class="md-syntax">${d(r)}</code>`)).replace(y.image,(r,s,p)=>o(`<span class="md-syntax">![</span>${d(s)}<span class="md-syntax">](</span><a href="${d(p)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">)</span>`)).replace(y.link,(r,s,p)=>o('<span class="md-syntax">[</span>')+s+o(`<span class="md-syntax">](</span><a href="${d(p)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">)</span>`)).replace(y.refImage,(r,s,p)=>{const u=(p||s).toLowerCase(),m=D[u];return m?o(`<span class="md-syntax">![</span>${d(s)}<span class="md-syntax">][</span><a href="${d(m.url)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">]</span>`):r}).replace(y.refLink,(r,s,p)=>{const u=(p||s).toLowerCase(),m=D[u];return m?o('<span class="md-syntax">[</span>')+s+o(`<span class="md-syntax">][</span><a href="${d(m.url)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">]</span>`):r}).replace(y.footnoteRef,(r,s)=>o('<span class="md-syntax">[^</span>')+s+o('<span class="md-syntax">]</span>')),n=d(n);const e=r=>`<span class="md-syntax">${r}</span>`;return n=n.replace(y.boldItalic,(r,s)=>`<b><em>${e("***")}${s}${e("***")}</em></b>`).replace(y.bold,(r,s)=>`<b>${e("**")}${s}${e("**")}</b>`).replace(y.boldUnderscore,(r,s)=>`<b>${e("__")}${s}${e("__")}</b>`).replace(y.strikethrough,(r,s)=>`<s>${e("~~")}${s}${e("~~")}</s>`).replace(y.superscript,(r,s)=>`<sup>${e("^")}${s}${e("^")}</sup>`).replace(y.subscript,(r,s)=>`<sub>${e("~")}${s}${e("~")}</sub>`).replace(y.italicAsterisk,(r,s)=>`<em>${e("*")}${s}${e("*")}</em>`).replace(y.italicUnderscore,(r,s)=>`<em>${e("_")}${s}${e("_")}</em>`),n=n.replace(/\uE000PROTECTED(\d+)\uE001/g,(r,s)=>i[parseInt(s,10)]),n}function re(a){switch(a.type){case"metadata":{const n=a.text.split(`
`),i=`<span class="md-syntax">${d(n[0])}</span>`,o=`<span class="md-syntax">${d(n[n.length-1])}</span>`,e=n.slice(1,-1).map(r=>d(r)).join(`
`);return`<pre><code>${i}
${e}
${o}</code></pre>`}case"code":{const n=a.text.match(/^(```[^\n]*)\n([\s\S]*?)\n(\s*```)$/);return n?`<pre><code><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code>${d(a.text)}</code></pre>`}case"indented-code":return`<pre><code>${d(a.text)}</code></pre>`;case"table":return`<pre><code>${a.text.split(`
`).map((o,e)=>{const r=d(o);return e===1?`<span class="md-syntax">${r}</span>`:r.replace(/\|/g,'<span class="md-syntax">|</span>')}).join(`
`)}</code></pre>`;case"math":{const n=a.text.match(/^(\$\$)\n([\s\S]*?)\n(\s*\$\$)$/);return n?`<pre><code class="math"><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code class="math">${d(a.text)}</code></pre>`}case"heading":{const n=a.text.match(/^(#{1,6}[ \t]+)(.*)/),i=n[1].trim().length;return`<h${i}><span class="md-syntax">${d(n[1])}</span>${b(n[2])}</h${i}>`}case"blockquote":return`<blockquote>${a.text.split(`
`).map(o=>{const e=o.match(/^(>)\s?(.*)/);return e?`<span class="md-syntax">${d(e[1])}</span> ${b(e[2])}`:b(o)}).join(`
`)}</blockquote>`;case"setext":{const n=a.text.indexOf(`
`),i=a.text.slice(0,n),o=a.text.slice(n+1),e=o.trimStart()[0]==="="?1:2;return`<h${e}>${b(i)}
<span class="md-syntax">${d(o)}</span></h${e}>`}case"hr":return`<div class="md-syntax">${d(a.text)}</div>`;case"line":{if(a.text==="")return'<div class="line"><br></div>';const n=a.text.match(/^(\[\^)([^\]]+)(\]:\s)(.*)/);if(n)return`<div class="line"><span class="md-syntax">${d(n[1])}</span>${d(n[2])}<span class="md-syntax">${d(n[3])}</span>${b(n[4])}</div>`;const i=a.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(i){const p=i[1],u=i[2],m=i[3]||"";return`<div class="line"><span class="md-syntax">${d(p)}</span><a href="${d(u)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">${d(m)}</span></div>`}const o=a.text.match(/^(\s*)([*\-+] )/);if(o){const p=o[1],u=o[2],m=a.text.slice(p.length+u.length),k=m.match(/^(\[[ xX]\] )/);if(k){const L=k[1],C=m.slice(L.length),T=L[1]!==" "?`<span class="task-done">${b(C)}</span>`:b(C);return`<div class="line"><span class="indent">${d(p)}</span><span class="md-syntax">${d(u)}</span><span class="md-checkbox">${d(L)}</span>${T}</div>`}return`<div class="line"><span class="indent">${d(p)}</span><span class="md-syntax">${d(u)}</span>${b(m)}</div>`}const e=a.text.match(/^(\s*)(\d+\. )/);if(e){const p=e[1],u=e[2],m=a.text.slice(p.length+u.length);return`<div class="line"><span class="indent">${d(p)}</span><span class="md-syntax">${d(u)}</span>${b(m)}</div>`}const r=a.text.match(/^(\s*)(>)(\s?)(.*)/);if(r&&/^>(?:\s|$)/.test(a.text.trimStart())){const p=r[1],u=r[2],m=r[3],k=r[4];return`<div class="line"><span class="indent">${d(p)}</span><span class="md-syntax">${d(u)}</span>${m}${b(k)}</div>`}const s=a.text.match(/^(: )/);if(s){const p=s[1],u=a.text.slice(p.length);return`<div class="line"><span class="md-syntax">${d(p)}</span>${b(u)}</div>`}return`<div class="line">${b(a.text)}</div>`}}}function oe(a){return D=se(a),ae(a).map(re).join("")}function ce(a,n){const i=document.querySelector(".signal-overlay");i&&i.remove();const o=document.createElement("div");o.className="signal-overlay";const e=document.createElement("div");e.className="signal";const r=document.createElement("span");r.className="signal-keys",r.textContent=a;const s=document.createElement("span");s.className="signal-message",s.textContent=n,e.appendChild(r),e.appendChild(s),o.appendChild(e),document.body.appendChild(o),o.addEventListener("animationend",p=>{p.target===o&&o.remove()})}function ie(a,n){document.addEventListener("keydown",i=>{if((i.metaKey||i.ctrlKey)&&i.key==="s"){i.preventDefault();const o=i.metaKey?"⌘S":"Ctrl+S";le(n,o)}})}function le(a,n){try{const o={content:a()},e=JSON.stringify(o),r=J(e).then(p=>{const u=`${window.location.origin}${window.location.pathname}?#doc=${p}`;return new Blob([u],{type:"text/plain"})}),s=new ClipboardItem({"text/plain":r});navigator.clipboard.write([s]).then(()=>{ce(n,"Link copied!")})}catch(i){console.error("Failed to copy link to clipboard:",i)}}document.addEventListener("DOMContentLoaded",async()=>{const a=document.querySelector(".paper");de();const n=await G(),i=ne(a,n,oe,Q);ie(a,i.getText),a.focus(),pe(2e3)});function de(){const a=document.querySelector(".logo");a?.addEventListener("animationend",()=>a.remove(),{once:!0})}function pe(a){let n;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(n),n=setTimeout(()=>{document.body.classList.add("hide-cursor")},a)},{passive:!0}),document.body.classList.add("hide-cursor")}
