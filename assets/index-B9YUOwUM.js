(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(o){if(o.ep)return;o.ep=!0;const e=a(o);fetch(o.href,e)}})();async function te(n){if(n.length===0)return"";const t=new Blob([n]).stream().pipeThrough(new CompressionStream("gzip")),a=new Uint8Array(await new Response(t).arrayBuffer()),r=Array.from(a,o=>String.fromCodePoint(o)).join("");return btoa(r)}async function ne(n){if(n.length===0)return"";const t=atob(n),a=Uint8Array.from(t,o=>o.charCodeAt(0)),r=new Blob([a]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(r).text()}async function se(){const n=(await ie()??le())?.content||"";return ae(),n}function ce(n){const t={content:n};localStorage.setItem("editorState",JSON.stringify(t))}function oe(){try{const n=localStorage.getItem("caretPosition");return n!==null?parseInt(n,10):0}catch{return 0}}function re(n){localStorage.setItem("caretPosition",String(n))}function ae(){window.history.replaceState(null,"",window.location.pathname)}async function ie(){const n=window.location.hash,t="#doc=";try{if(n.startsWith(t)){const a=await ne(n.substring(t.length));return JSON.parse(a)}return null}catch(a){return console.error("Error parsing URL state:",a.message),console.error("The URL appears to be truncated or corrupted."),null}}function le(){const n=localStorage.getItem("editorState");if(!n)return null;try{return JSON.parse(n)}catch(t){return console.error("Error parsing saved state",t),null}}const D=2,de=/^(\s*(?:>\s*)*)([-*+] (?:\[[ xX]\] )?|\d+\. )?/;function M(n,t){let a=t;for(;a>0&&n[a-1]!==`
`;)a--;return a}function B(n,t){let a=t;for(;a<n.length&&n[a]!==`
`;)a++;return a}function ue(n){const t=n.match(de),a=t[1]||"",r=t[2]||"";return{prefix:a+r,structural:a,marker:r}}function pe(n,t,a){if(!a.match(/^[-=]+\s*$/)||t===0)return!1;const r=M(n,t-1),o=n.slice(r,t-1);if(o===""||o.match(/^\s*(---+|\*\*\*+|___+)\s*$/)||o.match(/^- /))return!1;if(r>0){const e=M(n,r-1);if(n.slice(e,r-1)!=="")return!1}return!0}function fe(n,t){if(!t)return n;const a=t.match(/^([-*+] )\[[ xX]\] $/);if(a)return n+a[1]+"[ ] ";const r=t.match(/^(\d+)\. $/);if(r){const o=parseInt(r[1],10)+1;return n+o+". "}return n+t}function he(n,t,a){const r=M(n,t),o=B(n,a),e=n.slice(r,o);if(pe(n,r,e))return{text:n.slice(0,t)+`
`+n.slice(a),offset:t+1};const{prefix:c,structural:d,marker:h}=ue(e);if(c.length===0)return{text:n.slice(0,t)+`
`+n.slice(a),offset:t+1};const y=e.slice(c.length),v=t<=r+c.length;if(y.trim()===""&&v)return{text:n.slice(0,r)+n.slice(r+c.length),offset:r};const w=fe(d,h);return{text:n.slice(0,t)+`
`+w+n.slice(a),offset:t+1+w.length}}function me(n,t){const a=M(n,t),o=n.slice(a,B(n,t)).match(/^\s*/)[0].length,e=t-a,c=" ".repeat(D);return e<=o?{text:n.slice(0,a)+c+n.slice(a),offset:t+D}:{text:n.slice(0,t)+c+n.slice(t),offset:t+D}}function ge(n,t){const a=M(n,t),o=n.slice(a,B(n,t)).match(/^\s*/)[0].length,e=Math.min(o,D);if(e===0)return{text:n,offset:t};const c=n.slice(0,a)+n.slice(a+e),d=Math.max(a,t-e);return{text:c,offset:d}}function xe(n,t,a,r,o={}){let e=t;const c=[],d=[];let h=0,y="",v=!1;function T(i){n.innerHTML=a(i)}function w(i,s,l){if(s===i){let x=0;const S=Math.min(l,i.childNodes.length);for(let L=0;L<S;L++)x+=i.childNodes[L].textContent.length,L<i.childNodes.length-1&&(x+=1);return x}let p=s;for(;p&&p.parentNode!==i;)p=p.parentNode;if(!p)return 0;let f=0;for(let x=i.firstChild;x&&x!==p;x=x.nextSibling)f+=x.textContent.length+1;try{const x=document.createRange();x.setStart(p,0),x.setEnd(s,l),f+=x.toString().length}catch{}return f}function b(){const i=window.getSelection();return i.rangeCount?w(n,i.focusNode,i.focusOffset):0}function C(){const i=window.getSelection();if(!i.rangeCount)return{start:0,end:0};const s=w(n,i.anchorNode,i.anchorOffset),l=w(n,i.focusNode,i.focusOffset);return{start:Math.min(s,l),end:Math.max(s,l)}}function E(i){const s=window.getSelection(),l=Array.from(n.children);if(l.length===0){s.collapse(n,0);return}let p=i;for(let L=0;L<l.length;L++){const k=l[L],F=k.textContent.length;if(p<=F){const O=document.createTreeWalker(k,NodeFilter.SHOW_TEXT);for(;O.nextNode();){const P=O.currentNode.textContent.length;if(p<=P){s.collapse(O.currentNode,p);return}p-=P}s.collapse(k,0);return}if(p-=F,L<l.length-1){if(p===0){const O=document.createTreeWalker(k,NodeFilter.SHOW_TEXT);let P=null;for(;O.nextNode();)P=O.currentNode;P?s.collapse(P,P.textContent.length):s.collapse(k,k.childNodes.length);return}p-=1}}const f=l[l.length-1],x=document.createTreeWalker(f,NodeFilter.SHOW_TEXT);let S=null;for(;x.nextNode();)S=x.currentNode;S?s.collapse(S,S.textContent.length):s.collapse(f,f.childNodes.length)}function N(){const i=window.getSelection();if(!i.rangeCount)return;const s=i.getRangeAt(0).getBoundingClientRect();if(!s||s.height===0)return;const l=40,p=window.innerHeight;s.bottom>p-l?window.scrollBy({top:s.bottom-p+l,behavior:"smooth"}):s.top<l&&window.scrollBy({top:s.top-l,behavior:"smooth"})}function m(i,s){const l=Date.now();if(i===y&&l-h<500&&c.length>0){h=l;return}c.push({text:e,offset:s}),d.length=0,h=l,y=i}function A(){if(c.length===0)return;d.push({text:e,offset:b()});const i=c.pop();e=i.text,T(e),E(i.offset),N(),r(e)}function j(){if(d.length===0)return;c.push({text:e,offset:b()});const i=d.pop();e=i.text,T(e),E(i.offset),N(),r(e)}function U(i){if(i===0)return 0;let s=i;for(;s>0&&/\s/.test(e[s-1]);)s--;for(;s>0&&!/\s/.test(e[s-1]);)s--;return s}function H(i){const s=e.length;if(i>=s)return s;let l=i;for(;l<s&&!/\s/.test(e[l]);)l++;for(;l<s&&/\s/.test(e[l]);)l++;return l}function X(i){if(i===0)return 0;let s=i;for(;s>0&&e[s-1]!==`
`;)s--;return s}function z(i){const s=e.length;if(i>=s)return s;let l=i;for(;l<s&&e[l]!==`
`;)l++;return l}function R(i){const s=i.length,{start:l,end:p}=C();if(!(l!==p)){m("format",l),e=e.slice(0,l)+i+i+e.slice(l),g(l+s);return}const x=e.slice(l-s,l),S=e.slice(p,p+s);x===i&&S===i?(m("format",l),e=e.slice(0,l-s)+e.slice(l,p)+e.slice(p+s),g(p-s)):(m("format",l),e=e.slice(0,l)+i+e.slice(l,p)+i+e.slice(p),g(p+s+s))}function g(i){T(e),E(i),N(),r(e),o.onCaretChange?.(i)}function J(i){if(v||i.inputType==="insertCompositionText"||(i.preventDefault(),i.inputType==="insertFromPaste"||i.inputType==="deleteByCut"))return;const{start:s,end:l}=C(),p=s!==l;switch(i.inputType){case"insertText":{const f=i.data||"";m("insertText",s),e=e.slice(0,s)+f+e.slice(l),g(s+f.length);break}case"insertParagraph":case"insertLineBreak":{m("insertLine",s);const f=he(e,s,l);e=f.text,g(f.offset);break}case"deleteContentBackward":{p?(m("delete",s),e=e.slice(0,s)+e.slice(l),g(s)):s>0&&(m("delete",s),e=e.slice(0,s-1)+e.slice(s),g(s-1));break}case"deleteContentForward":{p?(m("delete",s),e=e.slice(0,s)+e.slice(l),g(s)):s<e.length&&(m("delete",s),e=e.slice(0,s)+e.slice(s+1),g(s));break}case"deleteWordBackward":{if(p)m("deleteWord",s),e=e.slice(0,s)+e.slice(l),g(s);else{const f=U(s);f<s&&(m("deleteWord",s),e=e.slice(0,f)+e.slice(s),g(f))}break}case"deleteWordForward":{if(p)m("deleteWord",s),e=e.slice(0,s)+e.slice(l),g(s);else{const f=H(s);f>s&&(m("deleteWord",s),e=e.slice(0,s)+e.slice(f),g(s))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(p)m("deleteLine",s),e=e.slice(0,s)+e.slice(l),g(s);else{const f=X(s);f<s&&(m("deleteLine",s),e=e.slice(0,f)+e.slice(s),g(f))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(p)m("deleteLine",s),e=e.slice(0,s)+e.slice(l),g(s);else{const f=z(s);f>s&&(m("deleteLine",s),e=e.slice(0,s)+e.slice(f),g(s))}break}case"historyUndo":{A();break}case"historyRedo":{j();break}case"insertReplacementText":{const f=i.getTargetRanges();if(f.length>0){const x=f[0],S=w(n,x.startContainer,x.startOffset),L=w(n,x.endContainer,x.endOffset),k=i.dataTransfer?.getData("text/plain")||i.data||"";m("replace",S),e=e.slice(0,S)+k+e.slice(L),g(S+k.length)}break}}}function Z(){v=!0}function V(){v=!1;const i=b();e=Array.from(n.children).map(s=>s.textContent).join(`
`),T(e),E(i),r(e)}function G(i){i.preventDefault();const{start:s,end:l}=C();s!==l&&i.clipboardData.setData("text/plain",e.slice(s,l))}function Q(i){i.preventDefault();const{start:s,end:l}=C();s!==l&&(i.clipboardData.setData("text/plain",e.slice(s,l)),m("cut",s),e=e.slice(0,s)+e.slice(l),g(s))}function Y(i){i.preventDefault();const s=i.clipboardData.getData("text/plain");if(!s)return;const{start:l,end:p}=C();m("paste",l),e=e.slice(0,l)+s+e.slice(p),g(l+s.length)}function ee(i){if((i.metaKey||i.ctrlKey)&&i.key==="z"&&(i.preventDefault(),i.shiftKey?j():A()),(i.metaKey||i.ctrlKey)&&i.key==="b"&&(i.preventDefault(),R("**")),(i.metaKey||i.ctrlKey)&&i.key==="i"&&(i.preventDefault(),R("_")),i.key==="Tab"){i.preventDefault();const{start:s,end:l}=C(),p=s!==l;if(i.shiftKey){m("outdent",s);const f=ge(e,s);e=f.text,g(f.offset)}else if(p)m("indent",s),e=e.slice(0,s)+"  "+e.slice(l),g(s+2);else{m("indent",s);const f=me(e,s);e=f.text,g(f.offset)}}}n.addEventListener("keydown",ee),n.addEventListener("beforeinput",J),n.addEventListener("compositionstart",Z),n.addEventListener("compositionend",V),n.addEventListener("copy",G),n.addEventListener("cut",Q),n.addEventListener("paste",Y),T(e);const q=Math.min(o.initialCaretPosition??0,e.length);if(q>0){E(q);const i=window.getSelection();if(i.rangeCount){const s=i.getRangeAt(0).getBoundingClientRect();if(s&&s.height>0){const l=window.innerHeight/2;window.scrollBy({top:s.top-l})}}}return document.addEventListener("selectionchange",()=>{if(!o.onCaretChange)return;const i=window.getSelection();i.rangeCount&&n.contains(i.focusNode)&&o.onCaretChange(b())}),{getText:()=>e}}const $={escaped:/\\([\\`*_{}\[\]()#+\-.!~^|$])/g,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),inlineMath:new RegExp("(?<!\\$)\\$(?!\\$)([^\\$\\n]+?)\\$(?!\\$)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,superscript:/\^([^\s^](?:[^^\n]*?[^\s^])?)\^/g,subscript:new RegExp("(?<!~)~(?!~)([^\\s~](?:[^~\\n]*?[^\\s~])?)~(?!~)","g"),autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g,footnoteRef:/\[\^([^\]]+)\]/g};function u(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let I={};function ye(n){const t={},a=n.split(`
`);for(const r of a){const o=r.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);o&&(t[o[1].toLowerCase()]={url:o[2],title:o[3]||""})}return t}function W(n){const t=n.split(`
`),a=[];let r=0,o=0;if(t[0].match(/^---\s*$/)&&t.length>1){for(let e=1;e<t.length;e++)if(t[e].match(/^\s*---\s*$/)){const c=t.slice(0,e+1).join(`
`);a.push({type:"metadata",text:c,offset:0}),r=c.length+1,o=e+1;break}}for(;o<t.length;){const e=t[o];if(e.match(/^```/)){let c=o+1;for(;c<t.length&&!t[c].match(/^\s*```/);)c++;if(c<t.length){const d=t.slice(o,c+1).join(`
`);a.push({type:"code",text:d,offset:r}),r+=d.length+1,o=c+1;continue}}if(e.match(/^\$\$\s*$/)){let c=o+1;for(;c<t.length&&!t[c].match(/^\s*\$\$/);)c++;if(c<t.length){const d=t.slice(o,c+1).join(`
`);a.push({type:"math",text:d,offset:r}),r+=d.length+1,o=c+1;continue}}if(e.match(/^\|.*\|\s*$/)&&o+1<t.length){const c=t[o+1];if(c.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const d=h=>h.split("|").length-1;if(d(e)===d(c)){let h=o+2;for(;h<t.length&&t[h].match(/^\|.*\|\s*$/);)h++;const y=t.slice(o,h).join(`
`);a.push({type:"table",text:y,offset:r}),r+=y.length+1,o=h;continue}}}if(e.match(/^\s*>(?:\s|$)/)){let c=o+1;for(;c<t.length&&t[c].match(/^\s*>(?:\s|$)/);)c++;const h=t.slice(o,c).map(w=>{const b=w.match(/^(\s*>)(\s?)(.*)/);return b?{prefix:b[1]+b[2],content:b[3]}:{prefix:"",content:w}}),y=h.map(w=>w.content).join(`
`),v=W(y);let T=0;for(const w of v){const b=w.text.split(`
`).length,C=h.slice(T,T+b).map(N=>N.prefix),E=w.text.split(`
`).map((N,m)=>C[m]+N);a.push({type:w.type,text:E.join(`
`),offset:r,blockquote:!0,innerText:w.text,prefixes:C}),r+=E.join(`
`).length+1,T+=b}o=c;continue}if(e.match(/^#{1,6}[ \t]+.+$/)){a.push({type:"heading",text:e,offset:r}),r+=e.length+1,o++;continue}if(e!==""&&!e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&!e.match(/^- /)&&(o===0||t[o-1]==="")&&o+1<t.length){const c=t[o+1];if(c.match(/^=+\s*$/)||c.match(/^-+\s*$/)){const d=e+`
`+c;a.push({type:"setext",text:d,offset:r}),r+=d.length+1,o+=2;continue}}if(e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){a.push({type:"hr",text:e,offset:r}),r+=e.length+1,o++;continue}if(e.match(/^(?: {4}|\t)/)&&!e.match(/^\s*[*\-+] /)&&!e.match(/^\s*\d+\. /)&&!e.match(/^\s*>(?:\s|$)/)){let c=o+1;for(;c<t.length&&t[c].match(/^(?: {4}|\t)/)&&!t[c].match(/^\s*[*\-+] /)&&!t[c].match(/^\s*\d+\. /)&&!t[c].match(/^\s*>(?:\s|$)/);)c++;const d=t.slice(o,c).join(`
`);a.push({type:"indented-code",text:d,offset:r}),r+=d.length+1,o=c;continue}a.push({type:"line",text:e,offset:r}),r+=e.length+1,o++}return a}function _(n){let t=n;const a=[],r=e=>{const c=`PROTECTED${a.length}`;return a.push(e),c};t=t.replace($.escaped,(e,c)=>r(`<span class="md-syntax">\\</span>${u(c)}`)).replace($.inlineCode,(e,c)=>r(`<code><span class="md-syntax">\`</span>${u(c)}<span class="md-syntax">\`</span></code>`)).replace($.inlineMath,(e,c)=>r(`<code class="math"><span class="md-syntax">$</span>${u(c)}<span class="md-syntax">$</span></code>`)).replace($.comment,(e,c)=>r(`<span class="comment">&lt;!--${u(c)}--&gt;</span>`)).replace($.autoLink,(e,c)=>r(`<span class="md-syntax">&lt;</span><a href="${u(c)}" target="_blank" rel="noopener noreferrer">${u(c)}</a><span class="md-syntax">&gt;</span>`)).replace($.autoEmail,(e,c)=>r(`<span class="md-syntax">&lt;</span><a href="mailto:${u(c)}">${u(c)}</a><span class="md-syntax">&gt;</span>`)).replace($.htmlTag,e=>r(`<code class="md-syntax">${u(e)}</code>`)).replace($.image,(e,c,d)=>r(`<span class="md-syntax">![</span>${u(c)}<span class="md-syntax">](</span><a href="${u(d)}" target="_blank" rel="noopener noreferrer">${u(d)}</a><span class="md-syntax">)</span>`)).replace($.link,(e,c,d)=>r('<span class="md-syntax">[</span>')+c+r(`<span class="md-syntax">](</span><a href="${u(d)}" target="_blank" rel="noopener noreferrer">${u(d)}</a><span class="md-syntax">)</span>`)).replace($.refImage,(e,c,d)=>{const h=(d||c).toLowerCase(),y=I[h];return y?r(`<span class="md-syntax">![</span>${u(c)}<span class="md-syntax">][</span><a href="${u(y.url)}" target="_blank" rel="noopener noreferrer">${u(d)}</a><span class="md-syntax">]</span>`):e}).replace($.refLink,(e,c,d)=>{const h=(d||c).toLowerCase(),y=I[h];return y?r('<span class="md-syntax">[</span>')+c+r(`<span class="md-syntax">][</span><a href="${u(y.url)}" target="_blank" rel="noopener noreferrer">${u(d)}</a><span class="md-syntax">]</span>`):e}).replace($.footnoteRef,(e,c)=>r('<span class="md-syntax">[^</span>')+c+r('<span class="md-syntax">]</span>')),t=u(t);const o=e=>`<span class="md-syntax">${e}</span>`;return t=t.replace($.boldItalic,(e,c)=>r(`<b><em>${o("***")}`)+c+r(`${o("***")}</em></b>`)).replace($.bold,(e,c)=>`<b>${o("**")}${c}${o("**")}</b>`).replace($.boldUnderscore,(e,c)=>`<b>${o("__")}${c}${o("__")}</b>`).replace($.strikethrough,(e,c)=>`<s>${o("~~")}${c}${o("~~")}</s>`).replace($.superscript,(e,c)=>`<sup>${o("^")}${c}${o("^")}</sup>`).replace($.subscript,(e,c)=>`<sub>${o("~")}${c}${o("~")}</sub>`).replace($.italicAsterisk,(e,c)=>`<em>${o("*")}${c}${o("*")}</em>`).replace($.italicUnderscore,(e,c)=>`<em>${o("_")}${c}${o("_")}</em>`),t=t.replace(/\uE000PROTECTED(\d+)\uE001/g,(e,c)=>a[parseInt(c,10)]),t}function $e(n){const t=n.match(/^(\s*)(>)(\s?)$/);if(!t)return u(n);const a=t[1],r=t[2],o=t[3];return a?`<span class="indent">${u(a)}</span><span class="md-syntax">${u(r)}</span>${o}`:`<span class="md-syntax">${u(r)}</span>${o}`}function we(n){return/^<\w+[^>]*\sclass="[^"]*bq/.test(n)?n:/^<\w+[^>]*\sclass="/.test(n)?n.replace(/^(<\w+[^>]*\sclass="[^"]*)(")/,"$1 bq$2"):n.replace(/^(<\w+)/,'$1 class="bq"')}function be(n,t){const r=n.split(`
`).map((o,e)=>{const c=t[e];if(!c)return o;const d=$e(c),h=o.match(/^(<(?:pre|code|div|h[1-6])[^>]*>)*/),y=h?h[0].length:0,v=o.replace(/<br>/g,"");return v.slice(0,y)+d+v.slice(y)}).join(`
`);return we(r)}function K(n){if(n.blockquote){const t={type:n.type,text:n.innerText},a=K(t),r=Array.isArray(a)?a:[a];let o=0;const e=[];for(const c of r){const d=(c.match(/\n/g)||[]).length+1,h=n.prefixes.slice(o,o+d);e.push(be(c,h)),o+=d}return e.length===1?e[0]:e}switch(n.type){case"metadata":{const t=n.text.split(`
`),a=`<span class="md-syntax">${u(t[0])}</span>`,r=`<span class="md-syntax">${u(t[t.length-1])}</span>`,o=t.slice(1,-1);return o.length>0?`<pre><code>${a}
${o.map(e=>u(e)).join(`
`)}
${r}</code></pre>`:`<pre><code>${a}
${r}</code></pre>`}case"code":{const t=n.text.match(/^(```[^\n]*)\n([\s\S]*?)\n(\s*```)$/);return t?`<pre><code><span class="md-syntax">${u(t[1])}</span>
${u(t[2])}
<span class="md-syntax">${u(t[3])}</span></code></pre>`:`<pre><code>${u(n.text)}</code></pre>`}case"indented-code":return`<pre><code>${u(n.text)}</code></pre>`;case"table":return`<pre><code>${n.text.split(`
`).map((r,o)=>{const e=u(r);return o===1?`<span class="md-syntax">${e}</span>`:e.replace(/\|/g,'<span class="md-syntax">|</span>')}).join(`
`)}</code></pre>`;case"math":{const t=n.text.match(/^(\$\$)\n([\s\S]*?)\n(\s*\$\$)$/);return t?`<pre><code class="math"><span class="md-syntax">${u(t[1])}</span>
${u(t[2])}
<span class="md-syntax">${u(t[3])}</span></code></pre>`:`<pre><code class="math">${u(n.text)}</code></pre>`}case"heading":{const t=n.text.match(/^(#{1,6}[ \t]+)(.*)/),a=t[1].trim().length;return`<h${a}><span class="md-syntax">${u(t[1])}</span>${_(t[2])}</h${a}>`}case"setext":{const t=n.text.indexOf(`
`),a=n.text.slice(0,t),r=n.text.slice(t+1),o=r.trimStart()[0]==="="?1:2;return`<h${o}>${_(a)}
<span class="md-rule md-syntax">${u(r)}</span></h${o}>`}case"hr":return`<div class="md-rule md-syntax">${u(n.text)}</div>`;case"line":{if(n.text==="")return'<div class="line"><br></div>';const t=n.text.match(/^(\[\^)([^\]]+)(\]:\s)(.*)/);if(t)return`<div class="line"><span class="md-syntax">${u(t[1])}</span>${u(t[2])}<span class="md-syntax">${u(t[3])}</span>${_(t[4])}</div>`;const a=n.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(a){const c=a[1],d=a[2],h=a[3]||"";return`<div class="line"><span class="md-syntax">${u(c)}</span><a href="${u(d)}" target="_blank" rel="noopener noreferrer">${u(d)}</a><span class="md-syntax">${u(h)}</span></div>`}const r=n.text.match(/^(\s*)([*\-+] )/);if(r){const c=r[1],d=r[2],h=n.text.slice(c.length+d.length),y=h.match(/^(\[[ xX]\] )/);if(y){const v=y[1],T=h.slice(v.length),b=v[1]!==" "?`<span class="task-done">${_(T)}</span>`:_(T);return`<div class="line"><span class="indent">${u(c)}</span><span class="md-syntax">${u(d)}</span><span class="md-checkbox">${u(v)}</span>${b}</div>`}return`<div class="line"><span class="indent">${u(c)}</span><span class="md-syntax">${u(d)}</span>${_(h)}</div>`}const o=n.text.match(/^(\s*)(\d+\. )/);if(o){const c=o[1],d=o[2],h=n.text.slice(c.length+d.length);return`<div class="line"><span class="indent">${u(c)}</span><span class="md-syntax">${u(d)}</span>${_(h)}</div>`}const e=n.text.match(/^(: )/);if(e){const c=e[1],d=n.text.slice(c.length);return`<div class="line"><span class="md-syntax">${u(c)}</span>${_(d)}</div>`}return`<div class="line">${_(n.text)}</div>`}}}function ve(n){return I=ye(n),W(n).flatMap(a=>{const r=K(a);return Array.isArray(r)?r:[r]}).join("")}function Te(n,t){document.addEventListener("keydown",a=>{if((a.metaKey||a.ctrlKey)&&a.key==="s"){a.preventDefault();const r=a.metaKey?"⌘S":"Ctrl+S";Ce(t,r)}})}function Ce(n,t){try{const r={content:n()},o=JSON.stringify(r),e=te(o).then(d=>{const h=`${window.location.origin}${window.location.pathname}?#doc=${d}`;return new Blob([h],{type:"text/plain"})}),c=new ClipboardItem({"text/plain":e});navigator.clipboard.write([c]).then(()=>{Se(t,"Link copied!")})}catch(a){console.error("Failed to copy link to clipboard:",a)}}function Se(n,t){const a=document.querySelector(".signal-overlay");a&&a.remove();const r=document.createElement("div");r.className="signal-overlay";const o=document.createElement("div");o.className="signal";const e=document.createElement("span");e.className="signal-keys",e.textContent=n;const c=document.createElement("span");c.className="signal-message",c.textContent=t,o.appendChild(e),o.appendChild(c),r.appendChild(o),document.body.appendChild(r),r.addEventListener("animationend",d=>{d.target===r&&r.remove()})}document.addEventListener("DOMContentLoaded",async()=>{const n=document.querySelector(".paper");Le();const t=window.location.hash.startsWith("#doc="),a=await se(),r=t?0:oe(),o=xe(n,a,ve,ce,{initialCaretPosition:r,onCaretChange:re});Te(n,o.getText),n.focus(),ke(2e3)});function Le(){const n=document.querySelector(".logo");n?.addEventListener("animationend",()=>n.remove(),{once:!0})}function ke(n){let t;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(t),t=setTimeout(()=>{document.body.classList.add("hide-cursor")},n)},{passive:!0}),document.body.classList.add("hide-cursor")}
