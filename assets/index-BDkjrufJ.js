(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();function f(t,e){t.addEventListener("copy",o=>{o.preventDefault();const c=window.getSelection();let n="";if(c.rangeCount>0){const r=c.getRangeAt(0),i=document.createElement("div");i.appendChild(r.cloneContents()),n=d(i)}o.clipboardData.setData("text/plain",n)}),t.addEventListener("cut",o=>{o.preventDefault();const c=window.getSelection();let n="";if(c.rangeCount>0){const r=c.getRangeAt(0),i=document.createElement("div");i.appendChild(r.cloneContents()),n=d(i),o.clipboardData.setData("text/plain",n),r.deleteContents(),e&&e()}}),t.addEventListener("paste",o=>{o.preventDefault();const c=o.clipboardData.getData("text/plain"),n=window.getSelection();if(!n.rangeCount)return;const r=n.getRangeAt(0);r.deleteContents();const i=document.createTextNode(c);r.insertNode(i),r.setStartAfter(i),r.collapse(!0),n.removeAllRanges(),n.addRange(r),p(r),e&&e()})}function p(t){const e=document.createElement("span");e.appendChild(document.createTextNode("â€‹")),t.insertNode(e),e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),e.parentNode.removeChild(e)}function d(t){let e="";const o=t.childNodes;for(let c=0;c<o.length;c++){const n=o[c];n.nodeType===Node.TEXT_NODE?e+=n.textContent:n.nodeType===Node.ELEMENT_NODE&&(c>0&&n.nodeName==="DIV"&&(e+=`
`),e+=d(n))}return e}const a=8192;function m(t){if(t.length===0)return"";const e=new TextEncoder,o=[];for(let c=0;c<t.length;c+=a){const n=t.slice(c,c+a),r=e.encode(n),i=String.fromCharCode(...r);o.push(btoa(i))}return o.join("")}function g(t){if(t.length===0)return"";const e=new TextDecoder,o=[],c=a-a%4;for(let n=0;n<t.length;n+=c){const r=t.slice(n,n+c),i=atob(r),l=new Uint8Array(i.length);for(let s=0;s<i.length;s++)l[s]=i.charCodeAt(s);o.push(e.decode(l,{stream:!0}))}return o.push(e.decode()),o.join("")}function h(t){let e=S();e?(t.innerHTML=e.content||"",localStorage.setItem("editorState",JSON.stringify(e))):(e=v(),e&&(t.innerHTML=e.content||"")),y(),t.addEventListener("input",()=>u(t))}function y(){window.history.replaceState(null,"",window.location.pathname)}function S(){const t=window.location.hash,e="#json=";if(!t.startsWith(e))return null;try{const o=t.substring(e.length),c=g(o);return JSON.parse(c)}catch(o){return console.error("Error parsing URL state:",o.message),console.error("The URL appears to be truncated or corrupted."),null}}function v(){const t=localStorage.getItem("editorState");if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Error parsing saved state",e),null}}function u(t){const e={content:t.innerHTML};localStorage.setItem("editorState",JSON.stringify(e))}function b(t=2e3){let e;const o=()=>{document.body.classList.remove("hide-cursor"),clearTimeout(e),e=setTimeout(()=>{document.body.classList.add("hide-cursor")},t)};return document.addEventListener("mousemove",o,{passive:!0}),document.body.classList.add("hide-cursor"),()=>{document.removeEventListener("mousemove",o),clearTimeout(e)}}function L(t){document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="s"&&(e.preventDefault(),w(t))})}async function w(t){try{const o={content:t.textContent},c=JSON.stringify(o),n=m(c),r=`${window.location.origin}${window.location.pathname}?#json=${n}`;await navigator.clipboard.writeText(r),console.log("Link copied to clipboard")}catch(e){console.error("Failed to copy link to clipboard:",e)}}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".paper");h(t),f(t,()=>u(t)),L(t),t.focus(),b()});
