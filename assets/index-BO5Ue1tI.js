(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function l(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(e){if(e.ep)return;e.ep=!0;const n=l(e);fetch(e.href,n)}})();async function J(s){if(s.length===0)return"";const o=await Z(s),l=Array.from(o,a=>String.fromCodePoint(a)).join("");return btoa(l)}async function X(s){if(s.length===0)return"";const o=atob(s),l=Uint8Array.from(o,a=>a.charCodeAt(0));return await V(l)}async function Z(s){const o=new Blob([s]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(o).arrayBuffer())}async function V(s){const o=new Blob([s]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(o).text()}async function G(){const s=(await ee()??te())?.content||"";return Y(),s}function Q(s){const o={content:s};localStorage.setItem("editorState",JSON.stringify(o))}function Y(){window.history.replaceState(null,"",window.location.pathname)}async function ee(){const s=window.location.hash,o="#doc=";try{if(s.startsWith(o)){const l=await X(s.substring(o.length));return JSON.parse(l)}return null}catch(l){return console.error("Error parsing URL state:",l.message),console.error("The URL appears to be truncated or corrupted."),null}}function te(){const s=localStorage.getItem("editorState");if(!s)return null;try{return JSON.parse(s)}catch(o){return console.error("Error parsing saved state",o),null}}function ne(s,o,l,a){let e=o;const n=[],c=[];let h=0,p="",$=!1;function L(r){s.innerHTML=l(r)}function S(r,t,i){if(t===r){let g=0;const b=Math.min(i,r.childNodes.length);for(let w=0;w<b;w++)g+=r.childNodes[w].textContent.length,w<r.childNodes.length-1&&(g+=1);return g}let u=t;for(;u&&u.parentNode!==r;)u=u.parentNode;if(!u)return 0;let f=0;for(let g=r.firstChild;g&&g!==u;g=g.nextSibling)f+=g.textContent.length+1;try{const g=document.createRange();g.setStart(u,0),g.setEnd(t,i),f+=g.toString().length}catch{}return f}function N(){const r=window.getSelection();return r.rangeCount?S(s,r.focusNode,r.focusOffset):0}function T(){const r=window.getSelection();if(!r.rangeCount)return{start:0,end:0};const t=S(s,r.anchorNode,r.anchorOffset),i=S(s,r.focusNode,r.focusOffset);return{start:Math.min(t,i),end:Math.max(t,i)}}function E(r){const t=window.getSelection(),i=Array.from(s.children);if(i.length===0){t.collapse(s,0);return}let u=r;for(let w=0;w<i.length;w++){const k=i[w],P=k.textContent.length;if(u<=P){const _=document.createTreeWalker(k,NodeFilter.SHOW_TEXT);for(;_.nextNode();){const C=_.currentNode.textContent.length;if(u<=C){t.collapse(_.currentNode,u);return}u-=C}t.collapse(k,0);return}if(u-=P,w<i.length-1){if(u===0){const _=document.createTreeWalker(k,NodeFilter.SHOW_TEXT);let C=null;for(;_.nextNode();)C=_.currentNode;C?t.collapse(C,C.textContent.length):t.collapse(k,k.childNodes.length);return}u-=1}}const f=i[i.length-1],g=document.createTreeWalker(f,NodeFilter.SHOW_TEXT);let b=null;for(;g.nextNode();)b=g.currentNode;b?t.collapse(b,b.textContent.length):t.collapse(f,f.childNodes.length)}function O(){const r=window.getSelection();if(!r.rangeCount)return;const t=r.getRangeAt(0).getBoundingClientRect();if(!t||t.height===0)return;const i=40,u=window.innerHeight;t.bottom>u-i?window.scrollBy({top:t.bottom-u+i,behavior:"smooth"}):t.top<i&&window.scrollBy({top:t.top-i,behavior:"smooth"})}function m(r,t){const i=Date.now();if(r===p&&i-h<500&&n.length>0){h=i;return}n.push({text:e,offset:t}),c.length=0,h=i,p=r}function B(){if(n.length===0)return;c.push({text:e,offset:N()});const r=n.pop();e=r.text,L(e),E(r.offset),O(),a(e)}function A(){if(c.length===0)return;n.push({text:e,offset:N()});const r=c.pop();e=r.text,L(e),E(r.offset),O(),a(e)}function R(r){if(r===0)return 0;let t=r;for(;t>0&&/\s/.test(e[t-1]);)t--;for(;t>0&&!/\s/.test(e[t-1]);)t--;return t}function j(r){const t=e.length;if(r>=t)return t;let i=r;for(;i<t&&!/\s/.test(e[i]);)i++;for(;i<t&&/\s/.test(e[i]);)i++;return i}function F(r){if(r===0)return 0;let t=r;for(;t>0&&e[t-1]!==`
`;)t--;return t}function I(r){const t=e.length;if(r>=t)return t;let i=r;for(;i<t&&e[i]!==`
`;)i++;return i}function y(r){L(e),E(r),O(),a(e)}function M(r){if($||r.inputType==="insertCompositionText"||(r.preventDefault(),r.inputType==="insertFromPaste"||r.inputType==="deleteByCut"))return;const{start:t,end:i}=T(),u=t!==i;switch(r.inputType){case"insertText":{const f=r.data||"";m("insertText",t),e=e.slice(0,t)+f+e.slice(i),y(t+f.length);break}case"insertParagraph":case"insertLineBreak":{m("insertLine",t),e=e.slice(0,t)+`
`+e.slice(i),y(t+1);break}case"deleteContentBackward":{u?(m("delete",t),e=e.slice(0,t)+e.slice(i),y(t)):t>0&&(m("delete",t),e=e.slice(0,t-1)+e.slice(t),y(t-1));break}case"deleteContentForward":{u?(m("delete",t),e=e.slice(0,t)+e.slice(i),y(t)):t<e.length&&(m("delete",t),e=e.slice(0,t)+e.slice(t+1),y(t));break}case"deleteWordBackward":{if(u)m("deleteWord",t),e=e.slice(0,t)+e.slice(i),y(t);else{const f=R(t);f<t&&(m("deleteWord",t),e=e.slice(0,f)+e.slice(t),y(f))}break}case"deleteWordForward":{if(u)m("deleteWord",t),e=e.slice(0,t)+e.slice(i),y(t);else{const f=j(t);f>t&&(m("deleteWord",t),e=e.slice(0,t)+e.slice(f),y(t))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(u)m("deleteLine",t),e=e.slice(0,t)+e.slice(i),y(t);else{const f=F(t);f<t&&(m("deleteLine",t),e=e.slice(0,f)+e.slice(t),y(f))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(u)m("deleteLine",t),e=e.slice(0,t)+e.slice(i),y(t);else{const f=I(t);f>t&&(m("deleteLine",t),e=e.slice(0,t)+e.slice(f),y(t))}break}case"historyUndo":{B();break}case"historyRedo":{A();break}case"insertReplacementText":{const f=r.getTargetRanges();if(f.length>0){const g=f[0],b=S(s,g.startContainer,g.startOffset),w=S(s,g.endContainer,g.endOffset),k=r.dataTransfer?.getData("text/plain")||r.data||"";m("replace",b),e=e.slice(0,b)+k+e.slice(w),y(b+k.length)}break}}}function W(){$=!0}function U(){$=!1;const r=N();e=Array.from(s.children).map(t=>t.textContent).join(`
`),L(e),E(r),a(e)}function q(r){r.preventDefault();const{start:t,end:i}=T();t!==i&&r.clipboardData.setData("text/plain",e.slice(t,i))}function H(r){r.preventDefault();const{start:t,end:i}=T();t!==i&&(r.clipboardData.setData("text/plain",e.slice(t,i)),m("cut",t),e=e.slice(0,t)+e.slice(i),y(t))}function K(r){r.preventDefault();const t=r.clipboardData.getData("text/plain");if(!t)return;const{start:i,end:u}=T();m("paste",i),e=e.slice(0,i)+t+e.slice(u),y(i+t.length)}function z(r){(r.metaKey||r.ctrlKey)&&r.key==="z"&&(r.preventDefault(),r.shiftKey?A():B())}return s.addEventListener("keydown",z),s.addEventListener("beforeinput",M),s.addEventListener("compositionstart",W),s.addEventListener("compositionend",U),s.addEventListener("copy",q),s.addEventListener("cut",H),s.addEventListener("paste",K),L(e),{getText:()=>e}}const x={inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g};function d(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let D={};function se(s){const o={},l=s.split(`
`);for(const a of l){const e=a.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);e&&(o[e[1].toLowerCase()]={url:e[2],title:e[3]||""})}return o}function oe(s){const o=s.split(`
`),l=[];let a=0,e=0;if(o[0].match(/^---\s*$/)&&o.length>1){for(let n=1;n<o.length;n++)if(o[n].match(/^\s*---\s*$/)){const c=o.slice(0,n+1).join(`
`);l.push({type:"metadata",text:c,offset:0}),a=c.length+1,e=n+1;break}}for(;e<o.length;){const n=o[e];if(n.match(/^```/)){let c=e+1;for(;c<o.length&&!o[c].match(/^\s*```/);)c++;if(c<o.length){const h=o.slice(e,c+1).join(`
`);l.push({type:"code",text:h,offset:a}),a+=h.length+1,e=c+1;continue}}if(n.match(/^\|.*\|\s*$/)&&e+1<o.length){const c=o[e+1];if(c.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const h=p=>p.split("|").length-1;if(h(n)===h(c)){let p=e+2;for(;p<o.length&&o[p].match(/^\|.*\|\s*$/);)p++;const $=o.slice(e,p).join(`
`);l.push({type:"table",text:$,offset:a}),a+=$.length+1,e=p;continue}}}if(n.match(/^>(?:\s|$)/)){let c=e+1;for(;c<o.length&&o[c].match(/^>(?:\s|$)/);)c++;const h=o.slice(e,c).join(`
`);l.push({type:"blockquote",text:h,offset:a}),a+=h.length+1,e=c;continue}if(n.match(/^#{1,6}[ \t]+.+$/)){l.push({type:"heading",text:n,offset:a}),a+=n.length+1,e++;continue}if(n!==""&&!n.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&e+1<o.length){const c=o[e+1];if(c.match(/^=+\s*$/)||c.match(/^-+\s*$/)){const h=n+`
`+c;l.push({type:"setext",text:h,offset:a}),a+=h.length+1,e+=2;continue}}if(n.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){l.push({type:"hr",text:n,offset:a}),a+=n.length+1,e++;continue}l.push({type:"line",text:n,offset:a}),a+=n.length+1,e++}return l}function v(s){let o=s;const l=[],a=e=>{const n=`PROTECTED${l.length}`;return l.push(e),n};return o=o.replace(x.inlineCode,(e,n)=>a(`<code>\`${d(n)}\`</code>`)).replace(x.comment,(e,n)=>a(`<span class="comment">&lt;!--${d(n)}--&gt;</span>`)).replace(x.autoLink,(e,n)=>a(`<span class="md-syntax">&lt;</span><a href="${d(n)}" target="_blank" rel="noopener noreferrer">${d(n)}</a><span class="md-syntax">&gt;</span>`)).replace(x.autoEmail,(e,n)=>a(`<span class="md-syntax">&lt;</span><a href="mailto:${d(n)}">${d(n)}</a><span class="md-syntax">&gt;</span>`)).replace(x.htmlTag,e=>a(`<span class="html-tag">${d(e)}</span>`)).replace(x.image,(e,n,c)=>a(`<span class="md-syntax">![</span>${d(n)}<span class="md-syntax">](</span><a href="${d(c)}" target="_blank" rel="noopener noreferrer">${d(c)}</a><span class="md-syntax">)</span>`)).replace(x.link,(e,n,c)=>a('<span class="md-syntax">[</span>')+n+a(`<span class="md-syntax">](</span><a href="${d(c)}" target="_blank" rel="noopener noreferrer">${d(c)}</a><span class="md-syntax">)</span>`)).replace(x.refImage,(e,n,c)=>{const h=(c||n).toLowerCase(),p=D[h];return p?a(`<span class="md-syntax">![</span>${d(n)}<span class="md-syntax">][</span><a href="${d(p.url)}" target="_blank" rel="noopener noreferrer">${d(c)}</a><span class="md-syntax">]</span>`):e}).replace(x.refLink,(e,n,c)=>{const h=(c||n).toLowerCase(),p=D[h];return p?a('<span class="md-syntax">[</span>')+n+a(`<span class="md-syntax">][</span><a href="${d(p.url)}" target="_blank" rel="noopener noreferrer">${d(c)}</a><span class="md-syntax">]</span>`):e}),o=d(o),o=o.replace(x.boldItalic,(e,n)=>`<b><em>***${n}***</em></b>`).replace(x.bold,(e,n)=>`<b>**${n}**</b>`).replace(x.boldUnderscore,(e,n)=>`<b>__${n}__</b>`).replace(x.strikethrough,(e,n)=>`<s>~~${n}~~</s>`).replace(x.italicAsterisk,(e,n)=>`<em>*${n}*</em>`).replace(x.italicUnderscore,(e,n)=>`<em>_${n}_</em>`),o=o.replace(/\uE000PROTECTED(\d+)\uE001/g,(e,n)=>l[parseInt(n,10)]),o}function re(s){switch(s.type){case"metadata":case"code":case"table":return`<pre><code>${d(s.text)}</code></pre>`;case"heading":{const o=s.text.match(/^(#{1,6})/)[1].length;return`<h${o}>${v(s.text)}</h${o}>`}case"blockquote":return`<blockquote>${v(s.text)}</blockquote>`;case"setext":{const o=s.text.indexOf(`
`),l=s.text.slice(0,o),a=s.text.slice(o+1),e=a.trimStart()[0]==="="?1:2;return`<h${e}>${v(l)}
<span class="md-syntax">${d(a)}</span></h${e}>`}case"hr":return`<div class="hr">${d(s.text)}</div>`;case"line":{if(s.text==="")return'<div class="line"><br></div>';const o=s.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(o){const e=o[1],n=o[2],c=o[3]||"";return`<div class="line"><span class="md-syntax">${d(e)}</span><a href="${d(n)}" target="_blank" rel="noopener noreferrer">${d(n)}</a><span class="md-syntax">${d(c)}</span></div>`}const l=s.text.match(/^(\s*)([*\-+] )/);if(l){const e=l[1],n=l[2],c=s.text.slice(e.length+n.length),h=c.match(/^(\[[ xX]\] )/);if(h){const p=h[1],$=c.slice(p.length),S=p[1]!==" "?`<span class="task-done">${v($)}</span>`:v($);return`<div class="line">${d(e)}<span class="md-syntax">${d(n)}</span><span class="md-checkbox">${d(p)}</span>${S}</div>`}return`<div class="line">${d(e)}<span class="md-syntax">${d(n)}</span>${v(c)}</div>`}const a=s.text.match(/^(\s*)(\d+\. )/);if(a){const e=a[1],n=a[2],c=s.text.slice(e.length+n.length);return`<div class="line">${d(e)}<span class="md-syntax">${d(n)}</span>${v(c)}</div>`}return`<div class="line">${v(s.text)}</div>`}}}function ae(s){return D=se(s),oe(s).map(re).join("")}function ce(s,o){const l=document.querySelector(".signal-overlay");l&&l.remove();const a=document.createElement("div");a.className="signal-overlay";const e=document.createElement("div");e.className="signal";const n=document.createElement("span");n.className="signal-keys",n.textContent=s;const c=document.createElement("span");c.className="signal-message",c.textContent=o,e.appendChild(n),e.appendChild(c),a.appendChild(e),document.body.appendChild(a),a.addEventListener("animationend",h=>{h.target===a&&a.remove()})}function ie(s,o){document.addEventListener("keydown",l=>{if((l.metaKey||l.ctrlKey)&&l.key==="s"){l.preventDefault();const a=l.metaKey?"⌘S":"Ctrl+S";le(o,a)}})}function le(s,o){try{const a={content:s()},e=JSON.stringify(a),n=J(e).then(h=>{const p=`${window.location.origin}${window.location.pathname}?#doc=${h}`;return new Blob([p],{type:"text/plain"})}),c=new ClipboardItem({"text/plain":n});navigator.clipboard.write([c]).then(()=>{ce(o,"Link copied!")})}catch(l){console.error("Failed to copy link to clipboard:",l)}}document.addEventListener("DOMContentLoaded",async()=>{const s=document.querySelector(".paper");de();const o=await G(),l=ne(s,o,ae,Q);ie(s,l.getText),s.focus(),ue(2e3)});function de(){const s=document.querySelector(".logo");s?.addEventListener("animationend",()=>s.remove(),{once:!0})}function ue(s){let o;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(o),o=setTimeout(()=>{document.body.classList.add("hide-cursor")},s)},{passive:!0}),document.body.classList.add("hide-cursor")}
