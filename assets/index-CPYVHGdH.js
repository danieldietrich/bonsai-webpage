(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function a(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(o){if(o.ep)return;o.ep=!0;const e=a(o);fetch(o.href,e)}})();async function se(t){if(t.length===0)return"";const n=new Blob([t]).stream().pipeThrough(new CompressionStream("gzip")),a=new Uint8Array(await new Response(n).arrayBuffer()),c=Array.from(a,o=>String.fromCodePoint(o)).join("");return btoa(c)}async function oe(t){if(t.length===0)return"";const n=atob(t),a=Uint8Array.from(n,c=>c.charCodeAt(0));try{const c=new Blob([a]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(c).text()}catch{return new TextDecoder().decode(a)}}async function ce(){const t=(await de()??pe())?.content||"";return le(),t}function re(t){const n={content:t};localStorage.setItem("editorState",JSON.stringify(n))}function ae(){try{const t=localStorage.getItem("caretPosition");return t!==null?parseInt(t,10):0}catch{return 0}}function ie(t){localStorage.setItem("caretPosition",String(t))}function le(){window.history.replaceState(null,"",window.location.pathname)}async function de(){const t=window.location.hash,n="#doc=";try{if(t.startsWith(n)){const a=decodeURIComponent(t.substring(n.length));if(a.startsWith("https://")||a.startsWith("http://"))return await ue(a);const c=await oe(a);return JSON.parse(c)}return null}catch(a){return console.error("Error loading document from URL:",a.message),null}}async function ue(t){const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch document: ${n.status} ${n.statusText}`);const a=await n.text();try{const c=JSON.parse(a);if(c.content!==void 0)return c}catch{}return{content:a}}function pe(){const t=localStorage.getItem("editorState");if(!t)return null;try{return JSON.parse(t)}catch(n){return console.error("Error parsing saved state",n),null}}const O=2,fe=/^(\s*(?:>\s*)*)([-*+] (?:\[[ xX]\] )?|\d+\. )?/;function P(t,n){let a=n;for(;a>0&&t[a-1]!==`
`;)a--;return a}function B(t,n){let a=n;for(;a<t.length&&t[a]!==`
`;)a++;return a}function he(t){const n=t.match(fe),a=n[1]||"",c=n[2]||"";return{prefix:a+c,structural:a,marker:c}}function me(t,n,a){if(!a.match(/^[-=]+\s*$/)||n===0)return!1;const c=P(t,n-1),o=t.slice(c,n-1);if(o===""||o.match(/^\s*(---+|\*\*\*+|___+)\s*$/)||o.match(/^- /))return!1;if(c>0){const e=P(t,c-1);if(t.slice(e,c-1)!=="")return!1}return!0}function ge(t,n){if(!n)return t;const a=n.match(/^([-*+] )\[[ xX]\] $/);if(a)return t+a[1]+"[ ] ";const c=n.match(/^(\d+)\. $/);if(c){const o=parseInt(c[1],10)+1;return t+o+". "}return t+n}function xe(t,n,a){const c=P(t,n),o=B(t,a),e=t.slice(c,o);if(me(t,c,e))return{text:t.slice(0,n)+`
`+t.slice(a),offset:n+1};const{prefix:s,structural:u,marker:p}=he(e);if(s.length===0)return{text:t.slice(0,n)+`
`+t.slice(a),offset:n+1};const h=e.slice(s.length),$=n<=c+s.length;if(h.trim()===""&&$)return{text:t.slice(0,c)+t.slice(c+s.length),offset:c};const x=ge(u,p);return{text:t.slice(0,n)+`
`+x+t.slice(a),offset:n+1+x.length}}function ye(t,n){const a=P(t,n),o=t.slice(a,B(t,n)).match(/^\s*/)[0].length,e=n-a,s=" ".repeat(O);return e<=o?{text:t.slice(0,a)+s+t.slice(a),offset:n+O}:{text:t.slice(0,n)+s+t.slice(n),offset:n+O}}function $e(t,n){const a=P(t,n),o=t.slice(a,B(t,n)).match(/^\s*/)[0].length,e=Math.min(o,O);if(e===0)return{text:t,offset:n};const s=t.slice(0,a)+t.slice(a+e),u=Math.max(a,n-e);return{text:s,offset:u}}function we(t,n,a,c,o={}){let e=n;const s=[],u=[];let p=0,h="",$=!1;function v(i){t.innerHTML=a(i)}function x(i,r,l){if(r===i){let m=0;const k=Math.min(l,i.childNodes.length);for(let S=0;S<k;S++)m+=i.childNodes[S].textContent.length,S<i.childNodes.length-1&&(m+=1);return m}let f=r;for(;f&&f.parentNode!==i;)f=f.parentNode;if(!f)return 0;let g=0;for(let m=i.firstChild;m&&m!==f;m=m.nextSibling)g+=m.textContent.length+1;try{const m=document.createRange();m.setStart(f,0),m.setEnd(r,l),g+=m.toString().length}catch{}return g}function w(){const i=window.getSelection();return i.rangeCount?x(t,i.focusNode,i.focusOffset):0}function b(){const i=window.getSelection();if(!i.rangeCount)return{start:0,end:0};const r=x(t,i.anchorNode,i.anchorOffset),l=x(t,i.focusNode,i.focusOffset);return{start:Math.min(r,l),end:Math.max(r,l)}}function N(i){const r=document.createTreeWalker(i,NodeFilter.SHOW_TEXT);let l=null;for(;r.nextNode();)l=r.currentNode;return l}function _(i,r){const l=N(r);l?i.collapse(l,l.textContent.length):i.collapse(r,r.childNodes.length)}function E(i){const r=window.getSelection(),l=Array.from(t.children);if(l.length===0){r.collapse(t,0);return}let f=i;for(let g=0;g<l.length;g++){const m=l[g],k=m.textContent.length;if(f<=k){const S=document.createTreeWalker(m,NodeFilter.SHOW_TEXT);for(;S.nextNode();){const F=S.currentNode.textContent.length;if(f<=F){r.collapse(S.currentNode,f);return}f-=F}r.collapse(m,0);return}if(f-=k,g<l.length-1){if(f===0){_(r,m);return}f-=1}}_(r,l[l.length-1])}function D(){const i=window.getSelection();if(!i.rangeCount)return;const r=i.getRangeAt(0).getBoundingClientRect();if(!r||r.height===0)return;const l=40,f=window.innerHeight;r.bottom>f-l?window.scrollBy({top:r.bottom-f+l,behavior:"smooth"}):r.top<l&&window.scrollBy({top:r.top-l,behavior:"smooth"})}function T(i,r){const l=Date.now();if(i===h&&l-p<500&&s.length>0){p=l;return}s.push({text:e,offset:r}),u.length=0,p=l,h=i}function A(){if(s.length===0)return;u.push({text:e,offset:w()});const i=s.pop();e=i.text,v(e),E(i.offset),D(),c(e)}function j(){if(u.length===0)return;s.push({text:e,offset:w()});const i=u.pop();e=i.text,v(e),E(i.offset),D(),c(e)}function X(i){if(i===0)return 0;let r=i;for(;r>0&&/\s/.test(e[r-1]);)r--;for(;r>0&&!/\s/.test(e[r-1]);)r--;return r}function z(i){const r=e.length;if(i>=r)return r;let l=i;for(;l<r&&!/\s/.test(e[l]);)l++;for(;l<r&&/\s/.test(e[l]);)l++;return l}function J(i){if(i===0)return 0;let r=i;for(;r>0&&e[r-1]!==`
`;)r--;return r}function Z(i){const r=e.length;if(i>=r)return r;let l=i;for(;l<r&&e[l]!==`
`;)l++;return l}function R(i){const r=i.length,{start:l,end:f}=b();if(!(l!==f)){T("format",l),e=e.slice(0,l)+i+i+e.slice(l),C(l+r);return}const m=e.slice(l-r,l),k=e.slice(f,f+r);m===i&&k===i?(T("format",l),e=e.slice(0,l-r)+e.slice(l,f)+e.slice(f+r),C(f-r)):(T("format",l),e=e.slice(0,l)+i+e.slice(l,f)+i+e.slice(f),C(f+r+r))}function C(i){v(e),E(i),D(),c(e),o.onCaretChange?.(i)}function M(i,r,l,f){if(r!==l)T(i,r),e=e.slice(0,r)+e.slice(l),C(r);else{const g=f();if(g!==r){T(i,r);const m=Math.min(r,g),k=Math.max(r,g);e=e.slice(0,m)+e.slice(k),C(m)}}}function V(i){if($||i.inputType==="insertCompositionText"||(i.preventDefault(),i.inputType==="insertFromPaste"||i.inputType==="deleteByCut"))return;const{start:r,end:l}=b();switch(i.inputType){case"insertText":{const f=i.data||"";T("insertText",r),e=e.slice(0,r)+f+e.slice(l),C(r+f.length);break}case"insertParagraph":case"insertLineBreak":{T("insertLine",r);const f=xe(e,r,l);e=f.text,C(f.offset);break}case"deleteContentBackward":M("delete",r,l,()=>Math.max(0,r-1));break;case"deleteContentForward":M("delete",r,l,()=>Math.min(e.length,r+1));break;case"deleteWordBackward":M("deleteWord",r,l,()=>X(r));break;case"deleteWordForward":M("deleteWord",r,l,()=>z(r));break;case"deleteSoftLineBackward":case"deleteHardLineBackward":M("deleteLine",r,l,()=>J(r));break;case"deleteSoftLineForward":case"deleteHardLineForward":M("deleteLine",r,l,()=>Z(r));break;case"historyUndo":{A();break}case"historyRedo":{j();break}case"insertReplacementText":{const f=i.getTargetRanges();if(f.length>0){const g=f[0],m=x(t,g.startContainer,g.startOffset),k=x(t,g.endContainer,g.endOffset),S=i.dataTransfer?.getData("text/plain")||i.data||"";T("replace",m),e=e.slice(0,m)+S+e.slice(k),C(m+S.length)}break}}}function G(){$=!0}function Q(){$=!1;const i=w();e=Array.from(t.children).map(r=>r.textContent).join(`
`),v(e),E(i),c(e)}function Y(i){i.preventDefault();const{start:r,end:l}=b();r!==l&&i.clipboardData.setData("text/plain",e.slice(r,l))}function ee(i){i.preventDefault();const{start:r,end:l}=b();r!==l&&(i.clipboardData.setData("text/plain",e.slice(r,l)),T("cut",r),e=e.slice(0,r)+e.slice(l),C(r))}function te(i){i.preventDefault();const r=i.clipboardData.getData("text/plain");if(!r)return;const{start:l,end:f}=b();T("paste",l),e=e.slice(0,l)+r+e.slice(f),C(l+r.length)}function ne(i){if((i.metaKey||i.ctrlKey)&&i.key==="z"&&(i.preventDefault(),i.shiftKey?j():A()),(i.metaKey||i.ctrlKey)&&i.key==="b"&&(i.preventDefault(),R("**")),(i.metaKey||i.ctrlKey)&&i.key==="i"&&(i.preventDefault(),R("_")),i.key==="Tab"){i.preventDefault();const{start:r,end:l}=b(),f=r!==l;if(i.shiftKey){T("outdent",r);const g=$e(e,r);e=g.text,C(g.offset)}else if(f)T("indent",r),e=e.slice(0,r)+"  "+e.slice(l),C(r+2);else{T("indent",r);const g=ye(e,r);e=g.text,C(g.offset)}}}t.addEventListener("keydown",ne),t.addEventListener("beforeinput",V),t.addEventListener("compositionstart",G),t.addEventListener("compositionend",Q),t.addEventListener("copy",Y),t.addEventListener("cut",ee),t.addEventListener("paste",te),v(e);const q=Math.min(o.initialCaretPosition??0,e.length);if(q>0){E(q);const i=window.getSelection();if(i.rangeCount){const r=i.getRangeAt(0).getBoundingClientRect();if(r&&r.height>0){const l=window.innerHeight/2;window.scrollBy({top:r.top-l})}}}return document.addEventListener("selectionchange",()=>{if(!o.onCaretChange)return;const i=window.getSelection();i.rangeCount&&t.contains(i.focusNode)&&o.onCaretChange(w())}),{getText:()=>e}}const y={escaped:/\\([\\`*_{}\[\]()#+\-.!~^|$])/g,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),inlineMath:new RegExp("(?<!\\$)\\$(?!\\$)([^\\$\\n]+?)\\$(?!\\$)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,superscript:/\^([^\s^](?:[^^\n]*?[^\s^])?)\^/g,subscript:new RegExp("(?<!~)~(?!~)([^\\s~](?:[^~\\n]*?[^\\s~])?)~(?!~)","g"),autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g,footnoteRef:/\[\^([^\]]+)\]/g};function d(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let I={};function be(t){const n={},a=t.split(`
`);for(const c of a){const o=c.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);o&&(n[o[1].toLowerCase()]={url:o[2],title:o[3]||""})}return n}function H(t){const n=t.split(`
`),a=[];let c=0,o=0;if(n[0].match(/^---\s*$/)&&n.length>1){for(let e=1;e<n.length;e++)if(n[e].match(/^\s*---\s*$/)){const s=n.slice(0,e+1).join(`
`);a.push({type:"metadata",text:s,offset:0}),c=s.length+1,o=e+1;break}}for(;o<n.length;){const e=n[o];if(e.match(/^```/)){let s=o+1;for(;s<n.length&&!n[s].match(/^\s*```/);)s++;if(s<n.length){const u=n.slice(o,s+1).join(`
`);a.push({type:"code",text:u,offset:c}),c+=u.length+1,o=s+1;continue}}if(e.match(/^\$\$\s*$/)){let s=o+1;for(;s<n.length&&!n[s].match(/^\s*\$\$/);)s++;if(s<n.length){const u=n.slice(o,s+1).join(`
`);a.push({type:"math",text:u,offset:c}),c+=u.length+1,o=s+1;continue}}if(e.match(/^\|.*\|\s*$/)&&o+1<n.length){const s=n[o+1];if(s.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const u=p=>p.split("|").length-1;if(u(e)===u(s)){let p=o+2;for(;p<n.length&&n[p].match(/^\|.*\|\s*$/);)p++;const h=n.slice(o,p).join(`
`);a.push({type:"table",text:h,offset:c}),c+=h.length+1,o=p;continue}}}if(e.match(/^\s*>(?:\s|$)/)){let s=o+1;for(;s<n.length&&n[s].match(/^\s*>(?:\s|$)/);)s++;const p=n.slice(o,s).map(x=>{const w=x.match(/^(\s*>)(\s?)(.*)/);return w?{prefix:w[1]+w[2],content:w[3]}:{prefix:"",content:x}}),h=p.map(x=>x.content).join(`
`),$=H(h);let v=0;for(const x of $){const w=x.text.split(`
`).length,b=p.slice(v,v+w).map(_=>_.prefix),N=x.text.split(`
`).map((_,E)=>b[E]+_);a.push({type:x.type,text:N.join(`
`),offset:c,blockquote:!0,innerText:x.text,prefixes:b}),c+=N.join(`
`).length+1,v+=w}o=s;continue}if(e.match(/^#{1,6}[ \t]+.+$/)){a.push({type:"heading",text:e,offset:c}),c+=e.length+1,o++;continue}if(e!==""&&!e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&!e.match(/^- /)&&(o===0||n[o-1]==="")&&o+1<n.length){const s=n[o+1];if(s.match(/^=+\s*$/)||s.match(/^-+\s*$/)){const u=e+`
`+s;a.push({type:"setext",text:u,offset:c}),c+=u.length+1,o+=2;continue}}if(e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){a.push({type:"hr",text:e,offset:c}),c+=e.length+1,o++;continue}if(e.match(/^(?: {4}|\t)/)&&!e.match(/^\s*[*\-+] /)&&!e.match(/^\s*\d+\. /)&&!e.match(/^\s*>(?:\s|$)/)){let s=o+1;for(;s<n.length&&n[s].match(/^(?: {4}|\t)/)&&!n[s].match(/^\s*[*\-+] /)&&!n[s].match(/^\s*\d+\. /)&&!n[s].match(/^\s*>(?:\s|$)/);)s++;const u=n.slice(o,s).join(`
`);a.push({type:"indented-code",text:u,offset:c}),c+=u.length+1,o=s;continue}a.push({type:"line",text:e,offset:c}),c+=e.length+1,o++}return a}function L(t){let n=t;const a=[],c=e=>{const s=`PROTECTED${a.length}`;return a.push(e),s};n=n.replace(y.escaped,(e,s)=>c(`<span class="md-syntax">\\</span>${d(s)}`)).replace(y.inlineCode,(e,s)=>c(`<code><span class="md-syntax">\`</span>${d(s)}<span class="md-syntax">\`</span></code>`)).replace(y.inlineMath,(e,s)=>c(`<code class="math"><span class="md-syntax">$</span>${d(s)}<span class="md-syntax">$</span></code>`)).replace(y.comment,(e,s)=>c(`<span class="comment">&lt;!--${d(s)}--&gt;</span>`)).replace(y.autoLink,(e,s)=>c(`<span class="md-syntax">&lt;</span><a href="${d(s)}" target="_blank" rel="noopener noreferrer">${d(s)}</a><span class="md-syntax">&gt;</span>`)).replace(y.autoEmail,(e,s)=>c(`<span class="md-syntax">&lt;</span><a href="mailto:${d(s)}">${d(s)}</a><span class="md-syntax">&gt;</span>`)).replace(y.htmlTag,e=>c(`<code class="md-syntax">${d(e)}</code>`)).replace(y.image,(e,s,u)=>c(`<span class="md-syntax">![</span>${d(s)}<span class="md-syntax">](</span><a href="${d(u)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">)</span>`)).replace(y.link,(e,s,u)=>c('<span class="md-syntax">[</span>')+s+c(`<span class="md-syntax">](</span><a href="${d(u)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">)</span>`)).replace(y.refImage,(e,s,u)=>{const p=(u||s).toLowerCase(),h=I[p];return h?c(`<span class="md-syntax">![</span>${d(s)}<span class="md-syntax">][</span><a href="${d(h.url)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">]</span>`):e}).replace(y.refLink,(e,s,u)=>{const p=(u||s).toLowerCase(),h=I[p];return h?c('<span class="md-syntax">[</span>')+s+c(`<span class="md-syntax">][</span><a href="${d(h.url)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">]</span>`):e}).replace(y.footnoteRef,(e,s)=>c('<span class="md-syntax">[^</span>')+s+c('<span class="md-syntax">]</span>')),n=d(n);const o=e=>`<span class="md-syntax">${e}</span>`;return n=n.replace(y.boldItalic,(e,s)=>c(`<b><em>${o("***")}`)+s+c(`${o("***")}</em></b>`)).replace(y.bold,(e,s)=>`<b>${o("**")}${s}${o("**")}</b>`).replace(y.boldUnderscore,(e,s)=>`<b>${o("__")}${s}${o("__")}</b>`).replace(y.strikethrough,(e,s)=>`<s>${o("~~")}${s}${o("~~")}</s>`).replace(y.superscript,(e,s)=>`<sup>${o("^")}${s}${o("^")}</sup>`).replace(y.subscript,(e,s)=>`<sub>${o("~")}${s}${o("~")}</sub>`).replace(y.italicAsterisk,(e,s)=>`<em>${o("*")}${s}${o("*")}</em>`).replace(y.italicUnderscore,(e,s)=>`<em>${o("_")}${s}${o("_")}</em>`),n=n.replace(/\uE000PROTECTED(\d+)\uE001/g,(e,s)=>a[parseInt(s,10)]),n}function ve(t){const n=t.match(/^(\s*)(>)(\s?)$/);if(!n)return d(t);const a=n[1],c=n[2],o=n[3];return a?`<span class="indent">${d(a)}</span><span class="md-syntax">${d(c)}</span>${o}`:`<span class="md-syntax">${d(c)}</span>${o}`}function Te(t){return/^<\w+[^>]*\sclass="[^"]*bq/.test(t)?t:/^<\w+[^>]*\sclass="/.test(t)?t.replace(/^(<\w+[^>]*\sclass="[^"]*)(")/,"$1 bq$2"):t.replace(/^(<\w+)/,'$1 class="bq"')}function Ce(t,n){const c=t.split(`
`).map((o,e)=>{const s=n[e];if(!s)return o;const u=ve(s),p=o.match(/^(<(?:pre|code|div|h[1-6])[^>]*>)*/),h=p?p[0].length:0,$=o.replace(/<br>/g,"");return $.slice(0,h)+u+$.slice(h)}).join(`
`);return Te(c)}function K(t){if(t.blockquote){const n={type:t.type,text:t.innerText},a=K(n),c=Array.isArray(a)?a:[a];let o=0;const e=[];for(const s of c){const u=(s.match(/\n/g)||[]).length+1,p=t.prefixes.slice(o,o+u);e.push(Ce(s,p)),o+=u}return e.length===1?e[0]:e}switch(t.type){case"metadata":{const n=t.text.split(`
`),a=`<span class="md-syntax">${d(n[0])}</span>`,c=`<span class="md-syntax">${d(n[n.length-1])}</span>`,o=n.slice(1,-1);return o.length>0?`<pre><code>${a}
${o.map(e=>d(e)).join(`
`)}
${c}</code></pre>`:`<pre><code>${a}
${c}</code></pre>`}case"code":{const n=t.text.match(/^(```[^\n]*)\n([\s\S]*?)\n(\s*```)$/);return n?`<pre><code><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code>${d(t.text)}</code></pre>`}case"indented-code":return`<pre><code>${d(t.text)}</code></pre>`;case"table":return`<pre><code>${t.text.split(`
`).map((c,o)=>{const e=d(c);return o===1?`<span class="md-syntax">${e}</span>`:e.replace(/\|/g,'<span class="md-syntax">|</span>')}).join(`
`)}</code></pre>`;case"math":{const n=t.text.match(/^(\$\$)\n([\s\S]*?)\n(\s*\$\$)$/);return n?`<pre><code class="math"><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code class="math">${d(t.text)}</code></pre>`}case"heading":{const n=t.text.match(/^(#{1,6}[ \t]+)(.*)/),a=n[1].trim().length;return`<h${a}><span class="md-syntax">${d(n[1])}</span>${L(n[2])}</h${a}>`}case"setext":{const n=t.text.indexOf(`
`),a=t.text.slice(0,n),c=t.text.slice(n+1),o=c.trimStart()[0]==="="?1:2;return`<h${o}>${L(a)}
<span class="md-rule md-syntax">${d(c)}</span></h${o}>`}case"hr":return`<div class="md-rule md-syntax">${d(t.text)}</div>`;case"line":{if(t.text==="")return'<div class="line"><br></div>';const n=t.text.match(/^(\*\[)([^\]]+)(\]:\s)(.*)/);if(n)return`<div class="line"><span class="md-syntax">${d(n[1])}</span>${d(n[2])}<span class="md-syntax">${d(n[3])}</span>${L(n[4])}</div>`;const a=t.text.match(/^(\[\^)([^\]]+)(\]:\s)(.*)/);if(a)return`<div class="line"><span class="md-syntax">${d(a[1])}</span>${d(a[2])}<span class="md-syntax">${d(a[3])}</span>${L(a[4])}</div>`;const c=t.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(c){const p=c[1],h=c[2],$=c[3]||"";return`<div class="line"><span class="md-syntax">${d(p)}</span><a href="${d(h)}" target="_blank" rel="noopener noreferrer">${d(h)}</a><span class="md-syntax">${d($)}</span></div>`}const o=t.text.match(/^(\s*)([*\-+] )/);if(o){const p=o[1],h=o[2],$=t.text.slice(p.length+h.length),v=p?`<span class="indent">${d(p)}</span>`:"",x=$.match(/^(\[[ xX]\] )/);if(x){const w=x[1],b=$.slice(w.length),_=w[1]!==" "?`<span class="task-done">${L(b)}</span>`:L(b);return`<div class="line">${v}<span class="md-syntax md-bullet">${d(h)}</span><span class="md-checkbox">${d(w)}</span>${_}</div>`}return`<div class="line">${v}<span class="md-syntax md-bullet">${d(h)}</span>${L($)}</div>`}const e=t.text.match(/^(\s*)(\d+\. )/);if(e){const p=e[1],h=e[2],$=t.text.slice(p.length+h.length);return`<div class="line">${p?`<span class="indent">${d(p)}</span>`:""}<span class="md-syntax">${d(h)}</span>${L($)}</div>`}const s=t.text.match(/^(: )/);if(s){const p=s[1],h=t.text.slice(p.length);return`<div class="line"><span class="md-syntax">${d(p)}</span>${L(h)}</div>`}const u=t.text.match(/^(\s+)/);if(u){const p=u[1],h=t.text.slice(p.length);return`<div class="line"><span class="indent">${d(p)}</span>${L(h)}</div>`}return`<div class="line">${L(t.text)}</div>`}}}function Se(t){return I=be(t),H(t).flatMap(a=>{const c=K(a);return Array.isArray(c)?c:[c]}).join("")}function Le(t,n){document.addEventListener("keydown",a=>{if((a.metaKey||a.ctrlKey)&&a.key==="s"){a.preventDefault();const c=a.metaKey?"⌘S":"Ctrl+S";U(n,c)}})}function U(t,n){try{const c={content:t()},o=JSON.stringify(c),e=se(o).then(u=>{const p=`${window.location.origin}${window.location.pathname}?#doc=${u}`;return new Blob([p],{type:"text/plain"})}),s=new ClipboardItem({"text/plain":e});navigator.clipboard.write([s]).then(()=>{ke(n,"Link copied!")})}catch(a){console.error("Failed to copy link to clipboard:",a)}}function ke(t,n){const a=document.querySelector(".signal-overlay");a&&a.remove();const c=document.createElement("div");c.className="signal-overlay";const o=document.createElement("div");if(o.className="signal",t){const s=document.createElement("span");s.className="signal-keys",s.textContent=t,o.appendChild(s)}const e=document.createElement("span");e.className="signal-message",e.textContent=n,o.appendChild(e),c.appendChild(o),document.body.appendChild(c),c.addEventListener("animationend",s=>{s.target===c&&c.remove()})}const _e=3e3;function Ee(t,n){if(!("ontouchstart"in window))return;const a=Me();document.body.appendChild(a);let c;t.addEventListener("touchstart",()=>{a.classList.add("visible"),clearTimeout(c),c=setTimeout(()=>{a.classList.remove("visible")},_e)},{passive:!0}),a.addEventListener("click",o=>{o.preventDefault(),U(n)})}function Me(){const t=document.createElement("button");return t.type="button",t.className="share-button",t.setAttribute("aria-label","Copy shareable link"),t.innerHTML=`<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
  <polyline points="16 6 12 2 8 6"/>
  <line x1="12" y1="2" x2="12" y2="15"/>
</svg>`,t}const W=()=>document.body.classList.add("fonts-loaded");document.fonts.ready.then(W);setTimeout(W,2e3);document.addEventListener("DOMContentLoaded",async()=>{const t=document.querySelector(".paper");Ne();const n=window.location.hash.startsWith("#doc="),a=await ce(),c=n?0:ae(),o=we(t,a,Se,re,{initialCaretPosition:c,onCaretChange:ie});Le(t,o.getText),Ee(t,o.getText),t.focus(),Pe(2e3)});function Ne(){const t=document.querySelector(".logo");t?.addEventListener("animationend",()=>t.remove(),{once:!0})}function Pe(t){let n;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(n),n=setTimeout(()=>{document.body.classList.add("hide-cursor")},t)},{passive:!0}),document.body.classList.add("hide-cursor")}
