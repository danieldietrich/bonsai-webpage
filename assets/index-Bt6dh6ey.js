(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();async function J(a){if(a.length===0)return"";const s=await Z(a),i=Array.from(s,r=>String.fromCodePoint(r)).join("");return btoa(i)}async function X(a){if(a.length===0)return"";const s=atob(a),i=Uint8Array.from(s,r=>r.charCodeAt(0));return await V(i)}async function Z(a){const s=new Blob([a]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(s).arrayBuffer())}async function V(a){const s=new Blob([a]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(s).text()}async function G(){const a=(await ee()??te())?.content||"";return Y(),a}function Q(a){const s={content:a};localStorage.setItem("editorState",JSON.stringify(s))}function Y(){window.history.replaceState(null,"",window.location.pathname)}async function ee(){const a=window.location.hash,s="#doc=";try{if(a.startsWith(s)){const i=await X(a.substring(s.length));return JSON.parse(i)}return null}catch(i){return console.error("Error parsing URL state:",i.message),console.error("The URL appears to be truncated or corrupted."),null}}function te(){const a=localStorage.getItem("editorState");if(!a)return null;try{return JSON.parse(a)}catch(s){return console.error("Error parsing saved state",s),null}}function ne(a,s,i,r){let e=s;const o=[],n=[];let p=0,f="",x=!1;function v(c){a.innerHTML=i(c)}function S(c,t,l){if(t===c){let m=0;const k=Math.min(l,c.childNodes.length);for(let b=0;b<k;b++)m+=c.childNodes[b].textContent.length,b<c.childNodes.length-1&&(m+=1);return m}let u=t;for(;u&&u.parentNode!==c;)u=u.parentNode;if(!u)return 0;let h=0;for(let m=c.firstChild;m&&m!==u;m=m.nextSibling)h+=m.textContent.length+1;try{const m=document.createRange();m.setStart(u,0),m.setEnd(t,l),h+=m.toString().length}catch{}return h}function E(){const c=window.getSelection();return c.rangeCount?S(a,c.focusNode,c.focusOffset):0}function C(){const c=window.getSelection();if(!c.rangeCount)return{start:0,end:0};const t=S(a,c.anchorNode,c.anchorOffset),l=S(a,c.focusNode,c.focusOffset);return{start:Math.min(t,l),end:Math.max(t,l)}}function N(c){const t=window.getSelection(),l=Array.from(a.children);if(l.length===0){t.collapse(a,0);return}let u=c;for(let b=0;b<l.length;b++){const L=l[b],B=L.textContent.length;if(u<=B){const T=document.createTreeWalker(L,NodeFilter.SHOW_TEXT);for(;T.nextNode();){const _=T.currentNode.textContent.length;if(u<=_){t.collapse(T.currentNode,u);return}u-=_}t.collapse(L,0);return}if(u-=B,b<l.length-1){if(u===0){const T=document.createTreeWalker(L,NodeFilter.SHOW_TEXT);let _=null;for(;T.nextNode();)_=T.currentNode;_?t.collapse(_,_.textContent.length):t.collapse(L,L.childNodes.length);return}u-=1}}const h=l[l.length-1],m=document.createTreeWalker(h,NodeFilter.SHOW_TEXT);let k=null;for(;m.nextNode();)k=m.currentNode;k?t.collapse(k,k.textContent.length):t.collapse(h,h.childNodes.length)}function O(){const c=window.getSelection();if(!c.rangeCount)return;const t=c.getRangeAt(0).getBoundingClientRect();if(!t||t.height===0)return;const l=40,u=window.innerHeight;t.bottom>u-l?window.scrollBy({top:t.bottom-u+l,behavior:"smooth"}):t.top<l&&window.scrollBy({top:t.top-l,behavior:"smooth"})}function y(c,t){const l=Date.now();if(c===f&&l-p<500&&o.length>0){p=l;return}o.push({text:e,offset:t}),n.length=0,p=l,f=c}function M(){if(o.length===0)return;n.push({text:e,offset:E()});const c=o.pop();e=c.text,v(e),N(c.offset),O(),r(e)}function j(){if(n.length===0)return;o.push({text:e,offset:E()});const c=n.pop();e=c.text,v(e),N(c.offset),O(),r(e)}function R(c){if(c===0)return 0;let t=c;for(;t>0&&/\s/.test(e[t-1]);)t--;for(;t>0&&!/\s/.test(e[t-1]);)t--;return t}function A(c){const t=e.length;if(c>=t)return t;let l=c;for(;l<t&&!/\s/.test(e[l]);)l++;for(;l<t&&/\s/.test(e[l]);)l++;return l}function P(c){if(c===0)return 0;let t=c;for(;t>0&&e[t-1]!==`
`;)t--;return t}function F(c){const t=e.length;if(c>=t)return t;let l=c;for(;l<t&&e[l]!==`
`;)l++;return l}function $(c){v(e),N(c),O(),r(e)}function q(c){if(x||c.inputType==="insertCompositionText"||(c.preventDefault(),c.inputType==="insertFromPaste"||c.inputType==="deleteByCut"))return;const{start:t,end:l}=C(),u=t!==l;switch(c.inputType){case"insertText":{const h=c.data||"";y("insertText",t),e=e.slice(0,t)+h+e.slice(l),$(t+h.length);break}case"insertParagraph":case"insertLineBreak":{y("insertLine",t),e=e.slice(0,t)+`
`+e.slice(l),$(t+1);break}case"deleteContentBackward":{u?(y("delete",t),e=e.slice(0,t)+e.slice(l),$(t)):t>0&&(y("delete",t),e=e.slice(0,t-1)+e.slice(t),$(t-1));break}case"deleteContentForward":{u?(y("delete",t),e=e.slice(0,t)+e.slice(l),$(t)):t<e.length&&(y("delete",t),e=e.slice(0,t)+e.slice(t+1),$(t));break}case"deleteWordBackward":{if(u)y("deleteWord",t),e=e.slice(0,t)+e.slice(l),$(t);else{const h=R(t);h<t&&(y("deleteWord",t),e=e.slice(0,h)+e.slice(t),$(h))}break}case"deleteWordForward":{if(u)y("deleteWord",t),e=e.slice(0,t)+e.slice(l),$(t);else{const h=A(t);h>t&&(y("deleteWord",t),e=e.slice(0,t)+e.slice(h),$(t))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(u)y("deleteLine",t),e=e.slice(0,t)+e.slice(l),$(t);else{const h=P(t);h<t&&(y("deleteLine",t),e=e.slice(0,h)+e.slice(t),$(h))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(u)y("deleteLine",t),e=e.slice(0,t)+e.slice(l),$(t);else{const h=F(t);h>t&&(y("deleteLine",t),e=e.slice(0,t)+e.slice(h),$(t))}break}case"historyUndo":{M();break}case"historyRedo":{j();break}case"insertReplacementText":{const h=c.getTargetRanges();if(h.length>0){const m=h[0],k=S(a,m.startContainer,m.startOffset),b=S(a,m.endContainer,m.endOffset),L=c.dataTransfer?.getData("text/plain")||c.data||"";y("replace",k),e=e.slice(0,k)+L+e.slice(b),$(k+L.length)}break}}}function I(){x=!0}function W(){x=!1;const c=E();e=Array.from(a.children).map(t=>t.textContent).join(`
`),v(e),N(c),r(e)}function U(c){c.preventDefault();const{start:t,end:l}=C();t!==l&&c.clipboardData.setData("text/plain",e.slice(t,l))}function H(c){c.preventDefault();const{start:t,end:l}=C();t!==l&&(c.clipboardData.setData("text/plain",e.slice(t,l)),y("cut",t),e=e.slice(0,t)+e.slice(l),$(t))}function K(c){c.preventDefault();const t=c.clipboardData.getData("text/plain");if(!t)return;const{start:l,end:u}=C();y("paste",l),e=e.slice(0,l)+t+e.slice(u),$(l+t.length)}function z(c){(c.metaKey||c.ctrlKey)&&c.key==="z"&&(c.preventDefault(),c.shiftKey?j():M())}return a.addEventListener("keydown",z),a.addEventListener("beforeinput",q),a.addEventListener("compositionstart",I),a.addEventListener("compositionend",W),a.addEventListener("copy",U),a.addEventListener("cut",H),a.addEventListener("paste",K),v(e),{getText:()=>e}}const g={escaped:/\\([\\`*_{}\[\]()#+\-.!~^|$])/g,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),inlineMath:new RegExp("(?<!\\$)\\$(?!\\$)([^\\$\\n]+?)\\$(?!\\$)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,superscript:/\^([^\s^](?:[^^\n]*?[^\s^])?)\^/g,subscript:new RegExp("(?<!~)~(?!~)([^\\s~](?:[^~\\n]*?[^\\s~])?)~(?!~)","g"),autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g,footnoteRef:/\[\^([^\]]+)\]/g};function d(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let D={};function se(a){const s={},i=a.split(`
`);for(const r of i){const e=r.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);e&&(s[e[1].toLowerCase()]={url:e[2],title:e[3]||""})}return s}function ae(a){const s=a.split(`
`),i=[];let r=0,e=0;if(s[0].match(/^---\s*$/)&&s.length>1){for(let o=1;o<s.length;o++)if(s[o].match(/^\s*---\s*$/)){const n=s.slice(0,o+1).join(`
`);i.push({type:"metadata",text:n,offset:0}),r=n.length+1,e=o+1;break}}for(;e<s.length;){const o=s[e];if(o.match(/^```/)){let n=e+1;for(;n<s.length&&!s[n].match(/^\s*```/);)n++;if(n<s.length){const p=s.slice(e,n+1).join(`
`);i.push({type:"code",text:p,offset:r}),r+=p.length+1,e=n+1;continue}}if(o.match(/^\$\$\s*$/)){let n=e+1;for(;n<s.length&&!s[n].match(/^\s*\$\$/);)n++;if(n<s.length){const p=s.slice(e,n+1).join(`
`);i.push({type:"math",text:p,offset:r}),r+=p.length+1,e=n+1;continue}}if(o.match(/^\|.*\|\s*$/)&&e+1<s.length){const n=s[e+1];if(n.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const p=f=>f.split("|").length-1;if(p(o)===p(n)){let f=e+2;for(;f<s.length&&s[f].match(/^\|.*\|\s*$/);)f++;const x=s.slice(e,f).join(`
`);i.push({type:"table",text:x,offset:r}),r+=x.length+1,e=f;continue}}}if(o.match(/^>(?:\s|$)/)){let n=e+1;for(;n<s.length&&s[n].match(/^>(?:\s|$)/);)n++;const p=s.slice(e,n).join(`
`);i.push({type:"blockquote",text:p,offset:r}),r+=p.length+1,e=n;continue}if(o.match(/^#{1,6}[ \t]+.+$/)){i.push({type:"heading",text:o,offset:r}),r+=o.length+1,e++;continue}if(o!==""&&!o.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&e+1<s.length){const n=s[e+1];if(n.match(/^=+\s*$/)||n.match(/^-+\s*$/)){const p=o+`
`+n;i.push({type:"setext",text:p,offset:r}),r+=p.length+1,e+=2;continue}}if(o.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){i.push({type:"hr",text:o,offset:r}),r+=o.length+1,e++;continue}if(o.match(/^(?: {4}|\t)/)&&!o.match(/^\s*[*\-+] /)&&!o.match(/^\s*\d+\. /)){let n=e+1;for(;n<s.length&&s[n].match(/^(?: {4}|\t)/)&&!s[n].match(/^\s*[*\-+] /)&&!s[n].match(/^\s*\d+\. /);)n++;const p=s.slice(e,n).join(`
`);i.push({type:"indented-code",text:p,offset:r}),r+=p.length+1,e=n;continue}i.push({type:"line",text:o,offset:r}),r+=o.length+1,e++}return i}function w(a){let s=a;const i=[],r=o=>{const n=`PROTECTED${i.length}`;return i.push(o),n};s=s.replace(g.escaped,(o,n)=>r(`<span class="md-syntax">\\</span>${d(n)}`)).replace(g.inlineCode,(o,n)=>r(`<code><span class="md-syntax">\`</span>${d(n)}<span class="md-syntax">\`</span></code>`)).replace(g.inlineMath,(o,n)=>r(`<code class="math"><span class="md-syntax">$</span>${d(n)}<span class="md-syntax">$</span></code>`)).replace(g.comment,(o,n)=>r(`<span class="comment">&lt;!--${d(n)}--&gt;</span>`)).replace(g.autoLink,(o,n)=>r(`<span class="md-syntax">&lt;</span><a href="${d(n)}" target="_blank" rel="noopener noreferrer">${d(n)}</a><span class="md-syntax">&gt;</span>`)).replace(g.autoEmail,(o,n)=>r(`<span class="md-syntax">&lt;</span><a href="mailto:${d(n)}">${d(n)}</a><span class="md-syntax">&gt;</span>`)).replace(g.htmlTag,o=>r(`<code class="md-syntax">${d(o)}</code>`)).replace(g.image,(o,n,p)=>r(`<span class="md-syntax">![</span>${d(n)}<span class="md-syntax">](</span><a href="${d(p)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">)</span>`)).replace(g.link,(o,n,p)=>r('<span class="md-syntax">[</span>')+n+r(`<span class="md-syntax">](</span><a href="${d(p)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">)</span>`)).replace(g.refImage,(o,n,p)=>{const f=(p||n).toLowerCase(),x=D[f];return x?r(`<span class="md-syntax">![</span>${d(n)}<span class="md-syntax">][</span><a href="${d(x.url)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">]</span>`):o}).replace(g.refLink,(o,n,p)=>{const f=(p||n).toLowerCase(),x=D[f];return x?r('<span class="md-syntax">[</span>')+n+r(`<span class="md-syntax">][</span><a href="${d(x.url)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">]</span>`):o}).replace(g.footnoteRef,(o,n)=>r('<span class="md-syntax">[^</span>')+n+r('<span class="md-syntax">]</span>')),s=d(s);const e=o=>`<span class="md-syntax">${o}</span>`;return s=s.replace(g.boldItalic,(o,n)=>`<b><em>${e("***")}${n}${e("***")}</em></b>`).replace(g.bold,(o,n)=>`<b>${e("**")}${n}${e("**")}</b>`).replace(g.boldUnderscore,(o,n)=>`<b>${e("__")}${n}${e("__")}</b>`).replace(g.strikethrough,(o,n)=>`<s>${e("~~")}${n}${e("~~")}</s>`).replace(g.superscript,(o,n)=>`<sup>${e("^")}${n}${e("^")}</sup>`).replace(g.subscript,(o,n)=>`<sub>${e("~")}${n}${e("~")}</sub>`).replace(g.italicAsterisk,(o,n)=>`<em>${e("*")}${n}${e("*")}</em>`).replace(g.italicUnderscore,(o,n)=>`<em>${e("_")}${n}${e("_")}</em>`),s=s.replace(/\uE000PROTECTED(\d+)\uE001/g,(o,n)=>i[parseInt(n,10)]),s}function oe(a){switch(a.type){case"metadata":{const s=a.text.split(`
`),i=`<span class="md-syntax">${d(s[0])}</span>`,r=`<span class="md-syntax">${d(s[s.length-1])}</span>`,e=s.slice(1,-1).map(o=>d(o)).join(`
`);return`<pre><code>${i}
${e}
${r}</code></pre>`}case"code":{const s=a.text.match(/^(```[^\n]*)\n([\s\S]*?)\n(\s*```)$/);return s?`<pre><code><span class="md-syntax">${d(s[1])}</span>
${d(s[2])}
<span class="md-syntax">${d(s[3])}</span></code></pre>`:`<pre><code>${d(a.text)}</code></pre>`}case"indented-code":return`<pre><code>${d(a.text)}</code></pre>`;case"table":return`<pre><code>${a.text.split(`
`).map((r,e)=>{const o=d(r);return e===1?`<span class="md-syntax">${o}</span>`:o.replace(/\|/g,'<span class="md-syntax">|</span>')}).join(`
`)}</code></pre>`;case"math":{const s=a.text.match(/^(\$\$)\n([\s\S]*?)\n(\s*\$\$)$/);return s?`<pre><code class="math"><span class="md-syntax">${d(s[1])}</span>
${d(s[2])}
<span class="md-syntax">${d(s[3])}</span></code></pre>`:`<pre><code class="math">${d(a.text)}</code></pre>`}case"heading":{const s=a.text.match(/^(#{1,6}[ \t]+)(.*)/),i=s[1].trim().length;return`<h${i}><span class="md-syntax">${d(s[1])}</span>${w(s[2])}</h${i}>`}case"blockquote":return`<blockquote>${a.text.split(`
`).map(r=>{const e=r.match(/^(>)\s?(.*)/);return e?`<span class="md-syntax">${d(e[1])}</span> ${w(e[2])}`:w(r)}).join(`
`)}</blockquote>`;case"setext":{const s=a.text.indexOf(`
`),i=a.text.slice(0,s),r=a.text.slice(s+1),e=r.trimStart()[0]==="="?1:2;return`<h${e}>${w(i)}
<span class="md-syntax">${d(r)}</span></h${e}>`}case"hr":return`<div class="md-syntax">${d(a.text)}</div>`;case"line":{if(a.text==="")return'<div class="line"><br></div>';const s=a.text.match(/^(\[\^)([^\]]+)(\]:\s)(.*)/);if(s)return`<div class="line"><span class="md-syntax">${d(s[1])}</span>${d(s[2])}<span class="md-syntax">${d(s[3])}</span>${w(s[4])}</div>`;const i=a.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(i){const n=i[1],p=i[2],f=i[3]||"";return`<div class="line"><span class="md-syntax">${d(n)}</span><a href="${d(p)}" target="_blank" rel="noopener noreferrer">${d(p)}</a><span class="md-syntax">${d(f)}</span></div>`}const r=a.text.match(/^(\s*)([*\-+] )/);if(r){const n=r[1],p=r[2],f=a.text.slice(n.length+p.length),x=f.match(/^(\[[ xX]\] )/);if(x){const v=x[1],S=f.slice(v.length),C=v[1]!==" "?`<span class="task-done">${w(S)}</span>`:w(S);return`<div class="line"><span class="indent">${d(n)}</span><span class="md-syntax">${d(p)}</span><span class="md-checkbox">${d(v)}</span>${C}</div>`}return`<div class="line"><span class="indent">${d(n)}</span><span class="md-syntax">${d(p)}</span>${w(f)}</div>`}const e=a.text.match(/^(\s*)(\d+\. )/);if(e){const n=e[1],p=e[2],f=a.text.slice(n.length+p.length);return`<div class="line"><span class="indent">${d(n)}</span><span class="md-syntax">${d(p)}</span>${w(f)}</div>`}const o=a.text.match(/^(: )/);if(o){const n=o[1],p=a.text.slice(n.length);return`<div class="line"><span class="md-syntax">${d(n)}</span>${w(p)}</div>`}return`<div class="line">${w(a.text)}</div>`}}}function re(a){return D=se(a),ae(a).map(oe).join("")}function ce(a,s){const i=document.querySelector(".signal-overlay");i&&i.remove();const r=document.createElement("div");r.className="signal-overlay";const e=document.createElement("div");e.className="signal";const o=document.createElement("span");o.className="signal-keys",o.textContent=a;const n=document.createElement("span");n.className="signal-message",n.textContent=s,e.appendChild(o),e.appendChild(n),r.appendChild(e),document.body.appendChild(r),r.addEventListener("animationend",p=>{p.target===r&&r.remove()})}function ie(a,s){document.addEventListener("keydown",i=>{if((i.metaKey||i.ctrlKey)&&i.key==="s"){i.preventDefault();const r=i.metaKey?"⌘S":"Ctrl+S";le(s,r)}})}function le(a,s){try{const r={content:a()},e=JSON.stringify(r),o=J(e).then(p=>{const f=`${window.location.origin}${window.location.pathname}?#doc=${p}`;return new Blob([f],{type:"text/plain"})}),n=new ClipboardItem({"text/plain":o});navigator.clipboard.write([n]).then(()=>{ce(s,"Link copied!")})}catch(i){console.error("Failed to copy link to clipboard:",i)}}document.addEventListener("DOMContentLoaded",async()=>{const a=document.querySelector(".paper");de();const s=await G(),i=ne(a,s,re,Q);ie(a,i.getText),a.focus(),pe(2e3)});function de(){const a=document.querySelector(".logo");a?.addEventListener("animationend",()=>a.remove(),{once:!0})}function pe(a){let s;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(s),s=setTimeout(()=>{document.body.classList.add("hide-cursor")},a)},{passive:!0}),document.body.classList.add("hide-cursor")}
