(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const e of a)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function i(a){const e={};return a.integrity&&(e.integrity=a.integrity),a.referrerPolicy&&(e.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?e.credentials="include":a.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(a){if(a.ep)return;a.ep=!0;const e=i(a);fetch(a.href,e)}})();async function ce(t){if(t.length===0)return"";const n=new Blob([t]).stream().pipeThrough(new CompressionStream("gzip")),i=new Uint8Array(await new Response(n).arrayBuffer()),c=Array.from(i,a=>String.fromCodePoint(a)).join("");return btoa(c)}async function ie(t){if(t.length===0)return"";const n=atob(t),i=Uint8Array.from(n,c=>c.charCodeAt(0));try{const c=new Blob([i]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(c).text()}catch{return new TextDecoder().decode(i)}}async function le(){const t=(await he()??ge())?.content||"";return pe(),t}function de(t){const n={content:t};localStorage.setItem("editorState",JSON.stringify(n))}function ue(){try{const t=localStorage.getItem("caretPosition");return t!==null?parseInt(t,10):0}catch{return 0}}function fe(t){localStorage.setItem("caretPosition",String(t))}function pe(){window.history.replaceState(null,"",window.location.pathname)}async function he(){const t=window.location.hash,n="#doc=";try{if(t.startsWith(n)){const i=decodeURIComponent(t.substring(n.length));if(i.startsWith("https://")||i.startsWith("http://"))return await me(i);const c=await ie(i);return JSON.parse(c)}return null}catch(i){return console.error("Error loading document from URL:",i.message),null}}async function me(t){const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch document: ${n.status} ${n.statusText}`);const i=await n.text();try{const c=JSON.parse(i);if(c.content!==void 0)return c}catch{}return{content:i}}function ge(){const t=localStorage.getItem("editorState");if(!t)return null;try{return JSON.parse(t)}catch(n){return console.error("Error parsing saved state",n),null}}const M=2,xe=/^(\s*(?:>\s*)*)([-*+] (?:\[[ xX]\] )?|\d+\. )?/;function D(t,n){let i=n;for(;i>0&&t[i-1]!==`
`;)i--;return i}function I(t,n){let i=n;for(;i<t.length&&t[i]!==`
`;)i++;return i}function ye(t){const n=t.match(xe),i=n[1]||"",c=n[2]||"";return{prefix:i+c,structural:i,marker:c}}function $e(t,n,i){if(!i.match(/^[-=]+\s*$/)||n===0)return!1;const c=D(t,n-1),a=t.slice(c,n-1);if(a===""||a.match(/^\s*(---+|\*\*\*+|___+)\s*$/)||a.match(/^- /))return!1;if(c>0){const e=D(t,c-1);if(t.slice(e,c-1)!=="")return!1}return!0}function we(t,n){if(!n)return t;const i=n.match(/^([-*+] )\[[ xX]\] $/);if(i)return t+i[1]+"[ ] ";const c=n.match(/^(\d+)\. $/);if(c){const a=parseInt(c[1],10)+1;return t+a+". "}return t+n}function be(t,n,i){const c=D(t,n),a=I(t,i),e=t.slice(c,a);if($e(t,c,e))return{text:t.slice(0,n)+`
`+t.slice(i),offset:n+1};const{prefix:r,structural:f,marker:p}=ye(e);if(r.length===0)return{text:t.slice(0,n)+`
`+t.slice(i),offset:n+1};const m=e.slice(r.length),w=n<=c+r.length;if(m.trim()===""&&w)return{text:t.slice(0,c)+t.slice(c+r.length),offset:c};const x=we(f,p);return{text:t.slice(0,n)+`
`+x+t.slice(i),offset:n+1+x.length}}function Te(t,n){const i=D(t,n),a=t.slice(i,I(t,n)).match(/^\s*/)[0].length,e=n-i,r=" ".repeat(M);return e<=a?{text:t.slice(0,i)+r+t.slice(i),offset:n+M}:{text:t.slice(0,n)+r+t.slice(n),offset:n+M}}function ve(t,n){const i=D(t,n),a=t.slice(i,I(t,n)).match(/^\s*/)[0].length,e=Math.min(a,M);if(e===0)return{text:t,offset:n};const r=t.slice(0,i)+t.slice(i+e),f=Math.max(i,n-e);return{text:r,offset:f}}function ke(t,n,i,c,a={}){let e=n;const r=[],f=[];let p=0,m="",w=!1;function T(s){t.innerHTML=i(s)}function x(s,o,l){if(o===s){let h=0;const E=Math.min(l,s.childNodes.length);for(let C=0;C<E;C++)h+=s.childNodes[C].textContent.length,C<s.childNodes.length-1&&(h+=1);return h}let u=o;for(;u&&u.parentNode!==s;)u=u.parentNode;if(!u)return 0;let g=0;for(let h=s.firstChild;h&&h!==u;h=h.nextSibling)g+=h.textContent.length+1;try{const h=document.createRange();h.setStart(u,0),h.setEnd(o,l),g+=h.toString().length}catch{}return g}function $(){const s=window.getSelection();return s.rangeCount?x(t,s.focusNode,s.focusOffset):0}function b(){const s=window.getSelection();if(!s.rangeCount)return{start:0,end:0};const o=x(t,s.anchorNode,s.anchorOffset),l=x(t,s.focusNode,s.focusOffset);return{start:Math.min(o,l),end:Math.max(o,l)}}function O(s){const o=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);let l=null;for(;o.nextNode();)l=o.currentNode;return l}function _(s,o){const l=O(o);l?s.collapse(l,l.textContent.length):s.collapse(o,o.childNodes.length)}function L(s){const o=window.getSelection(),l=Array.from(t.children);if(l.length===0){o.collapse(t,0);return}let u=s;for(let g=0;g<l.length;g++){const h=l[g],E=h.textContent.length;if(u<=E){const C=document.createTreeWalker(h,NodeFilter.SHOW_TEXT);for(;C.nextNode();){const W=C.currentNode.textContent.length;if(u<=W){o.collapse(C.currentNode,u);return}u-=W}o.collapse(h,0);return}if(u-=E,g<l.length-1){if(u===0){_(o,h);return}u-=1}}_(o,l[l.length-1])}function P(){const s=window.getSelection();if(!s.rangeCount)return;const o=s.getRangeAt(0).getBoundingClientRect();if(!o||o.height===0)return;const l=40,u=window.innerHeight;o.bottom>u-l?window.scrollBy({top:o.bottom-u+l,behavior:"smooth"}):o.top<l&&window.scrollBy({top:o.top-l,behavior:"smooth"})}function v(s,o){const l=Date.now();if(s===m&&l-p<500&&r.length>0){p=l;return}r.push({text:e,offset:o}),f.length=0,p=l,m=s}function B(){if(r.length===0)return;f.push({text:e,offset:$()});const s=r.pop();e=s.text,T(e),L(s.offset),P(),c(e)}function K(){if(f.length===0)return;r.push({text:e,offset:$()});const s=f.pop();e=s.text,T(e),L(s.offset),P(),c(e)}function J(s){if(s===0)return 0;let o=s;for(;o>0&&/\s/.test(e[o-1]);)o--;for(;o>0&&!/\s/.test(e[o-1]);)o--;return o}function Z(s){const o=e.length;if(s>=o)return o;let l=s;for(;l<o&&!/\s/.test(e[l]);)l++;for(;l<o&&/\s/.test(e[l]);)l++;return l}function V(s){if(s===0)return 0;let o=s;for(;o>0&&e[o-1]!==`
`;)o--;return o}function G(s){const o=e.length;if(s>=o)return o;let l=s;for(;l<o&&e[l]!==`
`;)l++;return l}function R(s){const o=s.length,{start:l,end:u}=b();if(!(l!==u)){v("format",l),e=e.slice(0,l)+s+s+e.slice(l),k(l+o);return}const h=e.slice(l-o,l),E=e.slice(u,u+o);h===s&&E===s?(v("format",l),e=e.slice(0,l-o)+e.slice(l,u)+e.slice(u+o),k(u-o)):(v("format",l),e=e.slice(0,l)+s+e.slice(l,u)+s+e.slice(u),k(u+o+o))}function k(s){T(e),L(s),P(),c(e),a.onCaretChange?.(s)}function N(s,o,l,u){if(o!==l)v(s,o),e=e.slice(0,o)+e.slice(l),k(o);else{const g=u();if(g!==o){v(s,o);const h=Math.min(o,g),E=Math.max(o,g);e=e.slice(0,h)+e.slice(E),k(h)}}}function Q(s){if(w||s.inputType==="insertCompositionText"||(s.preventDefault(),s.inputType==="insertFromPaste"||s.inputType==="deleteByCut"))return;const{start:o,end:l}=b();switch(s.inputType){case"insertText":{const u=s.data||"";v("insertText",o),e=e.slice(0,o)+u+e.slice(l),k(o+u.length);break}case"insertParagraph":case"insertLineBreak":{v("insertLine",o);const u=be(e,o,l);e=u.text,k(u.offset);break}case"deleteContentBackward":N("delete",o,l,()=>Math.max(0,o-1));break;case"deleteContentForward":N("delete",o,l,()=>Math.min(e.length,o+1));break;case"deleteWordBackward":N("deleteWord",o,l,()=>J(o));break;case"deleteWordForward":N("deleteWord",o,l,()=>Z(o));break;case"deleteSoftLineBackward":case"deleteHardLineBackward":N("deleteLine",o,l,()=>V(o));break;case"deleteSoftLineForward":case"deleteHardLineForward":N("deleteLine",o,l,()=>G(o));break;case"historyUndo":{B();break}case"historyRedo":{K();break}case"insertReplacementText":{const u=s.getTargetRanges();if(u.length>0){const g=u[0],h=x(t,g.startContainer,g.startOffset),E=x(t,g.endContainer,g.endOffset),C=s.dataTransfer?.getData("text/plain")||s.data||"";v("replace",h),e=e.slice(0,h)+C+e.slice(E),k(h+C.length)}break}}}function Y(){w=!0}function ee(){w=!1;const s=$();e=Array.from(t.children).map(o=>o.textContent).join(`
`),T(e),L(s),c(e)}function te(s){s.preventDefault();const{start:o,end:l}=b();o!==l&&s.clipboardData.setData("text/plain",e.slice(o,l))}function ne(s){s.preventDefault();const{start:o,end:l}=b();o!==l&&(s.clipboardData.setData("text/plain",e.slice(o,l)),v("cut",o),e=e.slice(0,o)+e.slice(l),k(o))}function se(s){s.preventDefault();const o=s.clipboardData.getData("text/plain");if(!o)return;const{start:l,end:u}=b();v("paste",l),e=e.slice(0,l)+o+e.slice(u),k(l+o.length)}function oe(s){if((s.metaKey||s.ctrlKey)&&s.key==="z"&&(s.preventDefault(),s.shiftKey?K():B()),(s.metaKey||s.ctrlKey)&&s.key==="b"&&(s.preventDefault(),R("**")),(s.metaKey||s.ctrlKey)&&s.key==="i"&&(s.preventDefault(),R("_")),s.key==="Tab"){s.preventDefault();const{start:o,end:l}=b(),u=o!==l;if(s.shiftKey){v("outdent",o);const g=ve(e,o);e=g.text,k(g.offset)}else if(u)v("indent",o),e=e.slice(0,o)+"  "+e.slice(l),k(o+2);else{v("indent",o);const g=Te(e,o);e=g.text,k(g.offset)}}if(s.key==="ArrowRight"&&!s.metaKey&&!s.ctrlKey&&!s.altKey&&!s.shiftKey){const o=window.getSelection();if(o.rangeCount&&o.isCollapsed&&o.focusNode?.nodeType===Node.TEXT_NODE){const l=o.focusNode,u=o.focusOffset,g=l.parentElement?.closest(".list-marker");if(g&&j(g,l)){const h=g.nextElementSibling;h?.classList.contains("list-content")&&h.textContent.length>0&&(u===l.textContent.length?(s.preventDefault(),L($()+1)):u===l.textContent.length-1&&(s.preventDefault(),F(h)))}}}if(s.key==="ArrowLeft"&&!s.metaKey&&!s.ctrlKey&&!s.altKey&&!s.shiftKey){const o=window.getSelection();if(o.rangeCount&&o.isCollapsed&&o.focusNode?.nodeType===Node.TEXT_NODE){const l=o.focusNode;if(o.focusOffset===0){const u=l.parentElement?.closest(".list-content");if(u&&re(u,l)&&u.previousElementSibling?.classList.contains("list-marker")){s.preventDefault();const h=$();h>0&&L(h-1)}}}}(s.key==="ArrowUp"||s.key==="ArrowDown")&&!s.metaKey&&!s.ctrlKey&&!s.altKey&&!s.shiftKey&&requestAnimationFrame(ae)}function j(s,o){const l=document.createTreeWalker(s,NodeFilter.SHOW_TEXT);let u=null;for(;l.nextNode();)u=l.currentNode;return u===o}function re(s,o){return document.createTreeWalker(s,NodeFilter.SHOW_TEXT).nextNode()===o}function F(s){const l=document.createTreeWalker(s,NodeFilter.SHOW_TEXT).nextNode();l&&window.getSelection().collapse(l,0)}function ae(){const s=window.getSelection();if(!s.rangeCount||!s.isCollapsed)return;const o=s.focusNode;if(!o||o.nodeType!==Node.TEXT_NODE||s.focusOffset!==o.textContent.length)return;const l=o.parentElement?.closest(".list-marker");if(!l||!j(l,o))return;const u=l.nextElementSibling;!u?.classList.contains("list-content")||u.textContent.length===0||F(u)}t.addEventListener("keydown",oe),t.addEventListener("beforeinput",Q),t.addEventListener("compositionstart",Y),t.addEventListener("compositionend",ee),t.addEventListener("copy",te),t.addEventListener("cut",ne),t.addEventListener("paste",se),T(e);const H=Math.min(a.initialCaretPosition??0,e.length);if(H>0){L(H);const s=window.getSelection();if(s.rangeCount){const o=s.getRangeAt(0).getBoundingClientRect();if(o&&o.height>0){const l=window.innerHeight/2;window.scrollBy({top:o.top-l})}}}return document.addEventListener("selectionchange",()=>{if(!a.onCaretChange)return;const s=window.getSelection();s.rangeCount&&t.contains(s.focusNode)&&a.onCaretChange($())}),{getText:()=>e}}const y={escaped:/\\([\\`*_{}\[\]()#+\-.!~^|$])/g,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),inlineMath:new RegExp("(?<!\\$)\\$(?!\\$)([^\\$\\n]+?)\\$(?!\\$)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,superscript:/\^([^\s^](?:[^^\n]*?[^\s^])?)\^/g,subscript:new RegExp("(?<!~)~(?!~)([^\\s~](?:[^~\\n]*?[^\\s~])?)~(?!~)","g"),autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g,footnoteRef:/\[\^([^\]]+)\]/g};function d(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let A={};function Ce(t){const n={},i=t.split(`
`);for(const c of i){const a=c.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);a&&(n[a[1].toLowerCase()]={url:a[2],title:a[3]||""})}return n}function q(t){const n=t.split(`
`),i=[];let c=0,a=0;if(n[0].match(/^---\s*$/)&&n.length>1){for(let e=1;e<n.length;e++)if(n[e].match(/^\s*---\s*$/)){const r=n.slice(0,e+1).join(`
`);i.push({type:"metadata",text:r,offset:0}),c=r.length+1,a=e+1;break}}for(;a<n.length;){const e=n[a];if(e.match(/^```/)){let r=a+1;for(;r<n.length&&!n[r].match(/^\s*```/);)r++;if(r<n.length){const f=n.slice(a,r+1).join(`
`);i.push({type:"code",text:f,offset:c}),c+=f.length+1,a=r+1;continue}}if(e.match(/^\$\$\s*$/)){let r=a+1;for(;r<n.length&&!n[r].match(/^\s*\$\$/);)r++;if(r<n.length){const f=n.slice(a,r+1).join(`
`);i.push({type:"math",text:f,offset:c}),c+=f.length+1,a=r+1;continue}}if(e.match(/^\|.*\|\s*$/)&&a+1<n.length){const r=n[a+1];if(r.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const f=p=>p.split("|").length-1;if(f(e)===f(r)){let p=a+2;for(;p<n.length&&n[p].match(/^\|.*\|\s*$/);)p++;const m=n.slice(a,p).join(`
`);i.push({type:"table",text:m,offset:c}),c+=m.length+1,a=p;continue}}}if(e.match(/^\s*>(?:\s|$)/)){let r=a+1;for(;r<n.length&&n[r].match(/^\s*>(?:\s|$)/);)r++;const p=n.slice(a,r).map(x=>{const $=x.match(/^(\s*>)(\s?)(.*)/);return $?{prefix:$[1]+$[2],content:$[3]}:{prefix:"",content:x}}),m=p.map(x=>x.content).join(`
`),w=q(m);let T=0;for(const x of w){const $=x.text.split(`
`).length,b=p.slice(T,T+$).map(_=>_.prefix),O=x.text.split(`
`).map((_,L)=>b[L]+_);i.push({type:x.type,text:O.join(`
`),offset:c,blockquote:!0,innerText:x.text,prefixes:b}),c+=O.join(`
`).length+1,T+=$}a=r;continue}if(e.match(/^#{1,6}[ \t]+.+$/)){i.push({type:"heading",text:e,offset:c}),c+=e.length+1,a++;continue}if(e!==""&&!e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&!e.match(/^- /)&&(a===0||n[a-1]==="")&&a+1<n.length){const r=n[a+1];if(r.match(/^=+\s*$/)||r.match(/^-+\s*$/)){const f=e+`
`+r;i.push({type:"setext",text:f,offset:c}),c+=f.length+1,a+=2;continue}}if(e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){i.push({type:"hr",text:e,offset:c}),c+=e.length+1,a++;continue}if(e.match(/^(?: {4}|\t)/)&&!e.match(/^\s*[*\-+] /)&&!e.match(/^\s*\d+\. /)&&!e.match(/^\s*>(?:\s|$)/)){let r=a+1;for(;r<n.length&&n[r].match(/^(?: {4}|\t)/)&&!n[r].match(/^\s*[*\-+] /)&&!n[r].match(/^\s*\d+\. /)&&!n[r].match(/^\s*>(?:\s|$)/);)r++;const f=n.slice(a,r).join(`
`);i.push({type:"indented-code",text:f,offset:c}),c+=f.length+1,a=r;continue}i.push({type:"line",text:e,offset:c}),c+=e.length+1,a++}return i}function S(t){let n=t;const i=[],c=e=>{const r=`PROTECTED${i.length}`;return i.push(e),r};n=n.replace(y.escaped,(e,r)=>c(`<span class="md-syntax">\\</span>${d(r)}`)).replace(y.inlineCode,(e,r)=>c(`<code><span class="md-syntax">\`</span>${d(r)}<span class="md-syntax">\`</span></code>`)).replace(y.inlineMath,(e,r)=>c(`<code class="math"><span class="md-syntax">$</span>${d(r)}<span class="md-syntax">$</span></code>`)).replace(y.comment,(e,r)=>c(`<span class="comment">&lt;!--${d(r)}--&gt;</span>`)).replace(y.autoLink,(e,r)=>c(`<span class="md-syntax">&lt;</span><a href="${d(r)}" target="_blank" rel="noopener noreferrer">${d(r)}</a><span class="md-syntax">&gt;</span>`)).replace(y.autoEmail,(e,r)=>c(`<span class="md-syntax">&lt;</span><a href="mailto:${d(r)}">${d(r)}</a><span class="md-syntax">&gt;</span>`)).replace(y.htmlTag,e=>c(`<code class="md-syntax">${d(e)}</code>`)).replace(y.image,(e,r,f)=>c(`<span class="md-syntax">![</span>${d(r)}<span class="md-syntax">](</span><a href="${d(f)}" target="_blank" rel="noopener noreferrer">${d(f)}</a><span class="md-syntax">)</span>`)).replace(y.link,(e,r,f)=>c('<span class="md-syntax">[</span>')+r+c(`<span class="md-syntax">](</span><a href="${d(f)}" target="_blank" rel="noopener noreferrer">${d(f)}</a><span class="md-syntax">)</span>`)).replace(y.refImage,(e,r,f)=>{const p=(f||r).toLowerCase(),m=A[p];return m?c(`<span class="md-syntax">![</span>${d(r)}<span class="md-syntax">][</span><a href="${d(m.url)}" target="_blank" rel="noopener noreferrer">${d(f)}</a><span class="md-syntax">]</span>`):e}).replace(y.refLink,(e,r,f)=>{const p=(f||r).toLowerCase(),m=A[p];return m?c('<span class="md-syntax">[</span>')+r+c(`<span class="md-syntax">][</span><a href="${d(m.url)}" target="_blank" rel="noopener noreferrer">${d(f)}</a><span class="md-syntax">]</span>`):e}).replace(y.footnoteRef,(e,r)=>c('<span class="md-syntax">[^</span>')+r+c('<span class="md-syntax">]</span>')),n=d(n);const a=e=>`<span class="md-syntax">${e}</span>`;return n=n.replace(y.boldItalic,(e,r)=>c(`<b><em>${a("***")}`)+r+c(`${a("***")}</em></b>`)).replace(y.bold,(e,r)=>`<b>${a("**")}${r}${a("**")}</b>`).replace(y.boldUnderscore,(e,r)=>`<b>${a("__")}${r}${a("__")}</b>`).replace(y.strikethrough,(e,r)=>`<s>${a("~~")}${r}${a("~~")}</s>`).replace(y.superscript,(e,r)=>`<sup>${a("^")}${r}${a("^")}</sup>`).replace(y.subscript,(e,r)=>`<sub>${a("~")}${r}${a("~")}</sub>`).replace(y.italicAsterisk,(e,r)=>`<em>${a("*")}${r}${a("*")}</em>`).replace(y.italicUnderscore,(e,r)=>`<em>${a("_")}${r}${a("_")}</em>`),n=n.replace(/\uE000PROTECTED(\d+)\uE001/g,(e,r)=>i[parseInt(r,10)]),n}function Se(t){const n=t.match(/^(\s*)(>)(\s?)$/);if(!n)return d(t);const i=n[1],c=n[2],a=n[3];return i?`<span class="indent">${d(i)}</span><span class="md-syntax">${d(c)}</span>${a}`:`<span class="md-syntax">${d(c)}</span>${a}`}function Ee(t){return/^<\w+[^>]*\sclass="[^"]*bq/.test(t)?t:/^<\w+[^>]*\sclass="/.test(t)?t.replace(/^(<\w+[^>]*\sclass="[^"]*)(")/,"$1 bq$2"):t.replace(/^(<\w+)/,'$1 class="bq"')}function Le(t,n){const c=t.split(`
`).map((a,e)=>{const r=n[e];if(!r)return a;const f=Se(r),p=a.match(/^(<(?:pre|code|div|h[1-6])[^>]*>)*/),m=p?p[0].length:0,w=a.replace(/<br>/g,"");return w.slice(0,m)+f+w.slice(m)}).join(`
`);return Ee(c)}function U(t){if(t.blockquote){const n={type:t.type,text:t.innerText},i=U(n),c=Array.isArray(i)?i:[i];let a=0;const e=[];for(const r of c){const f=(r.match(/\n/g)||[]).length+1,p=t.prefixes.slice(a,a+f);e.push(Le(r,p)),a+=f}return e.length===1?e[0]:e}switch(t.type){case"metadata":{const n=t.text.split(`
`),i=`<span class="md-syntax">${d(n[0])}</span>`,c=`<span class="md-syntax">${d(n[n.length-1])}</span>`,a=n.slice(1,-1);return a.length>0?`<pre><code>${i}
${a.map(e=>d(e)).join(`
`)}
${c}</code></pre>`:`<pre><code>${i}
${c}</code></pre>`}case"code":{const n=t.text.match(/^(```[^\n]*)\n([\s\S]*?)\n(\s*```)$/);return n?`<pre><code><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code>${d(t.text)}</code></pre>`}case"indented-code":return`<pre><code>${d(t.text)}</code></pre>`;case"table":return`<pre><code>${t.text.split(`
`).map((c,a)=>{const e=d(c);return a===1?`<span class="md-syntax">${e}</span>`:e.replace(/\|/g,'<span class="md-syntax">|</span>')}).join(`
`)}</code></pre>`;case"math":{const n=t.text.match(/^(\$\$)\n([\s\S]*?)\n(\s*\$\$)$/);return n?`<pre><code class="math"><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code class="math">${d(t.text)}</code></pre>`}case"heading":{const n=t.text.match(/^(#{1,6}[ \t]+)(.*)/),i=n[1].trim().length;return`<h${i}><span class="md-syntax">${d(n[1])}</span>${S(n[2])}</h${i}>`}case"setext":{const n=t.text.indexOf(`
`),i=t.text.slice(0,n),c=t.text.slice(n+1),a=c.trimStart()[0]==="="?1:2;return`<h${a}>${S(i)}
<span class="md-rule md-syntax">${d(c)}</span></h${a}>`}case"hr":return`<div class="md-rule md-syntax">${d(t.text)}</div>`;case"line":{if(t.text==="")return'<div class="line"><br></div>';const n=t.text.match(/^(\*\[)([^\]]+)(\]:\s)(.*)/);if(n)return`<div class="line"><span class="md-syntax">${d(n[1])}</span>${d(n[2])}<span class="md-syntax">${d(n[3])}</span>${S(n[4])}</div>`;const i=t.text.match(/^(\[\^)([^\]]+)(\]:\s)(.*)/);if(i)return`<div class="line"><span class="md-syntax">${d(i[1])}</span>${d(i[2])}<span class="md-syntax">${d(i[3])}</span>${S(i[4])}</div>`;const c=t.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(c){const p=c[1],m=c[2],w=c[3]||"";return`<div class="line"><span class="md-syntax">${d(p)}</span><a href="${d(m)}" target="_blank" rel="noopener noreferrer">${d(m)}</a><span class="md-syntax">${d(w)}</span></div>`}const a=t.text.match(/^(\s*)([*\-+] )/);if(a){const p=a[1],m=a[2],w=t.text.slice(p.length+m.length),T=p?`<span class="indent">${d(p)}</span>`:"",x=w.match(/^(\[[ xX]\] )/);if(x){const $=x[1],b=w.slice($.length),_=$[1]!==" "?`<span class="task-done">${S(b)}</span>`:S(b);return`<div class="line list-line"><span class="list-marker">${T}<span class="md-syntax md-bullet">${d(m)}</span><span class="md-checkbox">${d($)}</span></span><span class="list-content">${_}</span></div>`}return`<div class="line list-line"><span class="list-marker">${T}<span class="md-syntax md-bullet">${d(m)}</span></span><span class="list-content">${S(w)}</span></div>`}const e=t.text.match(/^(\s*)(\d+\. )/);if(e){const p=e[1],m=e[2],w=t.text.slice(p.length+m.length);return`<div class="line list-line"><span class="list-marker">${p?`<span class="indent">${d(p)}</span>`:""}<span class="md-syntax">${d(m)}</span></span><span class="list-content">${S(w)}</span></div>`}const r=t.text.match(/^(: )/);if(r){const p=r[1],m=t.text.slice(p.length);return`<div class="line list-line"><span class="list-marker"><span class="md-syntax">${d(p)}</span></span><span class="list-content">${S(m)}</span></div>`}const f=t.text.match(/^(\s+)/);if(f){const p=f[1],m=t.text.slice(p.length);return`<div class="line"><span class="indent">${d(p)}</span>${S(m)}</div>`}return`<div class="line">${S(t.text)}</div>`}}}function _e(t){return A=Ce(t),q(t).flatMap(i=>{const c=U(i);return Array.isArray(c)?c:[c]}).join("")}function Ne(t,n){document.addEventListener("keydown",i=>{if((i.metaKey||i.ctrlKey)&&i.key==="s"){i.preventDefault();const c=i.metaKey?"⌘S":"Ctrl+S";X(n,c)}})}function X(t,n){try{const c={content:t()},a=JSON.stringify(c),e=ce(a).then(f=>{const p=`${window.location.origin}${window.location.pathname}?#doc=${f}`;return new Blob([p],{type:"text/plain"})}),r=new ClipboardItem({"text/plain":e});navigator.clipboard.write([r]).then(()=>{Oe(n,"Link copied!")})}catch(i){console.error("Failed to copy link to clipboard:",i)}}function Oe(t,n){const i=document.querySelector(".signal-overlay");i&&i.remove();const c=document.createElement("div");c.className="signal-overlay";const a=document.createElement("div");if(a.className="signal",t){const r=document.createElement("span");r.className="signal-keys",r.textContent=t,a.appendChild(r)}const e=document.createElement("span");e.className="signal-message",e.textContent=n,a.appendChild(e),c.appendChild(a),document.body.appendChild(c),c.addEventListener("animationend",r=>{r.target===c&&c.remove()})}const De=3e3;function Me(t,n){if(!("ontouchstart"in window))return;const i=Pe();document.body.appendChild(i);let c;t.addEventListener("touchstart",()=>{i.classList.add("visible"),clearTimeout(c),c=setTimeout(()=>{i.classList.remove("visible")},De)},{passive:!0}),i.addEventListener("click",a=>{a.preventDefault(),X(n)})}function Pe(){const t=document.createElement("button");return t.type="button",t.className="share-button",t.setAttribute("aria-label","Copy shareable link"),t.innerHTML=`<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
  <polyline points="16 6 12 2 8 6"/>
  <line x1="12" y1="2" x2="12" y2="15"/>
</svg>`,t}const z=()=>document.body.classList.add("fonts-loaded");document.fonts.ready.then(z);setTimeout(z,2e3);document.addEventListener("DOMContentLoaded",async()=>{const t=document.querySelector(".paper");Ae();const n=window.location.hash.startsWith("#doc="),i=await le(),c=n?0:ue(),a=ke(t,i,_e,de,{initialCaretPosition:c,onCaretChange:fe});Ne(t,a.getText),Me(t,a.getText),t.focus(),Ie(2e3)});function Ae(){const t=document.querySelector(".logo");t?.addEventListener("animationend",()=>t.remove(),{once:!0})}function Ie(t){let n;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(n),n=setTimeout(()=>{document.body.classList.add("hide-cursor")},t)},{passive:!0}),document.body.classList.add("hide-cursor")}
