(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function l(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(e){if(e.ep)return;e.ep=!0;const s=l(e);fetch(e.href,s)}})();async function q(o){if(o.length===0)return"";const i=await M(o),l=Array.from(i,c=>String.fromCodePoint(c)).join("");return btoa(l)}async function I(o){if(o.length===0)return"";const i=atob(o),l=Uint8Array.from(i,c=>c.charCodeAt(0));return await H(l)}async function M(o){const i=new Blob([o]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(i).arrayBuffer())}async function H(o){const i=new Blob([o]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(i).text()}async function J(){const o=(await Z()??V())?.content||"";return j(),o}function Q(o){const i={content:o};localStorage.setItem("editorState",JSON.stringify(i))}function j(){window.history.replaceState(null,"",window.location.pathname)}async function Z(){const o=window.location.hash,i="#doc=";try{if(o.startsWith(i)){const l=await I(o.substring(i.length));return JSON.parse(l)}return null}catch(l){return console.error("Error parsing URL state:",l.message),console.error("The URL appears to be truncated or corrupted."),null}}function V(){const o=localStorage.getItem("editorState");if(!o)return null;try{return JSON.parse(o)}catch(i){return console.error("Error parsing saved state",i),null}}function X(o,i,l,c){let e=i;const s=[],d=[];let h=0,E="",L=!1;function w(n){o.innerHTML=l(n)}function b(n,t,r){try{const u=document.createRange();return u.setStart(n,0),u.setEnd(t,r),u.toString().length}catch{return 0}}function k(){const n=window.getSelection();return n.rangeCount?b(o,n.focusNode,n.focusOffset):0}function S(){const n=window.getSelection();if(!n.rangeCount)return{start:0,end:0};const t=b(o,n.anchorNode,n.anchorOffset),r=b(o,n.focusNode,n.focusOffset);return{start:Math.min(t,r),end:Math.max(t,r)}}function C(n){const t=window.getSelection(),r=document.createTreeWalker(o,NodeFilter.SHOW_TEXT);let u=n;for(;r.nextNode();){const y=r.currentNode.textContent.length;if(u<=y){t.collapse(r.currentNode,u);return}u-=y}const a=r.currentNode;a&&a!==o?t.collapse(a,a.textContent?.length||0):t.collapse(o,o.childNodes.length)}function v(){const n=window.getSelection();if(!n.rangeCount)return;const t=n.getRangeAt(0).getBoundingClientRect();if(!t||t.height===0)return;const r=o.getBoundingClientRect(),u=40;t.bottom>r.bottom-u?o.scrollBy({top:t.bottom-r.bottom+u,behavior:"smooth"}):t.top<r.top+u&&o.scrollBy({top:t.top-r.top-u,behavior:"smooth"})}function f(n,t){const r=Date.now();if(n===E&&r-h<500&&s.length>0){h=r;return}s.push({text:e,offset:t}),d.length=0,h=r,E=n}function O(){if(s.length===0)return;d.push({text:e,offset:k()});const n=s.pop();e=n.text,w(e),C(n.offset),v(),c(e)}function $(){if(d.length===0)return;s.push({text:e,offset:k()});const n=d.pop();e=n.text,w(e),C(n.offset),v(),c(e)}function B(n){if(n===0)return 0;let t=n;for(;t>0&&/\s/.test(e[t-1]);)t--;for(;t>0&&!/\s/.test(e[t-1]);)t--;return t}function _(n){const t=e.length;if(n>=t)return t;let r=n;for(;r<t&&!/\s/.test(e[r]);)r++;for(;r<t&&/\s/.test(e[r]);)r++;return r}function D(n){if(n===0)return 0;let t=n;for(;t>0&&e[t-1]!==`
`;)t--;return t}function N(n){const t=e.length;if(n>=t)return t;let r=n;for(;r<t&&e[r]!==`
`;)r++;return r}function p(n){w(e),C(n),v(),c(e)}function R(n){if(L||n.inputType==="insertCompositionText"||(n.preventDefault(),n.inputType==="insertFromPaste"||n.inputType==="deleteByCut"))return;const{start:t,end:r}=S(),u=t!==r;switch(n.inputType){case"insertText":{const a=n.data||"";f("insertText",t),e=e.slice(0,t)+a+e.slice(r),p(t+a.length);break}case"insertParagraph":case"insertLineBreak":{f("insertLine",t),e=e.slice(0,t)+`
`+e.slice(r),p(t+1);break}case"deleteContentBackward":{u?(f("delete",t),e=e.slice(0,t)+e.slice(r),p(t)):t>0&&(f("delete",t),e=e.slice(0,t-1)+e.slice(t),p(t-1));break}case"deleteContentForward":{u?(f("delete",t),e=e.slice(0,t)+e.slice(r),p(t)):t<e.length&&(f("delete",t),e=e.slice(0,t)+e.slice(t+1),p(t));break}case"deleteWordBackward":{if(u)f("deleteWord",t),e=e.slice(0,t)+e.slice(r),p(t);else{const a=B(t);a<t&&(f("deleteWord",t),e=e.slice(0,a)+e.slice(t),p(a))}break}case"deleteWordForward":{if(u)f("deleteWord",t),e=e.slice(0,t)+e.slice(r),p(t);else{const a=_(t);a>t&&(f("deleteWord",t),e=e.slice(0,t)+e.slice(a),p(t))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(u)f("deleteLine",t),e=e.slice(0,t)+e.slice(r),p(t);else{const a=D(t);a<t&&(f("deleteLine",t),e=e.slice(0,a)+e.slice(t),p(a))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(u)f("deleteLine",t),e=e.slice(0,t)+e.slice(r),p(t);else{const a=N(t);a>t&&(f("deleteLine",t),e=e.slice(0,t)+e.slice(a),p(t))}break}case"historyUndo":{O();break}case"historyRedo":{$();break}case"insertReplacementText":{const a=n.getTargetRanges();if(a.length>0){const y=a[0],T=b(o,y.startContainer,y.startOffset),W=b(o,y.endContainer,y.endOffset),x=n.dataTransfer?.getData("text/plain")||n.data||"";f("replace",T),e=e.slice(0,T)+x+e.slice(W),p(T+x.length)}break}}}function A(){L=!0}function P(){L=!1;const n=k();e=o.textContent||"",w(e),C(n),c(e)}function U(n){n.preventDefault();const{start:t,end:r}=S();t!==r&&n.clipboardData.setData("text/plain",e.slice(t,r))}function K(n){n.preventDefault();const{start:t,end:r}=S();t!==r&&(n.clipboardData.setData("text/plain",e.slice(t,r)),f("cut",t),e=e.slice(0,t)+e.slice(r),p(t))}function F(n){n.preventDefault();const t=n.clipboardData.getData("text/plain");if(!t)return;const{start:r,end:u}=S();f("paste",r),e=e.slice(0,r)+t+e.slice(u),p(r+t.length)}function z(n){(n.metaKey||n.ctrlKey)&&n.key==="z"&&(n.preventDefault(),n.shiftKey?$():O())}return o.addEventListener("keydown",z),o.addEventListener("beforeinput",R),o.addEventListener("compositionstart",A),o.addEventListener("compositionend",P),o.addEventListener("copy",U),o.addEventListener("cut",K),o.addEventListener("paste",F),w(e),{getText:()=>e}}const g={metadata:/^---[ \t]*\n([\s\S]*?)\n?[ \t]*---/,codeBlock:/```([^\s`]*?)[ \t]*\n([\s\S]*?)\n[ \t]*```/g,table:/^\|[^\n]*\|[ \t]*\n\|(?:[ \t]*:?-+:?[ \t]*\|)+[ \t]*(?:\n\|[^\n]*\|[ \t]*)*/gm,heading:/^(#{1,6})[ \t]+(.+)$/gm,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),comment:/<!--([\s\S]*?)-->/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,horizontalRule:/^[ \t]*(---+|\*\*\*+|___+)[ \t]*$/gm,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,blockquote:/^>(?:[ \t].*)?(?=\n)/gm,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g};function m(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function G(o){let i=o;const l=[],c=e=>{const s=`PROTECTED${l.length}`;return l.push(e),s};return i=i.replace(g.metadata,e=>c(`<pre><code>${m(e)}</code></pre>`)).replace(g.codeBlock,e=>c(`<pre><code>${m(e)}</code></pre>`)).replace(g.table,e=>{const s=e.split(`
`),d=h=>h.split("|").length-1;return d(s[0])!==d(s[1])?e:c(`<pre><code>${m(e)}</code></pre>`)}).replace(g.inlineCode,(e,s)=>c(`<code>\`${m(s)}\`</code>`)).replace(g.inlineCode,(e,s)=>c(()=>`<code>\`${m(s)}\`</code>`)).replace(g.comment,(e,s)=>c(`<span class="comment">&lt;!--${m(s)}--&gt;</span>`)).replace(g.htmlTag,e=>c(`<span class="html-tag">${m(e)}</span>`)).replace(g.blockquote,e=>`BLOCKQUOTE${e.slice(1)}`).replace(g.image,(e,s,d)=>c(`<a href="${m(d)}" target="_blank" rel="noopener noreferrer">![${m(s)}](${m(d)})</a>`)).replace(g.link,(e,s,d)=>c(`<a href="${m(d)}" target="_blank" rel="noopener noreferrer">[${m(s)}](${m(d)})</a>`)),i=m(i),i=i.replace(g.horizontalRule,e=>`<span class="hr">${e}</span>`).replace(g.heading,(e,s)=>`<h${s.length}>${e}</h${s.length}>`).replace(g.bold,(e,s)=>`<b>**${s}**</b>`).replace(g.strikethrough,(e,s)=>`<s>~~${s}~~</s>`).replace(g.italicAsterisk,(e,s)=>`<em>*${s}*</em>`).replace(g.italicUnderscore,(e,s)=>`<em>_${s}_</em>`).replace(/(\uE002BLOCKQUOTE\uE003.*(?:\n\uE002BLOCKQUOTE\uE003.*)*)/g,e=>`<blockquote>${e.replace(/\uE002BLOCKQUOTE\uE003/g,"&gt;")}</blockquote>`).replace(/\uE000PROTECTED(\d+)\uE001/g,(e,s)=>l[parseInt(s,10)]),i}function Y(o,i){const l=document.querySelector(".signal-overlay");l&&l.remove();const c=document.createElement("div");c.className="signal-overlay";const e=document.createElement("div");e.className="signal";const s=document.createElement("span");s.className="signal-keys",s.textContent=o;const d=document.createElement("span");d.className="signal-message",d.textContent=i,e.appendChild(s),e.appendChild(d),c.appendChild(e),document.body.appendChild(c),c.addEventListener("animationend",h=>{h.target===c&&c.remove()})}function ee(o){document.addEventListener("keydown",i=>{if((i.metaKey||i.ctrlKey)&&i.key==="s"){i.preventDefault();const l=i.metaKey?"⌘S":"Ctrl+S";te(o,l)}})}function te(o,i){try{const c={content:o.textContent},e=JSON.stringify(c),s=q(e).then(h=>{const E=`${window.location.origin}${window.location.pathname}?#doc=${h}`;return new Blob([E],{type:"text/plain"})}),d=new ClipboardItem({"text/plain":s});navigator.clipboard.write([d]).then(()=>{Y(i,"Link copied!")})}catch(l){console.error("Failed to copy link to clipboard:",l)}}document.addEventListener("DOMContentLoaded",async()=>{const o=document.querySelector(".paper");ne();const i=await J();X(o,i,G,Q),ee(o),o.focus(),oe(2e3)});function ne(){const o=document.querySelector(".logo");o?.addEventListener("animationend",()=>o.remove(),{once:!0})}function oe(o){let i;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(i),i=setTimeout(()=>{document.body.classList.add("hide-cursor")},o)},{passive:!0}),document.body.classList.add("hide-cursor")}
