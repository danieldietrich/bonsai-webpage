(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function l(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(e){if(e.ep)return;e.ep=!0;const r=l(e);fetch(e.href,r)}})();async function z(o){if(o.length===0)return"";const s=await X(o),l=Array.from(s,c=>String.fromCodePoint(c)).join("");return btoa(l)}async function J(o){if(o.length===0)return"";const s=atob(o),l=Uint8Array.from(s,c=>c.charCodeAt(0));return await Z(l)}async function X(o){const s=new Blob([o]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(s).arrayBuffer())}async function Z(o){const s=new Blob([o]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(s).text()}async function V(){const o=(await Y()??ee())?.content||"";return Q(),o}function G(o){const s={content:o};localStorage.setItem("editorState",JSON.stringify(s))}function Q(){window.history.replaceState(null,"",window.location.pathname)}async function Y(){const o=window.location.hash,s="#doc=";try{if(o.startsWith(s)){const l=await J(o.substring(s.length));return JSON.parse(l)}return null}catch(l){return console.error("Error parsing URL state:",l.message),console.error("The URL appears to be truncated or corrupted."),null}}function ee(){const o=localStorage.getItem("editorState");if(!o)return null;try{return JSON.parse(o)}catch(s){return console.error("Error parsing saved state",s),null}}function te(o,s,l,c){let e=s;const r=[],a=[];let g=0,m="",k=!1;function T(n){o.innerHTML=l(n)}function E(n,t,i){if(t===n){let f=0;const b=Math.min(i,n.childNodes.length);for(let y=0;y<b;y++)f+=n.childNodes[y].textContent.length,y<n.childNodes.length-1&&(f+=1);return f}let d=t;for(;d&&d.parentNode!==n;)d=d.parentNode;if(!d)return 0;let u=0;for(let f=n.firstChild;f&&f!==d;f=f.nextSibling)u+=f.textContent.length+1;try{const f=document.createRange();f.setStart(d,0),f.setEnd(t,i),u+=f.toString().length}catch{}return u}function $(){const n=window.getSelection();return n.rangeCount?E(o,n.focusNode,n.focusOffset):0}function L(){const n=window.getSelection();if(!n.rangeCount)return{start:0,end:0};const t=E(o,n.anchorNode,n.anchorOffset),i=E(o,n.focusNode,n.focusOffset);return{start:Math.min(t,i),end:Math.max(t,i)}}function N(n){const t=window.getSelection(),i=Array.from(o.children);if(i.length===0){t.collapse(o,0);return}let d=n;for(let y=0;y<i.length;y++){const x=i[y],A=x.textContent.length;if(d<=A){const C=document.createTreeWalker(x,NodeFilter.SHOW_TEXT);for(;C.nextNode();){const v=C.currentNode.textContent.length;if(d<=v){t.collapse(C.currentNode,d);return}d-=v}t.collapse(x,0);return}if(d-=A,y<i.length-1){if(d===0){const C=document.createTreeWalker(x,NodeFilter.SHOW_TEXT);let v=null;for(;C.nextNode();)v=C.currentNode;v?t.collapse(v,v.textContent.length):t.collapse(x,x.childNodes.length);return}d-=1}}const u=i[i.length-1],f=document.createTreeWalker(u,NodeFilter.SHOW_TEXT);let b=null;for(;f.nextNode();)b=f.currentNode;b?t.collapse(b,b.textContent.length):t.collapse(u,u.childNodes.length)}function O(){const n=window.getSelection();if(!n.rangeCount)return;const t=n.getRangeAt(0).getBoundingClientRect();if(!t||t.height===0)return;const i=40,d=window.innerHeight;t.bottom>d-i?window.scrollBy({top:t.bottom-d+i,behavior:"smooth"}):t.top<i&&window.scrollBy({top:t.top-i,behavior:"smooth"})}function h(n,t){const i=Date.now();if(n===m&&i-g<500&&r.length>0){g=i;return}r.push({text:e,offset:t}),a.length=0,g=i,m=n}function D(){if(r.length===0)return;a.push({text:e,offset:$()});const n=r.pop();e=n.text,T(e),N(n.offset),O(),c(e)}function B(){if(a.length===0)return;r.push({text:e,offset:$()});const n=a.pop();e=n.text,T(e),N(n.offset),O(),c(e)}function P(n){if(n===0)return 0;let t=n;for(;t>0&&/\s/.test(e[t-1]);)t--;for(;t>0&&!/\s/.test(e[t-1]);)t--;return t}function j(n){const t=e.length;if(n>=t)return t;let i=n;for(;i<t&&!/\s/.test(e[i]);)i++;for(;i<t&&/\s/.test(e[i]);)i++;return i}function F(n){if(n===0)return 0;let t=n;for(;t>0&&e[t-1]!==`
`;)t--;return t}function R(n){const t=e.length;if(n>=t)return t;let i=n;for(;i<t&&e[i]!==`
`;)i++;return i}function p(n){T(e),N(n),O(),c(e)}function W(n){if(k||n.inputType==="insertCompositionText"||(n.preventDefault(),n.inputType==="insertFromPaste"||n.inputType==="deleteByCut"))return;const{start:t,end:i}=L(),d=t!==i;switch(n.inputType){case"insertText":{const u=n.data||"";h("insertText",t),e=e.slice(0,t)+u+e.slice(i),p(t+u.length);break}case"insertParagraph":case"insertLineBreak":{h("insertLine",t),e=e.slice(0,t)+`
`+e.slice(i),p(t+1);break}case"deleteContentBackward":{d?(h("delete",t),e=e.slice(0,t)+e.slice(i),p(t)):t>0&&(h("delete",t),e=e.slice(0,t-1)+e.slice(t),p(t-1));break}case"deleteContentForward":{d?(h("delete",t),e=e.slice(0,t)+e.slice(i),p(t)):t<e.length&&(h("delete",t),e=e.slice(0,t)+e.slice(t+1),p(t));break}case"deleteWordBackward":{if(d)h("deleteWord",t),e=e.slice(0,t)+e.slice(i),p(t);else{const u=P(t);u<t&&(h("deleteWord",t),e=e.slice(0,u)+e.slice(t),p(u))}break}case"deleteWordForward":{if(d)h("deleteWord",t),e=e.slice(0,t)+e.slice(i),p(t);else{const u=j(t);u>t&&(h("deleteWord",t),e=e.slice(0,t)+e.slice(u),p(t))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(d)h("deleteLine",t),e=e.slice(0,t)+e.slice(i),p(t);else{const u=F(t);u<t&&(h("deleteLine",t),e=e.slice(0,u)+e.slice(t),p(u))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(d)h("deleteLine",t),e=e.slice(0,t)+e.slice(i),p(t);else{const u=R(t);u>t&&(h("deleteLine",t),e=e.slice(0,t)+e.slice(u),p(t))}break}case"historyUndo":{D();break}case"historyRedo":{B();break}case"insertReplacementText":{const u=n.getTargetRanges();if(u.length>0){const f=u[0],b=E(o,f.startContainer,f.startOffset),y=E(o,f.endContainer,f.endOffset),x=n.dataTransfer?.getData("text/plain")||n.data||"";h("replace",b),e=e.slice(0,b)+x+e.slice(y),p(b+x.length)}break}}}function U(){k=!0}function I(){k=!1;const n=$();e=Array.from(o.children).map(t=>t.textContent).join(`
`),T(e),N(n),c(e)}function M(n){n.preventDefault();const{start:t,end:i}=L();t!==i&&n.clipboardData.setData("text/plain",e.slice(t,i))}function q(n){n.preventDefault();const{start:t,end:i}=L();t!==i&&(n.clipboardData.setData("text/plain",e.slice(t,i)),h("cut",t),e=e.slice(0,t)+e.slice(i),p(t))}function H(n){n.preventDefault();const t=n.clipboardData.getData("text/plain");if(!t)return;const{start:i,end:d}=L();h("paste",i),e=e.slice(0,i)+t+e.slice(d),p(i+t.length)}function K(n){(n.metaKey||n.ctrlKey)&&n.key==="z"&&(n.preventDefault(),n.shiftKey?B():D())}return o.addEventListener("keydown",K),o.addEventListener("beforeinput",W),o.addEventListener("compositionstart",U),o.addEventListener("compositionend",I),o.addEventListener("copy",M),o.addEventListener("cut",q),o.addEventListener("paste",H),T(e),{getText:()=>e}}const S={inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),comment:/<!--([\s\S]*?)-->/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g};function w(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ne(o){const s=o.split(`
`),l=[];let c=0,e=0;if(s[0].match(/^---\s*$/)&&s.length>1){for(let r=1;r<s.length;r++)if(s[r].match(/^\s*---\s*$/)){const a=s.slice(0,r+1).join(`
`);l.push({type:"metadata",text:a,offset:0}),c=a.length+1,e=r+1;break}}for(;e<s.length;){const r=s[e];if(r.match(/^```/)){let a=e+1;for(;a<s.length&&!s[a].match(/^\s*```/);)a++;if(a<s.length){const g=s.slice(e,a+1).join(`
`);l.push({type:"code",text:g,offset:c}),c+=g.length+1,e=a+1;continue}}if(r.match(/^\|.*\|\s*$/)&&e+1<s.length){const a=s[e+1];if(a.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const g=m=>m.split("|").length-1;if(g(r)===g(a)){let m=e+2;for(;m<s.length&&s[m].match(/^\|.*\|\s*$/);)m++;const k=s.slice(e,m).join(`
`);l.push({type:"table",text:k,offset:c}),c+=k.length+1,e=m;continue}}}if(r.match(/^>(?:\s|$)/)){let a=e+1;for(;a<s.length&&s[a].match(/^>(?:\s|$)/);)a++;const g=s.slice(e,a).join(`
`);l.push({type:"blockquote",text:g,offset:c}),c+=g.length+1,e=a;continue}if(r.match(/^#{1,6}[ \t]+.+$/)){l.push({type:"heading",text:r,offset:c}),c+=r.length+1,e++;continue}if(r.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){l.push({type:"hr",text:r,offset:c}),c+=r.length+1,e++;continue}l.push({type:"line",text:r,offset:c}),c+=r.length+1,e++}return l}function _(o){let s=o;const l=[],c=e=>{const r=`PROTECTED${l.length}`;return l.push(e),r};return s=s.replace(S.inlineCode,(e,r)=>c(`<code>\`${w(r)}\`</code>`)).replace(S.comment,(e,r)=>c(`<span class="comment">&lt;!--${w(r)}--&gt;</span>`)).replace(S.htmlTag,e=>c(`<span class="html-tag">${w(e)}</span>`)).replace(S.image,(e,r,a)=>c(`<span class="md-syntax">![</span>${w(r)}<span class="md-syntax">](</span><a href="${w(a)}" target="_blank" rel="noopener noreferrer">${w(a)}</a><span class="md-syntax">)</span>`)).replace(S.link,(e,r,a)=>c('<span class="md-syntax">[</span>')+r+c(`<span class="md-syntax">](</span><a href="${w(a)}" target="_blank" rel="noopener noreferrer">${w(a)}</a><span class="md-syntax">)</span>`)),s=w(s),s=s.replace(S.bold,(e,r)=>`<b>**${r}**</b>`).replace(S.strikethrough,(e,r)=>`<s>~~${r}~~</s>`).replace(S.italicAsterisk,(e,r)=>`<em>*${r}*</em>`).replace(S.italicUnderscore,(e,r)=>`<em>_${r}_</em>`),s=s.replace(/\uE000PROTECTED(\d+)\uE001/g,(e,r)=>l[parseInt(r,10)]),s}function oe(o){switch(o.type){case"metadata":case"code":case"table":return`<pre><code>${w(o.text)}</code></pre>`;case"heading":{const s=o.text.match(/^(#{1,6})/)[1].length;return`<h${s}>${_(o.text)}</h${s}>`}case"blockquote":return`<blockquote>${_(o.text)}</blockquote>`;case"hr":return`<div class="hr">${w(o.text)}</div>`;case"line":return o.text===""?'<div class="line"><br></div>':`<div class="line">${_(o.text)}</div>`}}function se(o){return ne(o).map(oe).join("")}function re(o,s){const l=document.querySelector(".signal-overlay");l&&l.remove();const c=document.createElement("div");c.className="signal-overlay";const e=document.createElement("div");e.className="signal";const r=document.createElement("span");r.className="signal-keys",r.textContent=o;const a=document.createElement("span");a.className="signal-message",a.textContent=s,e.appendChild(r),e.appendChild(a),c.appendChild(e),document.body.appendChild(c),c.addEventListener("animationend",g=>{g.target===c&&c.remove()})}function ie(o,s){document.addEventListener("keydown",l=>{if((l.metaKey||l.ctrlKey)&&l.key==="s"){l.preventDefault();const c=l.metaKey?"⌘S":"Ctrl+S";ce(s,c)}})}function ce(o,s){try{const c={content:o()},e=JSON.stringify(c),r=z(e).then(g=>{const m=`${window.location.origin}${window.location.pathname}?#doc=${g}`;return new Blob([m],{type:"text/plain"})}),a=new ClipboardItem({"text/plain":r});navigator.clipboard.write([a]).then(()=>{re(s,"Link copied!")})}catch(l){console.error("Failed to copy link to clipboard:",l)}}document.addEventListener("DOMContentLoaded",async()=>{const o=document.querySelector(".paper");ae();const s=await V(),l=te(o,s,se,G);ie(o,l.getText),o.focus(),le(2e3)});function ae(){const o=document.querySelector(".logo");o?.addEventListener("animationend",()=>o.remove(),{once:!0})}function le(o){let s;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(s),s=setTimeout(()=>{document.body.classList.add("hide-cursor")},o)},{passive:!0}),document.body.classList.add("hide-cursor")}
