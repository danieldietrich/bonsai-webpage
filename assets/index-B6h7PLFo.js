(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function c(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=c(n);fetch(n.href,r)}})();function m(t,e){t.addEventListener("copy",c=>{c.preventDefault();const o=window.getSelection();let n="";if(o.rangeCount>0){const r=o.getRangeAt(0),i=document.createElement("div");i.appendChild(r.cloneContents()),n=d(i)}c.clipboardData.setData("text/plain",n)}),t.addEventListener("cut",c=>{c.preventDefault();const o=window.getSelection();let n="";if(o.rangeCount>0){const r=o.getRangeAt(0),i=document.createElement("div");i.appendChild(r.cloneContents()),n=d(i),c.clipboardData.setData("text/plain",n),r.deleteContents(),e&&e()}}),t.addEventListener("paste",c=>{c.preventDefault();const o=c.clipboardData.getData("text/plain"),n=window.getSelection();if(!n.rangeCount)return;const r=n.getRangeAt(0);r.deleteContents();const i=document.createTextNode(o);r.insertNode(i),r.setStartAfter(i),r.collapse(!0),n.removeAllRanges(),n.addRange(r),f(r),e&&e()})}function f(t){const e=document.createElement("span");e.appendChild(document.createTextNode("​")),t.insertNode(e),e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),e.parentNode.removeChild(e)}function d(t){let e="";const c=t.childNodes;for(let o=0;o<c.length;o++){const n=c[o];n.nodeType===Node.TEXT_NODE?e+=n.textContent:n.nodeType===Node.ELEMENT_NODE&&(o>0&&n.nodeName==="DIV"&&(e+=`
`),e+=d(n))}return e}const l=8192;function p(t){if(t.length===0)return"";const e=new TextEncoder,c=[];for(let o=0;o<t.length;o+=l){const n=t.slice(o,o+l),r=e.encode(n),i=String.fromCharCode(...r);c.push(btoa(i))}return c.join("")}function g(t){if(t.length===0)return"";const e=new TextDecoder,c=[],o=l-l%4;for(let n=0;n<t.length;n+=o){const r=t.slice(n,n+o),i=atob(r),s=new Uint8Array(i.length);for(let a=0;a<i.length;a++)s[a]=i.charCodeAt(a);c.push(e.decode(s,{stream:!0}))}return c.push(e.decode()),c.join("")}function h(t){let e=v();e?(t.innerHTML=e.content||"",localStorage.setItem("editorState",JSON.stringify(e))):(e=S(),e&&(t.innerHTML=e.content||"")),y(),t.addEventListener("input",()=>u(t))}function y(){window.history.replaceState(null,"",window.location.pathname)}function v(){const t=window.location.hash,e="#json=";if(!t.startsWith(e))return null;try{const c=t.substring(e.length),o=g(c);return JSON.parse(o)}catch(c){return console.error("Error parsing URL state:",c.message),console.error("The URL appears to be truncated or corrupted."),null}}function S(){const t=localStorage.getItem("editorState");if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Error parsing saved state",e),null}}function u(t){const e={content:t.innerHTML};localStorage.setItem("editorState",JSON.stringify(e))}function E(t,e){const c=document.querySelector(".signal-overlay");c&&c.remove();const o=document.createElement("div");o.className="signal-overlay";const n=document.createElement("div");n.className="signal";const r=document.createElement("span");r.className="signal-keys",r.textContent=t;const i=document.createElement("span");i.className="signal-message",i.textContent=e,n.appendChild(r),n.appendChild(i),o.appendChild(n),document.body.appendChild(o),o.addEventListener("animationend",s=>{s.target===o&&o.remove()})}function L(t){document.addEventListener("keydown",e=>{if((e.metaKey||e.ctrlKey)&&e.key==="s"){e.preventDefault();const c=e.metaKey?"⌘S":"Ctrl+S";b(t,c)}})}async function b(t,e){try{const o={content:t.textContent},n=JSON.stringify(o),r=p(n),i=`${window.location.origin}${window.location.pathname}?#json=${r}`;await navigator.clipboard.writeText(i),E(e,"Link copied!")}catch(c){console.error("Failed to copy link to clipboard:",c)}}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".paper");w(),h(t),m(t,()=>u(t)),L(t),t.focus(),C(2e3)});function w(){const t=document.querySelector(".logo");t?.addEventListener("animationend",()=>t.remove(),{once:!0})}function C(t){let e;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(e),e=setTimeout(()=>{document.body.classList.add("hide-cursor")},t)},{passive:!0}),document.body.classList.add("hide-cursor")}
