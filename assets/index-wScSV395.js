(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();async function W(o){if(o.length===0)return"";const c=await I(o),a=Array.from(c,t=>String.fromCodePoint(t)).join("");return btoa(a)}async function q(o){if(o.length===0)return"";const c=atob(o),a=Uint8Array.from(c,t=>t.charCodeAt(0));return await M(a)}async function I(o){const c=new Blob([o]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(c).arrayBuffer())}async function M(o){const c=new Blob([o]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(c).text()}async function H(){const o=(await j()??Z())?.content||"";return Q(),o}function J(o){const c={content:o};localStorage.setItem("editorState",JSON.stringify(c))}function Q(){window.history.replaceState(null,"",window.location.pathname)}async function j(){const o=window.location.hash,c="#doc=";try{if(o.startsWith(c)){const a=await q(o.substring(c.length));return JSON.parse(a)}return null}catch(a){return console.error("Error parsing URL state:",a.message),console.error("The URL appears to be truncated or corrupted."),null}}function Z(){const o=localStorage.getItem("editorState");if(!o)return null;try{return JSON.parse(o)}catch(c){return console.error("Error parsing saved state",c),null}}const g={metadata:/^---[ \t]*\n([\s\S]*?)\n?[ \t]*---/,codeBlock:/```([^\s`]*?)[ \t]*\n([\s\S]*?)\n[ \t]*```/g,table:/^\|[^\n]*\|[ \t]*\n\|(?:[ \t]*:?-+:?[ \t]*\|)+[ \t]*(?:\n\|[^\n]*\|[ \t]*)*/gm,heading:/^(#{1,6})[ \t]+(.+)$/gm,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),comment:/<!--([\s\S]*?)-->/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,horizontalRule:/^[ \t]*(---+|\*\*\*+|___+)[ \t]*$/gm,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,blockquote:/^>(?:[ \t].*)?(?=\n)/gm,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g};function m(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function V(o){let c=o;const a=[],t=r=>{const i=`PROTECTED${a.length}`;return a.push(r),i};return c=c.replace(g.metadata,r=>t(`<pre><code>${m(r)}</code></pre>`)).replace(g.codeBlock,r=>t(`<pre><code>${m(r)}</code></pre>`)).replace(g.table,r=>{const i=r.split(`
`),d=h=>h.split("|").length-1;return d(i[0])!==d(i[1])?r:t(`<pre><code>${m(r)}</code></pre>`)}).replace(g.inlineCode,(r,i)=>t(`<code>\`${m(i)}\`</code>`)).replace(g.inlineCode,(r,i)=>t(()=>`<code>\`${m(i)}\`</code>`)).replace(g.comment,(r,i)=>t(`<span class="comment">&lt;!--${m(i)}--&gt;</span>`)).replace(g.htmlTag,r=>t(`<span class="html-tag">${m(r)}</span>`)).replace(g.blockquote,r=>`BLOCKQUOTE${r.slice(1)}`).replace(g.image,(r,i,d)=>t(`<a href="${m(d)}" target="_blank" rel="noopener noreferrer">![${m(i)}](${m(d)})</a>`)).replace(g.link,(r,i,d)=>t(`<a href="${m(d)}" target="_blank" rel="noopener noreferrer">[${m(i)}](${m(d)})</a>`)),c=m(c),c=c.replace(g.horizontalRule,r=>`<span class="hr">${r}</span>`).replace(g.heading,(r,i)=>`<h${i.length}>${r}</h${i.length}>`).replace(g.bold,(r,i)=>`<b>**${i}**</b>`).replace(g.strikethrough,(r,i)=>`<s>~~${i}~~</s>`).replace(g.italicAsterisk,(r,i)=>`<em>*${i}*</em>`).replace(g.italicUnderscore,(r,i)=>`<em>_${i}_</em>`).replace(/(\uE002BLOCKQUOTE\uE003.*(?:\n\uE002BLOCKQUOTE\uE003.*)*)/g,r=>`<blockquote>${r.replace(/\uE002BLOCKQUOTE\uE003/g,"&gt;")}</blockquote>`).replace(/\uE000PROTECTED(\d+)\uE001/g,(r,i)=>a[parseInt(i,10)]),c}function X(o,c,a){let t=c;const r=[],i=[];let d=0,h="",w=!1;function b(n,e,s){try{const u=document.createRange();return u.setStart(n,0),u.setEnd(e,s),u.toString().length}catch{return 0}}function L(){const n=window.getSelection();return n.rangeCount?b(o,n.focusNode,n.focusOffset):0}function S(){const n=window.getSelection();if(!n.rangeCount)return{start:0,end:0};const e=b(o,n.anchorNode,n.anchorOffset),s=b(o,n.focusNode,n.focusOffset);return{start:Math.min(e,s),end:Math.max(e,s)}}function C(n){const e=window.getSelection(),s=document.createTreeWalker(o,NodeFilter.SHOW_TEXT);let u=n;for(;s.nextNode();){const y=s.currentNode.textContent.length;if(u<=y){e.collapse(s.currentNode,u);return}u-=y}const l=s.currentNode;l&&l!==o?e.collapse(l,l.textContent?.length||0):e.collapse(o,o.childNodes.length)}function k(){const n=window.getSelection();if(!n.rangeCount)return;const e=n.getRangeAt(0).getBoundingClientRect();if(!e||e.height===0)return;const s=o.getBoundingClientRect(),u=40;e.bottom>s.bottom-u?o.scrollBy({top:e.bottom-s.bottom+u,behavior:"smooth"}):e.top<s.top+u&&o.scrollBy({top:e.top-s.top-u,behavior:"smooth"})}function f(n,e){const s=Date.now();if(n===h&&s-d<500&&r.length>0){d=s;return}r.push({text:t,offset:e}),i.length=0,d=s,h=n}function T(){if(r.length===0)return;i.push({text:t,offset:L()});const n=r.pop();t=n.text,E(),C(n.offset),k(),a(t)}function O(){if(i.length===0)return;r.push({text:t,offset:L()});const n=i.pop();t=n.text,E(),C(n.offset),k(),a(t)}function x(n){if(n===0)return 0;let e=n;for(;e>0&&/\s/.test(t[e-1]);)e--;for(;e>0&&!/\s/.test(t[e-1]);)e--;return e}function B(n){const e=t.length;if(n>=e)return e;let s=n;for(;s<e&&!/\s/.test(t[s]);)s++;for(;s<e&&/\s/.test(t[s]);)s++;return s}function _(n){if(n===0)return 0;let e=n;for(;e>0&&t[e-1]!==`
`;)e--;return e}function N(n){const e=t.length;if(n>=e)return e;let s=n;for(;s<e&&t[s]!==`
`;)s++;return s}function E(){o.innerHTML=V(t)}function p(n){E(),C(n),k(),a(t)}function D(n){if(w||n.inputType==="insertCompositionText"||(n.preventDefault(),n.inputType==="insertFromPaste"||n.inputType==="deleteByCut"))return;const{start:e,end:s}=S(),u=e!==s;switch(n.inputType){case"insertText":{const l=n.data||"";f("insertText",e),t=t.slice(0,e)+l+t.slice(s),p(e+l.length);break}case"insertParagraph":case"insertLineBreak":{f("insertLine",e),t=t.slice(0,e)+`
`+t.slice(s),p(e+1);break}case"deleteContentBackward":{u?(f("delete",e),t=t.slice(0,e)+t.slice(s),p(e)):e>0&&(f("delete",e),t=t.slice(0,e-1)+t.slice(e),p(e-1));break}case"deleteContentForward":{u?(f("delete",e),t=t.slice(0,e)+t.slice(s),p(e)):e<t.length&&(f("delete",e),t=t.slice(0,e)+t.slice(e+1),p(e));break}case"deleteWordBackward":{if(u)f("deleteWord",e),t=t.slice(0,e)+t.slice(s),p(e);else{const l=x(e);l<e&&(f("deleteWord",e),t=t.slice(0,l)+t.slice(e),p(l))}break}case"deleteWordForward":{if(u)f("deleteWord",e),t=t.slice(0,e)+t.slice(s),p(e);else{const l=B(e);l>e&&(f("deleteWord",e),t=t.slice(0,e)+t.slice(l),p(e))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(u)f("deleteLine",e),t=t.slice(0,e)+t.slice(s),p(e);else{const l=_(e);l<e&&(f("deleteLine",e),t=t.slice(0,l)+t.slice(e),p(l))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(u)f("deleteLine",e),t=t.slice(0,e)+t.slice(s),p(e);else{const l=N(e);l>e&&(f("deleteLine",e),t=t.slice(0,e)+t.slice(l),p(e))}break}case"historyUndo":{T();break}case"historyRedo":{O();break}case"insertReplacementText":{const l=n.getTargetRanges();if(l.length>0){const y=l[0],v=b(o,y.startContainer,y.startOffset),z=b(o,y.endContainer,y.endOffset),$=n.dataTransfer?.getData("text/plain")||n.data||"";f("replace",v),t=t.slice(0,v)+$+t.slice(z),p(v+$.length)}break}}}function R(){w=!0}function A(){w=!1;const n=L();t=o.textContent||"",E(),C(n),a(t)}function P(n){n.preventDefault();const{start:e,end:s}=S();e!==s&&n.clipboardData.setData("text/plain",t.slice(e,s))}function U(n){n.preventDefault();const{start:e,end:s}=S();e!==s&&(n.clipboardData.setData("text/plain",t.slice(e,s)),f("cut",e),t=t.slice(0,e)+t.slice(s),p(e))}function K(n){n.preventDefault();const e=n.clipboardData.getData("text/plain");if(!e)return;const{start:s,end:u}=S();f("paste",s),t=t.slice(0,s)+e+t.slice(u),p(s+e.length)}function F(n){(n.metaKey||n.ctrlKey)&&n.key==="z"&&(n.preventDefault(),n.shiftKey?O():T())}return o.addEventListener("keydown",F),o.addEventListener("beforeinput",D),o.addEventListener("compositionstart",R),o.addEventListener("compositionend",A),o.addEventListener("copy",P),o.addEventListener("cut",U),o.addEventListener("paste",K),E(),{getText:()=>t}}function G(o,c){const a=document.querySelector(".signal-overlay");a&&a.remove();const t=document.createElement("div");t.className="signal-overlay";const r=document.createElement("div");r.className="signal";const i=document.createElement("span");i.className="signal-keys",i.textContent=o;const d=document.createElement("span");d.className="signal-message",d.textContent=c,r.appendChild(i),r.appendChild(d),t.appendChild(r),document.body.appendChild(t),t.addEventListener("animationend",h=>{h.target===t&&t.remove()})}function Y(o){document.addEventListener("keydown",c=>{if((c.metaKey||c.ctrlKey)&&c.key==="s"){c.preventDefault();const a=c.metaKey?"⌘S":"Ctrl+S";ee(o,a)}})}function ee(o,c){try{const t={content:o.textContent},r=JSON.stringify(t),i=W(r).then(h=>{const w=`${window.location.origin}${window.location.pathname}?#doc=${h}`;return new Blob([w],{type:"text/plain"})}),d=new ClipboardItem({"text/plain":i});navigator.clipboard.write([d]).then(()=>{G(c,"Link copied!")})}catch(a){console.error("Failed to copy link to clipboard:",a)}}document.addEventListener("DOMContentLoaded",async()=>{const o=document.querySelector(".paper");te();const c=await H();X(o,c,J),Y(o),o.focus(),ne(2e3)});function te(){const o=document.querySelector(".logo");o?.addEventListener("animationend",()=>o.remove(),{once:!0})}function ne(o){let c;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(c),c=setTimeout(()=>{document.body.classList.add("hide-cursor")},o)},{passive:!0}),document.body.classList.add("hide-cursor")}
