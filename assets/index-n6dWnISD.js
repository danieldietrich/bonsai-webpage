(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const e of c)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(c){const e={};return c.integrity&&(e.integrity=c.integrity),c.referrerPolicy&&(e.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?e.credentials="include":c.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(c){if(c.ep)return;c.ep=!0;const e=a(c);fetch(c.href,e)}})();async function ne(t){if(t.length===0)return"";const n=new Blob([t]).stream().pipeThrough(new CompressionStream("gzip")),a=new Uint8Array(await new Response(n).arrayBuffer()),r=Array.from(a,c=>String.fromCodePoint(c)).join("");return btoa(r)}async function se(t){if(t.length===0)return"";const n=atob(t),a=Uint8Array.from(n,r=>r.charCodeAt(0));try{const r=new Blob([a]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(r).text()}catch{return new TextDecoder().decode(a)}}async function oe(){const t=(await le()??ue())?.content||"";return ie(),t}function ce(t){const n={content:t};localStorage.setItem("editorState",JSON.stringify(n))}function re(){try{const t=localStorage.getItem("caretPosition");return t!==null?parseInt(t,10):0}catch{return 0}}function ae(t){localStorage.setItem("caretPosition",String(t))}function ie(){window.history.replaceState(null,"",window.location.pathname)}async function le(){const t=window.location.hash,n="#doc=";try{if(t.startsWith(n)){const a=decodeURIComponent(t.substring(n.length));if(a.startsWith("https://")||a.startsWith("http://"))return await de(a);const r=await se(a);return JSON.parse(r)}return null}catch(a){return console.error("Error loading document from URL:",a.message),null}}async function de(t){const n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch document: ${n.status} ${n.statusText}`);const a=await n.text();try{const r=JSON.parse(a);if(r.content!==void 0)return r}catch{}return{content:a}}function ue(){const t=localStorage.getItem("editorState");if(!t)return null;try{return JSON.parse(t)}catch(n){return console.error("Error parsing saved state",n),null}}const I=2,fe=/^(\s*(?:>\s*)*)([-*+] (?:\[[ xX]\] )?|\d+\. )?/;function M(t,n){let a=n;for(;a>0&&t[a-1]!==`
`;)a--;return a}function A(t,n){let a=n;for(;a<t.length&&t[a]!==`
`;)a++;return a}function pe(t){const n=t.match(fe),a=n[1]||"",r=n[2]||"";return{prefix:a+r,structural:a,marker:r}}function he(t,n,a){if(!a.match(/^[-=]+\s*$/)||n===0)return!1;const r=M(t,n-1),c=t.slice(r,n-1);if(c===""||c.match(/^\s*(---+|\*\*\*+|___+)\s*$/)||c.match(/^- /))return!1;if(r>0){const e=M(t,r-1);if(t.slice(e,r-1)!=="")return!1}return!0}function me(t,n){if(!n)return t;const a=n.match(/^([-*+] )\[[ xX]\] $/);if(a)return t+a[1]+"[ ] ";const r=n.match(/^(\d+)\. $/);if(r){const c=parseInt(r[1],10)+1;return t+c+". "}return t+n}function ge(t,n,a){const r=M(t,n),c=A(t,a),e=t.slice(r,c);if(he(t,r,e))return{text:t.slice(0,n)+`
`+t.slice(a),offset:n+1};const{prefix:o,structural:u,marker:p}=pe(e);if(o.length===0)return{text:t.slice(0,n)+`
`+t.slice(a),offset:n+1};const m=e.slice(o.length),v=n<=r+o.length;if(m.trim()===""&&v)return{text:t.slice(0,r)+t.slice(r+o.length),offset:r};const $=me(u,p);return{text:t.slice(0,n)+`
`+$+t.slice(a),offset:n+1+$.length}}function xe(t,n){const a=M(t,n),c=t.slice(a,A(t,n)).match(/^\s*/)[0].length,e=n-a,o=" ".repeat(I);return e<=c?{text:t.slice(0,a)+o+t.slice(a),offset:n+I}:{text:t.slice(0,n)+o+t.slice(n),offset:n+I}}function ye(t,n){const a=M(t,n),c=t.slice(a,A(t,n)).match(/^\s*/)[0].length,e=Math.min(c,I);if(e===0)return{text:t,offset:n};const o=t.slice(0,a)+t.slice(a+e),u=Math.max(a,n-e);return{text:o,offset:u}}function $e(t,n,a,r,c={}){let e=n;const o=[],u=[];let p=0,m="",v=!1;function S(i){t.innerHTML=a(i)}function $(i,s,l){if(s===i){let g=0;const T=Math.min(l,i.childNodes.length);for(let C=0;C<T;C++)g+=i.childNodes[C].textContent.length,C<i.childNodes.length-1&&(g+=1);return g}let f=s;for(;f&&f.parentNode!==i;)f=f.parentNode;if(!f)return 0;let h=0;for(let g=i.firstChild;g&&g!==f;g=g.nextSibling)h+=g.textContent.length+1;try{const g=document.createRange();g.setStart(f,0),g.setEnd(s,l),h+=g.toString().length}catch{}return h}function b(){const i=window.getSelection();return i.rangeCount?$(t,i.focusNode,i.focusOffset):0}function k(){const i=window.getSelection();if(!i.rangeCount)return{start:0,end:0};const s=$(t,i.anchorNode,i.anchorOffset),l=$(t,i.focusNode,i.focusOffset);return{start:Math.min(s,l),end:Math.max(s,l)}}function L(i){const s=window.getSelection(),l=Array.from(t.children);if(l.length===0){s.collapse(t,0);return}let f=i;for(let C=0;C<l.length;C++){const _=l[C],P=_.textContent.length;if(f<=P){const D=document.createTreeWalker(_,NodeFilter.SHOW_TEXT);for(;D.nextNode();){const O=D.currentNode.textContent.length;if(f<=O){s.collapse(D.currentNode,f);return}f-=O}s.collapse(_,0);return}if(f-=P,C<l.length-1){if(f===0){const D=document.createTreeWalker(_,NodeFilter.SHOW_TEXT);let O=null;for(;D.nextNode();)O=D.currentNode;O?s.collapse(O,O.textContent.length):s.collapse(_,_.childNodes.length);return}f-=1}}const h=l[l.length-1],g=document.createTreeWalker(h,NodeFilter.SHOW_TEXT);let T=null;for(;g.nextNode();)T=g.currentNode;T?s.collapse(T,T.textContent.length):s.collapse(h,h.childNodes.length)}function N(){const i=window.getSelection();if(!i.rangeCount)return;const s=i.getRangeAt(0).getBoundingClientRect();if(!s||s.height===0)return;const l=40,f=window.innerHeight;s.bottom>f-l?window.scrollBy({top:s.bottom-f+l,behavior:"smooth"}):s.top<l&&window.scrollBy({top:s.top-l,behavior:"smooth"})}function x(i,s){const l=Date.now();if(i===m&&l-p<500&&o.length>0){p=l;return}o.push({text:e,offset:s}),u.length=0,p=l,m=i}function j(){if(o.length===0)return;u.push({text:e,offset:b()});const i=o.pop();e=i.text,S(e),L(i.offset),N(),r(e)}function R(){if(u.length===0)return;o.push({text:e,offset:b()});const i=u.pop();e=i.text,S(e),L(i.offset),N(),r(e)}function U(i){if(i===0)return 0;let s=i;for(;s>0&&/\s/.test(e[s-1]);)s--;for(;s>0&&!/\s/.test(e[s-1]);)s--;return s}function X(i){const s=e.length;if(i>=s)return s;let l=i;for(;l<s&&!/\s/.test(e[l]);)l++;for(;l<s&&/\s/.test(e[l]);)l++;return l}function z(i){if(i===0)return 0;let s=i;for(;s>0&&e[s-1]!==`
`;)s--;return s}function J(i){const s=e.length;if(i>=s)return s;let l=i;for(;l<s&&e[l]!==`
`;)l++;return l}function W(i){const s=i.length,{start:l,end:f}=k();if(!(l!==f)){x("format",l),e=e.slice(0,l)+i+i+e.slice(l),y(l+s);return}const g=e.slice(l-s,l),T=e.slice(f,f+s);g===i&&T===i?(x("format",l),e=e.slice(0,l-s)+e.slice(l,f)+e.slice(f+s),y(f-s)):(x("format",l),e=e.slice(0,l)+i+e.slice(l,f)+i+e.slice(f),y(f+s+s))}function y(i){S(e),L(i),N(),r(e),c.onCaretChange?.(i)}function Z(i){if(v||i.inputType==="insertCompositionText"||(i.preventDefault(),i.inputType==="insertFromPaste"||i.inputType==="deleteByCut"))return;const{start:s,end:l}=k(),f=s!==l;switch(i.inputType){case"insertText":{const h=i.data||"";x("insertText",s),e=e.slice(0,s)+h+e.slice(l),y(s+h.length);break}case"insertParagraph":case"insertLineBreak":{x("insertLine",s);const h=ge(e,s,l);e=h.text,y(h.offset);break}case"deleteContentBackward":{f?(x("delete",s),e=e.slice(0,s)+e.slice(l),y(s)):s>0&&(x("delete",s),e=e.slice(0,s-1)+e.slice(s),y(s-1));break}case"deleteContentForward":{f?(x("delete",s),e=e.slice(0,s)+e.slice(l),y(s)):s<e.length&&(x("delete",s),e=e.slice(0,s)+e.slice(s+1),y(s));break}case"deleteWordBackward":{if(f)x("deleteWord",s),e=e.slice(0,s)+e.slice(l),y(s);else{const h=U(s);h<s&&(x("deleteWord",s),e=e.slice(0,h)+e.slice(s),y(h))}break}case"deleteWordForward":{if(f)x("deleteWord",s),e=e.slice(0,s)+e.slice(l),y(s);else{const h=X(s);h>s&&(x("deleteWord",s),e=e.slice(0,s)+e.slice(h),y(s))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(f)x("deleteLine",s),e=e.slice(0,s)+e.slice(l),y(s);else{const h=z(s);h<s&&(x("deleteLine",s),e=e.slice(0,h)+e.slice(s),y(h))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(f)x("deleteLine",s),e=e.slice(0,s)+e.slice(l),y(s);else{const h=J(s);h>s&&(x("deleteLine",s),e=e.slice(0,s)+e.slice(h),y(s))}break}case"historyUndo":{j();break}case"historyRedo":{R();break}case"insertReplacementText":{const h=i.getTargetRanges();if(h.length>0){const g=h[0],T=$(t,g.startContainer,g.startOffset),C=$(t,g.endContainer,g.endOffset),_=i.dataTransfer?.getData("text/plain")||i.data||"";x("replace",T),e=e.slice(0,T)+_+e.slice(C),y(T+_.length)}break}}}function V(){v=!0}function G(){v=!1;const i=b();e=Array.from(t.children).map(s=>s.textContent).join(`
`),S(e),L(i),r(e)}function Q(i){i.preventDefault();const{start:s,end:l}=k();s!==l&&i.clipboardData.setData("text/plain",e.slice(s,l))}function Y(i){i.preventDefault();const{start:s,end:l}=k();s!==l&&(i.clipboardData.setData("text/plain",e.slice(s,l)),x("cut",s),e=e.slice(0,s)+e.slice(l),y(s))}function ee(i){i.preventDefault();const s=i.clipboardData.getData("text/plain");if(!s)return;const{start:l,end:f}=k();x("paste",l),e=e.slice(0,l)+s+e.slice(f),y(l+s.length)}function te(i){if((i.metaKey||i.ctrlKey)&&i.key==="z"&&(i.preventDefault(),i.shiftKey?R():j()),(i.metaKey||i.ctrlKey)&&i.key==="b"&&(i.preventDefault(),W("**")),(i.metaKey||i.ctrlKey)&&i.key==="i"&&(i.preventDefault(),W("_")),i.key==="Tab"){i.preventDefault();const{start:s,end:l}=k(),f=s!==l;if(i.shiftKey){x("outdent",s);const h=ye(e,s);e=h.text,y(h.offset)}else if(f)x("indent",s),e=e.slice(0,s)+"  "+e.slice(l),y(s+2);else{x("indent",s);const h=xe(e,s);e=h.text,y(h.offset)}}if(i.key==="ArrowRight"&&!i.metaKey&&!i.ctrlKey&&!i.altKey&&!i.shiftKey){const s=window.getSelection();if(s.rangeCount&&s.isCollapsed&&s.focusNode?.nodeType===Node.TEXT_NODE){const l=s.focusNode,f=s.focusOffset,h=l.parentElement?.closest(".list-marker");if(h){const g=document.createTreeWalker(h,NodeFilter.SHOW_TEXT);let T=null;for(;g.nextNode();)T=g.currentNode;if(T===l){const C=h.nextElementSibling;if(C?.classList.contains("list-content")&&C.textContent.length>0){if(f===l.textContent.length)i.preventDefault(),L(b()+1);else if(f===l.textContent.length-1){i.preventDefault();const P=document.createTreeWalker(C,NodeFilter.SHOW_TEXT).nextNode();P&&s.collapse(P,0)}}}}}}if(i.key==="ArrowLeft"&&!i.metaKey&&!i.ctrlKey&&!i.altKey&&!i.shiftKey){const s=window.getSelection();if(s.rangeCount&&s.isCollapsed&&s.focusNode?.nodeType===Node.TEXT_NODE){const l=s.focusNode;if(s.focusOffset===0){const f=l.parentElement?.closest(".list-content");if(f&&document.createTreeWalker(f,NodeFilter.SHOW_TEXT).nextNode()===l&&f.previousElementSibling?.classList.contains("list-marker")){i.preventDefault();const T=b();T>0&&L(T-1)}}}}}t.addEventListener("keydown",te),t.addEventListener("beforeinput",Z),t.addEventListener("compositionstart",V),t.addEventListener("compositionend",G),t.addEventListener("copy",Q),t.addEventListener("cut",Y),t.addEventListener("paste",ee),S(e);const K=Math.min(c.initialCaretPosition??0,e.length);if(K>0){L(K);const i=window.getSelection();if(i.rangeCount){const s=i.getRangeAt(0).getBoundingClientRect();if(s&&s.height>0){const l=window.innerHeight/2;window.scrollBy({top:s.top-l})}}}return document.addEventListener("selectionchange",()=>{if(!c.onCaretChange)return;const i=window.getSelection();i.rangeCount&&t.contains(i.focusNode)&&c.onCaretChange(b())}),{getText:()=>e}}const w={escaped:/\\([\\`*_{}\[\]()#+\-.!~^|$])/g,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),inlineMath:new RegExp("(?<!\\$)\\$(?!\\$)([^\\$\\n]+?)\\$(?!\\$)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,superscript:/\^([^\s^](?:[^^\n]*?[^\s^])?)\^/g,subscript:new RegExp("(?<!~)~(?!~)([^\\s~](?:[^~\\n]*?[^\\s~])?)~(?!~)","g"),autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g,footnoteRef:/\[\^([^\]]+)\]/g};function d(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let B={};function we(t){const n={},a=t.split(`
`);for(const r of a){const c=r.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);c&&(n[c[1].toLowerCase()]={url:c[2],title:c[3]||""})}return n}function F(t){const n=t.split(`
`),a=[];let r=0,c=0;if(n[0].match(/^---\s*$/)&&n.length>1){for(let e=1;e<n.length;e++)if(n[e].match(/^\s*---\s*$/)){const o=n.slice(0,e+1).join(`
`);a.push({type:"metadata",text:o,offset:0}),r=o.length+1,c=e+1;break}}for(;c<n.length;){const e=n[c];if(e.match(/^```/)){let o=c+1;for(;o<n.length&&!n[o].match(/^\s*```/);)o++;if(o<n.length){const u=n.slice(c,o+1).join(`
`);a.push({type:"code",text:u,offset:r}),r+=u.length+1,c=o+1;continue}}if(e.match(/^\$\$\s*$/)){let o=c+1;for(;o<n.length&&!n[o].match(/^\s*\$\$/);)o++;if(o<n.length){const u=n.slice(c,o+1).join(`
`);a.push({type:"math",text:u,offset:r}),r+=u.length+1,c=o+1;continue}}if(e.match(/^\|.*\|\s*$/)&&c+1<n.length){const o=n[c+1];if(o.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const u=p=>p.split("|").length-1;if(u(e)===u(o)){let p=c+2;for(;p<n.length&&n[p].match(/^\|.*\|\s*$/);)p++;const m=n.slice(c,p).join(`
`);a.push({type:"table",text:m,offset:r}),r+=m.length+1,c=p;continue}}}if(e.match(/^\s*>(?:\s|$)/)){let o=c+1;for(;o<n.length&&n[o].match(/^\s*>(?:\s|$)/);)o++;const p=n.slice(c,o).map($=>{const b=$.match(/^(\s*>)(\s?)(.*)/);return b?{prefix:b[1]+b[2],content:b[3]}:{prefix:"",content:$}}),m=p.map($=>$.content).join(`
`),v=F(m);let S=0;for(const $ of v){const b=$.text.split(`
`).length,k=p.slice(S,S+b).map(N=>N.prefix),L=$.text.split(`
`).map((N,x)=>k[x]+N);a.push({type:$.type,text:L.join(`
`),offset:r,blockquote:!0,innerText:$.text,prefixes:k}),r+=L.join(`
`).length+1,S+=b}c=o;continue}if(e.match(/^#{1,6}[ \t]+.+$/)){a.push({type:"heading",text:e,offset:r}),r+=e.length+1,c++;continue}if(e!==""&&!e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&!e.match(/^- /)&&(c===0||n[c-1]==="")&&c+1<n.length){const o=n[c+1];if(o.match(/^=+\s*$/)||o.match(/^-+\s*$/)){const u=e+`
`+o;a.push({type:"setext",text:u,offset:r}),r+=u.length+1,c+=2;continue}}if(e.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){a.push({type:"hr",text:e,offset:r}),r+=e.length+1,c++;continue}if(e.match(/^(?: {4}|\t)/)&&!e.match(/^\s*[*\-+] /)&&!e.match(/^\s*\d+\. /)&&!e.match(/^\s*>(?:\s|$)/)){let o=c+1;for(;o<n.length&&n[o].match(/^(?: {4}|\t)/)&&!n[o].match(/^\s*[*\-+] /)&&!n[o].match(/^\s*\d+\. /)&&!n[o].match(/^\s*>(?:\s|$)/);)o++;const u=n.slice(c,o).join(`
`);a.push({type:"indented-code",text:u,offset:r}),r+=u.length+1,c=o;continue}a.push({type:"line",text:e,offset:r}),r+=e.length+1,c++}return a}function E(t){let n=t;const a=[],r=e=>{const o=`PROTECTED${a.length}`;return a.push(e),o};n=n.replace(w.escaped,(e,o)=>r(`<span class="md-syntax">\\</span>${d(o)}`)).replace(w.inlineCode,(e,o)=>r(`<code><span class="md-syntax">\`</span>${d(o)}<span class="md-syntax">\`</span></code>`)).replace(w.inlineMath,(e,o)=>r(`<code class="math"><span class="md-syntax">$</span>${d(o)}<span class="md-syntax">$</span></code>`)).replace(w.comment,(e,o)=>r(`<span class="comment">&lt;!--${d(o)}--&gt;</span>`)).replace(w.autoLink,(e,o)=>r(`<span class="md-syntax">&lt;</span><a href="${d(o)}" target="_blank" rel="noopener noreferrer">${d(o)}</a><span class="md-syntax">&gt;</span>`)).replace(w.autoEmail,(e,o)=>r(`<span class="md-syntax">&lt;</span><a href="mailto:${d(o)}">${d(o)}</a><span class="md-syntax">&gt;</span>`)).replace(w.htmlTag,e=>r(`<code class="md-syntax">${d(e)}</code>`)).replace(w.image,(e,o,u)=>r(`<span class="md-syntax">![</span>${d(o)}<span class="md-syntax">](</span><a href="${d(u)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">)</span>`)).replace(w.link,(e,o,u)=>r('<span class="md-syntax">[</span>')+o+r(`<span class="md-syntax">](</span><a href="${d(u)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">)</span>`)).replace(w.refImage,(e,o,u)=>{const p=(u||o).toLowerCase(),m=B[p];return m?r(`<span class="md-syntax">![</span>${d(o)}<span class="md-syntax">][</span><a href="${d(m.url)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">]</span>`):e}).replace(w.refLink,(e,o,u)=>{const p=(u||o).toLowerCase(),m=B[p];return m?r('<span class="md-syntax">[</span>')+o+r(`<span class="md-syntax">][</span><a href="${d(m.url)}" target="_blank" rel="noopener noreferrer">${d(u)}</a><span class="md-syntax">]</span>`):e}).replace(w.footnoteRef,(e,o)=>r('<span class="md-syntax">[^</span>')+o+r('<span class="md-syntax">]</span>')),n=d(n);const c=e=>`<span class="md-syntax">${e}</span>`;return n=n.replace(w.boldItalic,(e,o)=>r(`<b><em>${c("***")}`)+o+r(`${c("***")}</em></b>`)).replace(w.bold,(e,o)=>`<b>${c("**")}${o}${c("**")}</b>`).replace(w.boldUnderscore,(e,o)=>`<b>${c("__")}${o}${c("__")}</b>`).replace(w.strikethrough,(e,o)=>`<s>${c("~~")}${o}${c("~~")}</s>`).replace(w.superscript,(e,o)=>`<sup>${c("^")}${o}${c("^")}</sup>`).replace(w.subscript,(e,o)=>`<sub>${c("~")}${o}${c("~")}</sub>`).replace(w.italicAsterisk,(e,o)=>`<em>${c("*")}${o}${c("*")}</em>`).replace(w.italicUnderscore,(e,o)=>`<em>${c("_")}${o}${c("_")}</em>`),n=n.replace(/\uE000PROTECTED(\d+)\uE001/g,(e,o)=>a[parseInt(o,10)]),n}function be(t){const n=t.match(/^(\s*)(>)(\s?)$/);if(!n)return d(t);const a=n[1],r=n[2],c=n[3];return a?`<span class="indent">${d(a)}</span><span class="md-syntax">${d(r)}</span>${c}`:`<span class="md-syntax">${d(r)}</span>${c}`}function ve(t){return/^<\w+[^>]*\sclass="[^"]*bq/.test(t)?t:/^<\w+[^>]*\sclass="/.test(t)?t.replace(/^(<\w+[^>]*\sclass="[^"]*)(")/,"$1 bq$2"):t.replace(/^(<\w+)/,'$1 class="bq"')}function Te(t,n){const r=t.split(`
`).map((c,e)=>{const o=n[e];if(!o)return c;const u=be(o),p=c.match(/^(<(?:pre|code|div|h[1-6])[^>]*>)*/),m=p?p[0].length:0,v=c.replace(/<br>/g,"");return v.slice(0,m)+u+v.slice(m)}).join(`
`);return ve(r)}function H(t){if(t.blockquote){const n={type:t.type,text:t.innerText},a=H(n),r=Array.isArray(a)?a:[a];let c=0;const e=[];for(const o of r){const u=(o.match(/\n/g)||[]).length+1,p=t.prefixes.slice(c,c+u);e.push(Te(o,p)),c+=u}return e.length===1?e[0]:e}switch(t.type){case"metadata":{const n=t.text.split(`
`),a=`<span class="md-syntax">${d(n[0])}</span>`,r=`<span class="md-syntax">${d(n[n.length-1])}</span>`,c=n.slice(1,-1);return c.length>0?`<pre><code>${a}
${c.map(e=>d(e)).join(`
`)}
${r}</code></pre>`:`<pre><code>${a}
${r}</code></pre>`}case"code":{const n=t.text.match(/^(```[^\n]*)\n([\s\S]*?)\n(\s*```)$/);return n?`<pre><code><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code>${d(t.text)}</code></pre>`}case"indented-code":return`<pre><code>${d(t.text)}</code></pre>`;case"table":return`<pre><code>${t.text.split(`
`).map((r,c)=>{const e=d(r);return c===1?`<span class="md-syntax">${e}</span>`:e.replace(/\|/g,'<span class="md-syntax">|</span>')}).join(`
`)}</code></pre>`;case"math":{const n=t.text.match(/^(\$\$)\n([\s\S]*?)\n(\s*\$\$)$/);return n?`<pre><code class="math"><span class="md-syntax">${d(n[1])}</span>
${d(n[2])}
<span class="md-syntax">${d(n[3])}</span></code></pre>`:`<pre><code class="math">${d(t.text)}</code></pre>`}case"heading":{const n=t.text.match(/^(#{1,6}[ \t]+)(.*)/),a=n[1].trim().length;return`<h${a}><span class="md-syntax">${d(n[1])}</span>${E(n[2])}</h${a}>`}case"setext":{const n=t.text.indexOf(`
`),a=t.text.slice(0,n),r=t.text.slice(n+1),c=r.trimStart()[0]==="="?1:2;return`<h${c}>${E(a)}
<span class="md-rule md-syntax">${d(r)}</span></h${c}>`}case"hr":return`<div class="md-rule md-syntax">${d(t.text)}</div>`;case"line":{if(t.text==="")return'<div class="line"><br></div>';const n=t.text.match(/^(\*\[)([^\]]+)(\]:\s)(.*)/);if(n)return`<div class="line"><span class="md-syntax">${d(n[1])}</span>${d(n[2])}<span class="md-syntax">${d(n[3])}</span>${E(n[4])}</div>`;const a=t.text.match(/^(\[\^)([^\]]+)(\]:\s)(.*)/);if(a)return`<div class="line"><span class="md-syntax">${d(a[1])}</span>${d(a[2])}<span class="md-syntax">${d(a[3])}</span>${E(a[4])}</div>`;const r=t.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(r){const p=r[1],m=r[2],v=r[3]||"";return`<div class="line"><span class="md-syntax">${d(p)}</span><a href="${d(m)}" target="_blank" rel="noopener noreferrer">${d(m)}</a><span class="md-syntax">${d(v)}</span></div>`}const c=t.text.match(/^(\s*)([*\-+] )/);if(c){const p=c[1],m=c[2],v=t.text.slice(p.length+m.length),S=p?`<span class="indent">${d(p)}</span>`:"",$=v.match(/^(\[[ xX]\] )/);if($){const b=$[1],k=v.slice(b.length),N=b[1]!==" "?`<span class="task-done">${E(k)}</span>`:E(k);return`<div class="line list-line"><span class="list-marker">${S}<span class="md-syntax md-bullet">${d(m)}</span><span class="md-checkbox">${d(b)}</span></span><span class="list-content">${N}</span></div>`}return`<div class="line list-line"><span class="list-marker">${S}<span class="md-syntax md-bullet">${d(m)}</span></span><span class="list-content">${E(v)}</span></div>`}const e=t.text.match(/^(\s*)(\d+\. )/);if(e){const p=e[1],m=e[2],v=t.text.slice(p.length+m.length);return`<div class="line list-line"><span class="list-marker">${p?`<span class="indent">${d(p)}</span>`:""}<span class="md-syntax">${d(m)}</span></span><span class="list-content">${E(v)}</span></div>`}const o=t.text.match(/^(: )/);if(o){const p=o[1],m=t.text.slice(p.length);return`<div class="line list-line"><span class="list-marker"><span class="md-syntax">${d(p)}</span></span><span class="list-content">${E(m)}</span></div>`}const u=t.text.match(/^(\s+)/);if(u){const p=u[1],m=t.text.slice(p.length);return`<div class="line"><span class="indent">${d(p)}</span>${E(m)}</div>`}return`<div class="line">${E(t.text)}</div>`}}}function ke(t){return B=we(t),F(t).flatMap(a=>{const r=H(a);return Array.isArray(r)?r:[r]}).join("")}function Ce(t,n){document.addEventListener("keydown",a=>{if((a.metaKey||a.ctrlKey)&&a.key==="s"){a.preventDefault();const r=a.metaKey?"⌘S":"Ctrl+S";q(n,r)}})}function q(t,n){try{const r={content:t()},c=JSON.stringify(r),e=ne(c).then(u=>{const p=`${window.location.origin}${window.location.pathname}?#doc=${u}`;return new Blob([p],{type:"text/plain"})}),o=new ClipboardItem({"text/plain":e});navigator.clipboard.write([o]).then(()=>{Se(n,"Link copied!")})}catch(a){console.error("Failed to copy link to clipboard:",a)}}function Se(t,n){const a=document.querySelector(".signal-overlay");a&&a.remove();const r=document.createElement("div");r.className="signal-overlay";const c=document.createElement("div");if(c.className="signal",t){const o=document.createElement("span");o.className="signal-keys",o.textContent=t,c.appendChild(o)}const e=document.createElement("span");e.className="signal-message",e.textContent=n,c.appendChild(e),r.appendChild(c),document.body.appendChild(r),r.addEventListener("animationend",o=>{o.target===r&&r.remove()})}const Le=3e3;function Ee(t,n){if(!("ontouchstart"in window))return;const a=_e();document.body.appendChild(a);let r;t.addEventListener("touchstart",()=>{a.classList.add("visible"),clearTimeout(r),r=setTimeout(()=>{a.classList.remove("visible")},Le)},{passive:!0}),a.addEventListener("click",c=>{c.preventDefault(),q(n)})}function _e(){const t=document.createElement("button");return t.type="button",t.className="share-button",t.setAttribute("aria-label","Copy shareable link"),t.innerHTML=`<svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
  <polyline points="16 6 12 2 8 6"/>
  <line x1="12" y1="2" x2="12" y2="15"/>
</svg>`,t}document.addEventListener("DOMContentLoaded",async()=>{const t=document.querySelector(".paper");Ne();const n=window.location.hash.startsWith("#doc="),a=await oe(),r=n?0:re(),c=$e(t,a,ke,ce,{initialCaretPosition:r,onCaretChange:ae});Ce(t,c.getText),Ee(t,c.getText),t.focus(),Oe(2e3)});function Ne(){const t=document.querySelector(".logo");t?.addEventListener("animationend",()=>t.remove(),{once:!0})}function Oe(t){let n;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(n),n=setTimeout(()=>{document.body.classList.add("hide-cursor")},t)},{passive:!0}),document.body.classList.add("hide-cursor")}
