(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();const T=8192;function H(o){if(o.length===0)return"";const i=new TextEncoder,a=[];for(let t=0;t<o.length;t+=T){const s=o.slice(t,t+T),r=i.encode(s),l=String.fromCharCode(...r);a.push(btoa(l))}return a.join("")}function I(o){if(o.length===0)return"";const i=new TextDecoder,a=[],t=T-T%4;for(let s=0;s<o.length;s+=t){const r=o.slice(s,s+t),l=atob(r),y=new Uint8Array(l.length);for(let m=0;m<l.length;m++)y[m]=l.charCodeAt(m);a.push(i.decode(y,{stream:!0}))}return a.push(i.decode()),a.join("")}function j(){const o=(Q()??X())?.content||"";return Z(),J(o)}function z(o){const i={content:o};localStorage.setItem("editorState",JSON.stringify(i))}function J(o){if(!o)return"";if(/<[a-zA-Z][^>]*>/.test(o)){const i=document.createElement("div");return i.innerHTML=o,N(i)}return o}function Z(){window.history.replaceState(null,"",window.location.pathname)}function Q(){const o=window.location.hash,i="#json=";if(!o.startsWith(i))return null;try{const a=o.substring(i.length),t=I(a);return JSON.parse(t)}catch(a){return console.error("Error parsing URL state:",a.message),console.error("The URL appears to be truncated or corrupted."),null}}function X(){const o=localStorage.getItem("editorState");if(!o)return null;try{return JSON.parse(o)}catch(i){return console.error("Error parsing saved state",i),null}}function N(o){let i="";for(const a of o.childNodes)a.nodeType===Node.TEXT_NODE?i+=a.textContent:a.nodeType===Node.ELEMENT_NODE&&(i+=N(a));return i}const h={metadata:/^---[ \t]*\n([\s\S]*?)\n?[ \t]*---/,codeBlock:/```([^\s`]*?)[ \t]*\n([\s\S]*?)\n[ \t]*```/g,heading:/^(#{1,6})[ \t]+(.+)$/gm,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),comment:/<!--([\s\S]*?)-->/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,horizontalRule:/^[ \t]*(---+|\*\*\*+|___+)[ \t]*$/gm,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,blockquote:/^>[ \t]*(.*)(?=\n)/gm,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g};function p(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function V(o){let i=o;const a=[],t=s=>{const r=`PROTECTED${a.length}`;return a.push(s),r};return i=i.replace(h.metadata,(s,r)=>t(`<pre><code>---
${p(r)}
---</code></pre>`)).replace(h.codeBlock,(s,r,l)=>t(`<pre><code>\`\`\`${p(r)}
${p(l)}
\`\`\`</code></pre>`)).replace(h.inlineCode,(s,r)=>t(`<code>\`${p(r)}\`</code>`)).replace(h.inlineCode,(s,r)=>t(()=>`<code>\`${p(r)}\`</code>`)).replace(h.comment,(s,r)=>t(`<span class="comment">&lt;!--${p(r)}--&gt;</span>`)).replace(h.htmlTag,s=>t(`<span class="html-tag">${p(s)}</span>`)).replace(h.blockquote,(s,r)=>`BLOCKQUOTE${r}`).replace(h.image,(s,r,l)=>t(`<a href="${p(l)}" target="_blank" rel="noopener noreferrer">![${p(r)}](${p(l)})</a>`)).replace(h.link,(s,r,l)=>t(`<a href="${p(l)}" target="_blank" rel="noopener noreferrer">[${p(r)}](${p(l)})</a>`)),i=p(i),i=i.replace(h.horizontalRule,(s,r)=>`<span class="hr">${r}</span>`).replace(h.heading,(s,r,l)=>`<h${r.length}>${r} ${l}</h${r.length}>`).replace(h.bold,(s,r)=>`<b>**${r}**</b>`).replace(h.strikethrough,(s,r)=>`<s>~~${r}~~</s>`).replace(h.italicAsterisk,(s,r)=>`<em>*${r}*</em>`).replace(h.italicUnderscore,(s,r)=>`<em>_${r}_</em>`).replace(/\uE002BLOCKQUOTE\uE003(.*)/g,(s,r)=>`<blockquote>&gt; ${r}</blockquote>`).replace(/\uE000PROTECTED(\d+)\uE001/g,(s,r)=>a[parseInt(r,10)]),i}function G(o,i,a){let t=i;const s=[],r=[];let l=0,y="",m=!1;function b(n,e,c){try{const g=document.createRange();return g.setStart(n,0),g.setEnd(e,c),g.toString().length}catch{return 0}}function L(){const n=window.getSelection();return n.rangeCount?b(o,n.focusNode,n.focusOffset):0}function k(){const n=window.getSelection();if(!n.rangeCount)return{start:0,end:0};const e=b(o,n.anchorNode,n.anchorOffset),c=b(o,n.focusNode,n.focusOffset);return{start:Math.min(e,c),end:Math.max(e,c)}}function S(n){const e=window.getSelection(),c=document.createTreeWalker(o,NodeFilter.SHOW_TEXT);let g=n;for(;c.nextNode();){const w=c.currentNode.textContent.length;if(g<=w){e.collapse(c.currentNode,g);return}g-=w}const d=c.currentNode;d&&d!==o?e.collapse(d,d.textContent?.length||0):e.collapse(o,o.childNodes.length)}function C(){const n=window.getSelection();if(!n.rangeCount)return;const e=n.getRangeAt(0).getBoundingClientRect();if(!e||e.height===0)return;const c=40;e.bottom>window.innerHeight-c?window.scrollBy({top:e.bottom-window.innerHeight+c,behavior:"smooth"}):e.top<c&&window.scrollBy({top:e.top-c,behavior:"smooth"})}function u(n,e){const c=Date.now();if(n===y&&c-l<500&&s.length>0){l=c;return}s.push({text:t,offset:e}),r.length=0,l=c,y=n}function x(){if(s.length===0)return;r.push({text:t,offset:L()});const n=s.pop();t=n.text,E(),S(n.offset),C(),a(t)}function _(){if(r.length===0)return;s.push({text:t,offset:L()});const n=r.pop();t=n.text,E(),S(n.offset),C(),a(t)}function O(n){if(n===0)return 0;let e=n;for(;e>0&&/\s/.test(t[e-1]);)e--;for(;e>0&&!/\s/.test(t[e-1]);)e--;return e}function D(n){const e=t.length;if(n>=e)return e;let c=n;for(;c<e&&!/\s/.test(t[c]);)c++;for(;c<e&&/\s/.test(t[c]);)c++;return c}function B(n){if(n===0)return 0;let e=n;for(;e>0&&t[e-1]!==`
`;)e--;return e}function A(n){const e=t.length;if(n>=e)return e;let c=n;for(;c<e&&t[c]!==`
`;)c++;return c}function E(){o.innerHTML=V(t)}function f(n){E(),S(n),C(),a(t)}function P(n){if(m||n.inputType==="insertCompositionText"||(n.preventDefault(),n.inputType==="insertFromPaste"||n.inputType==="deleteByCut"))return;const{start:e,end:c}=k(),g=e!==c;switch(n.inputType){case"insertText":{const d=n.data||"";u("insertText",e),t=t.slice(0,e)+d+t.slice(c),f(e+d.length);break}case"insertParagraph":case"insertLineBreak":{u("insertLine",e),t=t.slice(0,e)+`
`+t.slice(c),f(e+1);break}case"deleteContentBackward":{g?(u("delete",e),t=t.slice(0,e)+t.slice(c),f(e)):e>0&&(u("delete",e),t=t.slice(0,e-1)+t.slice(e),f(e-1));break}case"deleteContentForward":{g?(u("delete",e),t=t.slice(0,e)+t.slice(c),f(e)):e<t.length&&(u("delete",e),t=t.slice(0,e)+t.slice(e+1),f(e));break}case"deleteWordBackward":{if(g)u("deleteWord",e),t=t.slice(0,e)+t.slice(c),f(e);else{const d=O(e);d<e&&(u("deleteWord",e),t=t.slice(0,d)+t.slice(e),f(d))}break}case"deleteWordForward":{if(g)u("deleteWord",e),t=t.slice(0,e)+t.slice(c),f(e);else{const d=D(e);d>e&&(u("deleteWord",e),t=t.slice(0,e)+t.slice(d),f(e))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(g)u("deleteLine",e),t=t.slice(0,e)+t.slice(c),f(e);else{const d=B(e);d<e&&(u("deleteLine",e),t=t.slice(0,d)+t.slice(e),f(d))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(g)u("deleteLine",e),t=t.slice(0,e)+t.slice(c),f(e);else{const d=A(e);d>e&&(u("deleteLine",e),t=t.slice(0,e)+t.slice(d),f(e))}break}case"historyUndo":{x();break}case"historyRedo":{_();break}case"insertReplacementText":{const d=n.getTargetRanges();if(d.length>0){const w=d[0],v=b(o,w.startContainer,w.startOffset),q=b(o,w.endContainer,w.endOffset),$=n.dataTransfer?.getData("text/plain")||n.data||"";u("replace",v),t=t.slice(0,v)+$+t.slice(q),f(v+$.length)}break}}}function R(){m=!0}function U(){m=!1;const n=L();t=o.textContent||"",E(),S(n),a(t)}function F(n){n.preventDefault();const{start:e,end:c}=k();e!==c&&n.clipboardData.setData("text/plain",t.slice(e,c))}function K(n){n.preventDefault();const{start:e,end:c}=k();e!==c&&(n.clipboardData.setData("text/plain",t.slice(e,c)),u("cut",e),t=t.slice(0,e)+t.slice(c),f(e))}function M(n){n.preventDefault();const e=n.clipboardData.getData("text/plain");if(!e)return;const{start:c,end:g}=k();u("paste",c),t=t.slice(0,c)+e+t.slice(g),f(c+e.length)}function W(n){(n.metaKey||n.ctrlKey)&&n.key==="z"&&(n.preventDefault(),n.shiftKey?_():x())}return o.addEventListener("keydown",W),o.addEventListener("beforeinput",P),o.addEventListener("compositionstart",R),o.addEventListener("compositionend",U),o.addEventListener("copy",F),o.addEventListener("cut",K),o.addEventListener("paste",M),E(),{getText:()=>t}}function Y(o,i){const a=document.querySelector(".signal-overlay");a&&a.remove();const t=document.createElement("div");t.className="signal-overlay";const s=document.createElement("div");s.className="signal";const r=document.createElement("span");r.className="signal-keys",r.textContent=o;const l=document.createElement("span");l.className="signal-message",l.textContent=i,s.appendChild(r),s.appendChild(l),t.appendChild(s),document.body.appendChild(t),t.addEventListener("animationend",y=>{y.target===t&&t.remove()})}function ee(o){document.addEventListener("keydown",i=>{if((i.metaKey||i.ctrlKey)&&i.key==="s"){i.preventDefault();const a=i.metaKey?"⌘S":"Ctrl+S";te(o,a)}})}async function te(o,i){try{const t={content:o.textContent},s=JSON.stringify(t),r=H(s),l=`${window.location.origin}${window.location.pathname}?#json=${r}`;await navigator.clipboard.writeText(l),Y(i,"Link copied!")}catch(a){console.error("Failed to copy link to clipboard:",a)}}document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelector(".paper");ne();const i=j();G(o,i,z),ee(o),o.focus(),oe(2e3)});function ne(){const o=document.querySelector(".logo");o?.addEventListener("animationend",()=>o.remove(),{once:!0})}function oe(o){let i;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(i),i=setTimeout(()=>{document.body.classList.add("hide-cursor")},o)},{passive:!0}),document.body.classList.add("hide-cursor")}
