(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(t){if(t.ep)return;t.ep=!0;const c=o(t);fetch(t.href,c)}})();function m(n,e){n.addEventListener("copy",o=>{o.preventDefault();const r=window.getSelection();let t="";if(r.rangeCount>0){const c=r.getRangeAt(0),s=document.createElement("div");s.appendChild(c.cloneContents()),t=d(s)}o.clipboardData.setData("text/plain",t)}),n.addEventListener("cut",o=>{o.preventDefault();const r=window.getSelection();let t="";if(r.rangeCount>0){const c=r.getRangeAt(0),s=document.createElement("div");s.appendChild(c.cloneContents()),t=d(s),o.clipboardData.setData("text/plain",t),c.deleteContents(),e&&e()}}),n.addEventListener("paste",o=>{o.preventDefault();const r=o.clipboardData.getData("text/plain"),t=window.getSelection();if(!t.rangeCount)return;const c=t.getRangeAt(0);c.deleteContents();const s=document.createTextNode(r);c.insertNode(s),c.setStartAfter(s),c.collapse(!0),t.removeAllRanges(),t.addRange(c),f(c),e&&e()})}function f(n){const e=document.createElement("span");e.appendChild(document.createTextNode("​")),n.insertNode(e),e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),e.parentNode.removeChild(e)}function d(n){let e="";const o=n.childNodes;for(let r=0;r<o.length;r++){const t=o[r];t.nodeType===Node.TEXT_NODE?e+=t.textContent:t.nodeType===Node.ELEMENT_NODE&&(r>0&&t.nodeName==="DIV"&&(e+=`
`),e+=d(t))}return e}const l=8192;function p(n){if(n.length===0)return"";const e=new TextEncoder,o=[];for(let r=0;r<n.length;r+=l){const t=n.slice(r,r+l),c=e.encode(t),s=String.fromCharCode(...c);o.push(btoa(s))}return o.join("")}function g(n){if(n.length===0)return"";const e=new TextDecoder,o=[],r=l-l%4;for(let t=0;t<n.length;t+=r){const c=n.slice(t,t+r),s=atob(c),i=new Uint8Array(s.length);for(let a=0;a<s.length;a++)i[a]=s.charCodeAt(a);o.push(e.decode(i,{stream:!0}))}return o.push(e.decode()),o.join("")}function h(n){let e=v();e?(n.innerHTML=e.content||"",localStorage.setItem("editorState",JSON.stringify(e))):(e=S(),e&&(n.innerHTML=e.content||"")),y(),n.addEventListener("input",()=>u(n))}function y(){window.history.replaceState(null,"",window.location.pathname)}function v(){const n=window.location.hash,e="#json=";if(!n.startsWith(e))return null;try{const o=n.substring(e.length),r=g(o);return JSON.parse(r)}catch(o){return console.error("Error parsing URL state:",o.message),console.error("The URL appears to be truncated or corrupted."),null}}function S(){const n=localStorage.getItem("editorState");if(!n)return null;try{return JSON.parse(n)}catch(e){return console.error("Error parsing saved state",e),null}}function u(n){const e={content:n.innerHTML};localStorage.setItem("editorState",JSON.stringify(e))}function E(n=2e3){let e;const o=()=>{document.body.classList.remove("hide-cursor"),clearTimeout(e),e=setTimeout(()=>{document.body.classList.add("hide-cursor")},n)};return document.addEventListener("mousemove",o,{passive:!0}),document.body.classList.add("hide-cursor"),()=>{document.removeEventListener("mousemove",o),clearTimeout(e)}}function L(n,e){const o=document.querySelector(".signal-overlay");o&&o.remove();const r=document.createElement("div");r.className="signal-overlay";const t=document.createElement("div");t.className="signal";const c=document.createElement("span");c.className="signal-keys",c.textContent=n;const s=document.createElement("span");s.className="signal-message",s.textContent=e,t.appendChild(c),t.appendChild(s),r.appendChild(t),document.body.appendChild(r),r.addEventListener("animationend",i=>{i.target===r&&r.remove()})}function b(n){document.addEventListener("keydown",e=>{if((e.metaKey||e.ctrlKey)&&e.key==="s"){e.preventDefault();const o=e.metaKey?"⌘S":"Ctrl+S";w(n,o)}})}async function w(n,e){try{const r={content:n.textContent},t=JSON.stringify(r),c=p(t),s=`${window.location.origin}${window.location.pathname}?#json=${c}`;await navigator.clipboard.writeText(s),L(e,"Link copied!")}catch(o){console.error("Failed to copy link to clipboard:",o)}}document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".paper");h(n),m(n,()=>u(n)),b(n),n.focus(),E()});
