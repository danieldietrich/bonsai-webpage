(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function l(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=l(e);fetch(e.href,n)}})();async function J(o){if(o.length===0)return"";const s=await Z(o),l=Array.from(s,c=>String.fromCodePoint(c)).join("");return btoa(l)}async function X(o){if(o.length===0)return"";const s=atob(o),l=Uint8Array.from(s,c=>c.charCodeAt(0));return await V(l)}async function Z(o){const s=new Blob([o]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(s).arrayBuffer())}async function V(o){const s=new Blob([o]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(s).text()}async function G(){const o=(await ee()??te())?.content||"";return Y(),o}function Q(o){const s={content:o};localStorage.setItem("editorState",JSON.stringify(s))}function Y(){window.history.replaceState(null,"",window.location.pathname)}async function ee(){const o=window.location.hash,s="#doc=";try{if(o.startsWith(s)){const l=await X(o.substring(s.length));return JSON.parse(l)}return null}catch(l){return console.error("Error parsing URL state:",l.message),console.error("The URL appears to be truncated or corrupted."),null}}function te(){const o=localStorage.getItem("editorState");if(!o)return null;try{return JSON.parse(o)}catch(s){return console.error("Error parsing saved state",s),null}}function ne(o,s,l,c){let e=s;const n=[],r=[];let d=0,f="",k=!1;function v(a){o.innerHTML=l(a)}function S(a,t,i){if(t===a){let m=0;const w=Math.min(i,a.childNodes.length);for(let $=0;$<w;$++)m+=a.childNodes[$].textContent.length,$<a.childNodes.length-1&&(m+=1);return m}let p=t;for(;p&&p.parentNode!==a;)p=p.parentNode;if(!p)return 0;let h=0;for(let m=a.firstChild;m&&m!==p;m=m.nextSibling)h+=m.textContent.length+1;try{const m=document.createRange();m.setStart(p,0),m.setEnd(t,i),h+=m.toString().length}catch{}return h}function E(){const a=window.getSelection();return a.rangeCount?S(o,a.focusNode,a.focusOffset):0}function T(){const a=window.getSelection();if(!a.rangeCount)return{start:0,end:0};const t=S(o,a.anchorNode,a.anchorOffset),i=S(o,a.focusNode,a.focusOffset);return{start:Math.min(t,i),end:Math.max(t,i)}}function N(a){const t=window.getSelection(),i=Array.from(o.children);if(i.length===0){t.collapse(o,0);return}let p=a;for(let $=0;$<i.length;$++){const _=i[$],A=_.textContent.length;if(p<=A){const L=document.createTreeWalker(_,NodeFilter.SHOW_TEXT);for(;L.nextNode();){const C=L.currentNode.textContent.length;if(p<=C){t.collapse(L.currentNode,p);return}p-=C}t.collapse(_,0);return}if(p-=A,$<i.length-1){if(p===0){const L=document.createTreeWalker(_,NodeFilter.SHOW_TEXT);let C=null;for(;L.nextNode();)C=L.currentNode;C?t.collapse(C,C.textContent.length):t.collapse(_,_.childNodes.length);return}p-=1}}const h=i[i.length-1],m=document.createTreeWalker(h,NodeFilter.SHOW_TEXT);let w=null;for(;m.nextNode();)w=m.currentNode;w?t.collapse(w,w.textContent.length):t.collapse(h,h.childNodes.length)}function O(){const a=window.getSelection();if(!a.rangeCount)return;const t=a.getRangeAt(0).getBoundingClientRect();if(!t||t.height===0)return;const i=40,p=window.innerHeight;t.bottom>p-i?window.scrollBy({top:t.bottom-p+i,behavior:"smooth"}):t.top<i&&window.scrollBy({top:t.top-i,behavior:"smooth"})}function y(a,t){const i=Date.now();if(a===f&&i-d<500&&n.length>0){d=i;return}n.push({text:e,offset:t}),r.length=0,d=i,f=a}function B(){if(n.length===0)return;r.push({text:e,offset:E()});const a=n.pop();e=a.text,v(e),N(a.offset),O(),c(e)}function j(){if(r.length===0)return;n.push({text:e,offset:E()});const a=r.pop();e=a.text,v(e),N(a.offset),O(),c(e)}function M(a){if(a===0)return 0;let t=a;for(;t>0&&/\s/.test(e[t-1]);)t--;for(;t>0&&!/\s/.test(e[t-1]);)t--;return t}function P(a){const t=e.length;if(a>=t)return t;let i=a;for(;i<t&&!/\s/.test(e[i]);)i++;for(;i<t&&/\s/.test(e[i]);)i++;return i}function R(a){if(a===0)return 0;let t=a;for(;t>0&&e[t-1]!==`
`;)t--;return t}function F(a){const t=e.length;if(a>=t)return t;let i=a;for(;i<t&&e[i]!==`
`;)i++;return i}function x(a){v(e),N(a),O(),c(e)}function I(a){if(k||a.inputType==="insertCompositionText"||(a.preventDefault(),a.inputType==="insertFromPaste"||a.inputType==="deleteByCut"))return;const{start:t,end:i}=T(),p=t!==i;switch(a.inputType){case"insertText":{const h=a.data||"";y("insertText",t),e=e.slice(0,t)+h+e.slice(i),x(t+h.length);break}case"insertParagraph":case"insertLineBreak":{y("insertLine",t),e=e.slice(0,t)+`
`+e.slice(i),x(t+1);break}case"deleteContentBackward":{p?(y("delete",t),e=e.slice(0,t)+e.slice(i),x(t)):t>0&&(y("delete",t),e=e.slice(0,t-1)+e.slice(t),x(t-1));break}case"deleteContentForward":{p?(y("delete",t),e=e.slice(0,t)+e.slice(i),x(t)):t<e.length&&(y("delete",t),e=e.slice(0,t)+e.slice(t+1),x(t));break}case"deleteWordBackward":{if(p)y("deleteWord",t),e=e.slice(0,t)+e.slice(i),x(t);else{const h=M(t);h<t&&(y("deleteWord",t),e=e.slice(0,h)+e.slice(t),x(h))}break}case"deleteWordForward":{if(p)y("deleteWord",t),e=e.slice(0,t)+e.slice(i),x(t);else{const h=P(t);h>t&&(y("deleteWord",t),e=e.slice(0,t)+e.slice(h),x(t))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(p)y("deleteLine",t),e=e.slice(0,t)+e.slice(i),x(t);else{const h=R(t);h<t&&(y("deleteLine",t),e=e.slice(0,h)+e.slice(t),x(h))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(p)y("deleteLine",t),e=e.slice(0,t)+e.slice(i),x(t);else{const h=F(t);h>t&&(y("deleteLine",t),e=e.slice(0,t)+e.slice(h),x(t))}break}case"historyUndo":{B();break}case"historyRedo":{j();break}case"insertReplacementText":{const h=a.getTargetRanges();if(h.length>0){const m=h[0],w=S(o,m.startContainer,m.startOffset),$=S(o,m.endContainer,m.endOffset),_=a.dataTransfer?.getData("text/plain")||a.data||"";y("replace",w),e=e.slice(0,w)+_+e.slice($),x(w+_.length)}break}}}function W(){k=!0}function U(){k=!1;const a=E();e=Array.from(o.children).map(t=>t.textContent).join(`
`),v(e),N(a),c(e)}function q(a){a.preventDefault();const{start:t,end:i}=T();t!==i&&a.clipboardData.setData("text/plain",e.slice(t,i))}function H(a){a.preventDefault();const{start:t,end:i}=T();t!==i&&(a.clipboardData.setData("text/plain",e.slice(t,i)),y("cut",t),e=e.slice(0,t)+e.slice(i),x(t))}function K(a){a.preventDefault();const t=a.clipboardData.getData("text/plain");if(!t)return;const{start:i,end:p}=T();y("paste",i),e=e.slice(0,i)+t+e.slice(p),x(i+t.length)}function z(a){(a.metaKey||a.ctrlKey)&&a.key==="z"&&(a.preventDefault(),a.shiftKey?j():B())}return o.addEventListener("keydown",z),o.addEventListener("beforeinput",I),o.addEventListener("compositionstart",W),o.addEventListener("compositionend",U),o.addEventListener("copy",q),o.addEventListener("cut",H),o.addEventListener("paste",K),v(e),{getText:()=>e}}const g={escaped:/\\([\\`*_{}\[\]()#+\-.!~^|$])/g,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),inlineMath:new RegExp("(?<!\\$)\\$(?!\\$)([^\\$\\n]+?)\\$(?!\\$)","g"),comment:/<!--([\s\S]*?)-->/g,boldItalic:/\*\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*\*/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,boldUnderscore:/__([^\s_](?:[^_\n]*?[^\s_])?)__/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,superscript:/\^([^\s^](?:[^^\n]*?[^\s^])?)\^/g,subscript:new RegExp("(?<!~)~(?!~)([^\\s~](?:[^~\\n]*?[^\\s~])?)~(?!~)","g"),autoLink:/<(https?:\/\/[^>\s]+)>/g,autoEmail:/<([^>\s]+@[^>\s]+\.[^>\s]+)>/g,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g,refImage:/!\[([^\]]*)\]\[([^\]]*)\]/g,refLink:/\[([^\]]+)\]\[([^\]]*)\]/g,footnoteRef:/\[\^([^\]]+)\]/g};function u(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let D={};function se(o){const s={},l=o.split(`
`);for(const c of l){const e=c.match(/^\[([^\]]+)\]:\s+(\S+)(?:\s+"([^"]*)")?$/);e&&(s[e[1].toLowerCase()]={url:e[2],title:e[3]||""})}return s}function oe(o){const s=o.split(`
`),l=[];let c=0,e=0;if(s[0].match(/^---\s*$/)&&s.length>1){for(let n=1;n<s.length;n++)if(s[n].match(/^\s*---\s*$/)){const r=s.slice(0,n+1).join(`
`);l.push({type:"metadata",text:r,offset:0}),c=r.length+1,e=n+1;break}}for(;e<s.length;){const n=s[e];if(n.match(/^```/)){let r=e+1;for(;r<s.length&&!s[r].match(/^\s*```/);)r++;if(r<s.length){const d=s.slice(e,r+1).join(`
`);l.push({type:"code",text:d,offset:c}),c+=d.length+1,e=r+1;continue}}if(n.match(/^\$\$\s*$/)){let r=e+1;for(;r<s.length&&!s[r].match(/^\s*\$\$/);)r++;if(r<s.length){const d=s.slice(e,r+1).join(`
`);l.push({type:"math",text:d,offset:c}),c+=d.length+1,e=r+1;continue}}if(n.match(/^\|.*\|\s*$/)&&e+1<s.length){const r=s[e+1];if(r.match(/^\|(?:\s*:?-+:?\s*\|)+\s*$/)){const d=f=>f.split("|").length-1;if(d(n)===d(r)){let f=e+2;for(;f<s.length&&s[f].match(/^\|.*\|\s*$/);)f++;const k=s.slice(e,f).join(`
`);l.push({type:"table",text:k,offset:c}),c+=k.length+1,e=f;continue}}}if(n.match(/^>(?:\s|$)/)){let r=e+1;for(;r<s.length&&s[r].match(/^>(?:\s|$)/);)r++;const d=s.slice(e,r).join(`
`);l.push({type:"blockquote",text:d,offset:c}),c+=d.length+1,e=r;continue}if(n.match(/^#{1,6}[ \t]+.+$/)){l.push({type:"heading",text:n,offset:c}),c+=n.length+1,e++;continue}if(n!==""&&!n.match(/^\s*(---+|\*\*\*+|___+)\s*$/)&&e+1<s.length){const r=s[e+1];if(r.match(/^=+\s*$/)||r.match(/^-+\s*$/)){const d=n+`
`+r;l.push({type:"setext",text:d,offset:c}),c+=d.length+1,e+=2;continue}}if(n.match(/^\s*(---+|\*\*\*+|___+)\s*$/)){l.push({type:"hr",text:n,offset:c}),c+=n.length+1,e++;continue}if(n.match(/^(?: {4}|\t)/)&&!n.match(/^\s*[*\-+] /)&&!n.match(/^\s*\d+\. /)){let r=e+1;for(;r<s.length&&s[r].match(/^(?: {4}|\t)/)&&!s[r].match(/^\s*[*\-+] /)&&!s[r].match(/^\s*\d+\. /);)r++;const d=s.slice(e,r).join(`
`);l.push({type:"indented-code",text:d,offset:c}),c+=d.length+1,e=r;continue}l.push({type:"line",text:n,offset:c}),c+=n.length+1,e++}return l}function b(o){let s=o;const l=[],c=e=>{const n=`PROTECTED${l.length}`;return l.push(e),n};return s=s.replace(g.escaped,(e,n)=>c(`<span class="md-syntax">\\</span>${u(n)}`)).replace(g.inlineCode,(e,n)=>c(`<code>\`${u(n)}\`</code>`)).replace(g.inlineMath,(e,n)=>c(`<code class="math">$${u(n)}$</code>`)).replace(g.comment,(e,n)=>c(`<span class="comment">&lt;!--${u(n)}--&gt;</span>`)).replace(g.autoLink,(e,n)=>c(`<span class="md-syntax">&lt;</span><a href="${u(n)}" target="_blank" rel="noopener noreferrer">${u(n)}</a><span class="md-syntax">&gt;</span>`)).replace(g.autoEmail,(e,n)=>c(`<span class="md-syntax">&lt;</span><a href="mailto:${u(n)}">${u(n)}</a><span class="md-syntax">&gt;</span>`)).replace(g.htmlTag,e=>c(`<span class="html-tag">${u(e)}</span>`)).replace(g.image,(e,n,r)=>c(`<span class="md-syntax">![</span>${u(n)}<span class="md-syntax">](</span><a href="${u(r)}" target="_blank" rel="noopener noreferrer">${u(r)}</a><span class="md-syntax">)</span>`)).replace(g.link,(e,n,r)=>c('<span class="md-syntax">[</span>')+n+c(`<span class="md-syntax">](</span><a href="${u(r)}" target="_blank" rel="noopener noreferrer">${u(r)}</a><span class="md-syntax">)</span>`)).replace(g.refImage,(e,n,r)=>{const d=(r||n).toLowerCase(),f=D[d];return f?c(`<span class="md-syntax">![</span>${u(n)}<span class="md-syntax">][</span><a href="${u(f.url)}" target="_blank" rel="noopener noreferrer">${u(r)}</a><span class="md-syntax">]</span>`):e}).replace(g.refLink,(e,n,r)=>{const d=(r||n).toLowerCase(),f=D[d];return f?c('<span class="md-syntax">[</span>')+n+c(`<span class="md-syntax">][</span><a href="${u(f.url)}" target="_blank" rel="noopener noreferrer">${u(r)}</a><span class="md-syntax">]</span>`):e}).replace(g.footnoteRef,(e,n)=>c('<span class="md-syntax">[^</span>')+n+c('<span class="md-syntax">]</span>')),s=u(s),s=s.replace(g.boldItalic,(e,n)=>`<b><em>***${n}***</em></b>`).replace(g.bold,(e,n)=>`<b>**${n}**</b>`).replace(g.boldUnderscore,(e,n)=>`<b>__${n}__</b>`).replace(g.strikethrough,(e,n)=>`<s>~~${n}~~</s>`).replace(g.superscript,(e,n)=>`<sup>^${n}^</sup>`).replace(g.subscript,(e,n)=>`<sub>~${n}~</sub>`).replace(g.italicAsterisk,(e,n)=>`<em>*${n}*</em>`).replace(g.italicUnderscore,(e,n)=>`<em>_${n}_</em>`),s=s.replace(/\uE000PROTECTED(\d+)\uE001/g,(e,n)=>l[parseInt(n,10)]),s}function re(o){switch(o.type){case"metadata":case"code":case"indented-code":case"table":return`<pre><code>${u(o.text)}</code></pre>`;case"math":return`<pre><code class="math">${u(o.text)}</code></pre>`;case"heading":{const s=o.text.match(/^(#{1,6})/)[1].length;return`<h${s}>${b(o.text)}</h${s}>`}case"blockquote":return`<blockquote>${b(o.text)}</blockquote>`;case"setext":{const s=o.text.indexOf(`
`),l=o.text.slice(0,s),c=o.text.slice(s+1),e=c.trimStart()[0]==="="?1:2;return`<h${e}>${b(l)}
<span class="md-syntax">${u(c)}</span></h${e}>`}case"hr":return`<div class="hr">${u(o.text)}</div>`;case"line":{if(o.text==="")return'<div class="line"><br></div>';const s=o.text.match(/^(\[\^[^\]]+\]:\s)(.*)/);if(s){const r=s[1],d=s[2];return`<div class="line"><span class="md-syntax">${u(r)}</span>${b(d)}</div>`}const l=o.text.match(/^(\[[^\]]+\]:\s+)(\S+)(\s+"[^"]*")?$/);if(l){const r=l[1],d=l[2],f=l[3]||"";return`<div class="line"><span class="md-syntax">${u(r)}</span><a href="${u(d)}" target="_blank" rel="noopener noreferrer">${u(d)}</a><span class="md-syntax">${u(f)}</span></div>`}const c=o.text.match(/^(\s*)([*\-+] )/);if(c){const r=c[1],d=c[2],f=o.text.slice(r.length+d.length),k=f.match(/^(\[[ xX]\] )/);if(k){const v=k[1],S=f.slice(v.length),T=v[1]!==" "?`<span class="task-done">${b(S)}</span>`:b(S);return`<div class="line">${u(r)}<span class="md-syntax">${u(d)}</span><span class="md-checkbox">${u(v)}</span>${T}</div>`}return`<div class="line">${u(r)}<span class="md-syntax">${u(d)}</span>${b(f)}</div>`}const e=o.text.match(/^(\s*)(\d+\. )/);if(e){const r=e[1],d=e[2],f=o.text.slice(r.length+d.length);return`<div class="line">${u(r)}<span class="md-syntax">${u(d)}</span>${b(f)}</div>`}const n=o.text.match(/^(: )/);if(n){const r=n[1],d=o.text.slice(r.length);return`<div class="line"><span class="md-syntax">${u(r)}</span>${b(d)}</div>`}return`<div class="line">${b(o.text)}</div>`}}}function ae(o){return D=se(o),oe(o).map(re).join("")}function ce(o,s){const l=document.querySelector(".signal-overlay");l&&l.remove();const c=document.createElement("div");c.className="signal-overlay";const e=document.createElement("div");e.className="signal";const n=document.createElement("span");n.className="signal-keys",n.textContent=o;const r=document.createElement("span");r.className="signal-message",r.textContent=s,e.appendChild(n),e.appendChild(r),c.appendChild(e),document.body.appendChild(c),c.addEventListener("animationend",d=>{d.target===c&&c.remove()})}function ie(o,s){document.addEventListener("keydown",l=>{if((l.metaKey||l.ctrlKey)&&l.key==="s"){l.preventDefault();const c=l.metaKey?"⌘S":"Ctrl+S";le(s,c)}})}function le(o,s){try{const c={content:o()},e=JSON.stringify(c),n=J(e).then(d=>{const f=`${window.location.origin}${window.location.pathname}?#doc=${d}`;return new Blob([f],{type:"text/plain"})}),r=new ClipboardItem({"text/plain":n});navigator.clipboard.write([r]).then(()=>{ce(s,"Link copied!")})}catch(l){console.error("Failed to copy link to clipboard:",l)}}document.addEventListener("DOMContentLoaded",async()=>{const o=document.querySelector(".paper");de();const s=await G(),l=ne(o,s,ae,Q);ie(o,l.getText),o.focus(),ue(2e3)});function de(){const o=document.querySelector(".logo");o?.addEventListener("animationend",()=>o.remove(),{once:!0})}function ue(o){let s;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(s),s=setTimeout(()=>{document.body.classList.add("hide-cursor")},o)},{passive:!0}),document.body.classList.add("hide-cursor")}
