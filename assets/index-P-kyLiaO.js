(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(r){if(r.ep)return;r.ep=!0;const c=a(r);fetch(r.href,c)}})();const N=8192;async function j(n){if(n.length===0)return"";const s=await H(n),a=Array.from(s,e=>String.fromCodePoint(e)).join("");return btoa(a)}async function q(n){if(n.length===0)return"";const s=atob(n),a=Uint8Array.from(s,e=>e.charCodeAt(0));return await J(a)}function I(n){if(n.length===0)return"";const s=new TextDecoder,a=[],e=N-N%4;for(let r=0;r<n.length;r+=e){const c=n.slice(r,r+e),d=atob(c),y=new Uint8Array(d.length);for(let m=0;m<d.length;m++)y[m]=d.charCodeAt(m);a.push(s.decode(y,{stream:!0}))}return a.push(s.decode()),a.join("")}async function H(n){const s=new Blob([n]).stream().pipeThrough(new CompressionStream("gzip"));return new Uint8Array(await new Response(s).arrayBuffer())}async function J(n){const s=new Blob([n]).stream().pipeThrough(new DecompressionStream("gzip"));return await new Response(s).text()}async function Q(){const n=(await G()??Y())?.content||"";return V(),X(n)}function Z(n){const s={content:n};localStorage.setItem("editorState",JSON.stringify(s))}function X(n){if(!n)return"";if(/<[a-zA-Z][^>]*>/.test(n)){const s=document.createElement("div");return s.innerHTML=n,$(s)}return n}function V(){window.history.replaceState(null,"",window.location.pathname)}async function G(){const n=window.location.hash,s="#doc=",a="#json=";try{if(n.startsWith(s)){const e=await q(n.substring(s.length));return JSON.parse(e)}if(n.startsWith(a)){const e=I(n.substring(a.length));return JSON.parse(e)}return null}catch(e){return console.error("Error parsing URL state:",e.message),console.error("The URL appears to be truncated or corrupted."),null}}function Y(){const n=localStorage.getItem("editorState");if(!n)return null;try{return JSON.parse(n)}catch(s){return console.error("Error parsing saved state",s),null}}function $(n){let s="";for(const a of n.childNodes)a.nodeType===Node.TEXT_NODE?s+=a.textContent:a.nodeType===Node.ELEMENT_NODE&&(s+=$(a));return s}const p={metadata:/^---[ \t]*\n([\s\S]*?)\n?[ \t]*---/,codeBlock:/```([^\s`]*?)[ \t]*\n([\s\S]*?)\n[ \t]*```/g,heading:/^(#{1,6})[ \t]+(.+)$/gm,inlineCode:new RegExp("(?<!`)`(?!`)([^`\\n]+?)`(?!`)","g"),comment:/<!--([\s\S]*?)-->/g,bold:/\*\*([^\s\*](?:[^\*\n]*?[^\s\*])?)\*\*/g,italicAsterisk:new RegExp("(?<!\\*)\\*(?!\\*)([^\\s\\*](?:[^\\*\\n]*?[^\\s\\*])?)\\*(?!\\*)","g"),italicUnderscore:/_([^\s_](?:[^_\n]*?[^\s_])?)_/g,strikethrough:/~~([^\s~](?:[^~\n]*?[^\s~])?)~~/g,horizontalRule:/^[ \t]*(---+|\*\*\*+|___+)[ \t]*$/gm,htmlTag:/<\/?[a-zA-Z][a-zA-Z0-9-]*(?:[ \t]+[^>]*)?\/?>/g,blockquote:/^>(?:[ \t].*)?(?=\n)/gm,image:/!\[([^\]]*)\]\(([^)]+)\)/g,link:/\[([^\]]+)\]\(([^)]+)\)/g};function h(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ee(n){let s=n;const a=[],e=r=>{const c=`PROTECTED${a.length}`;return a.push(r),c};return s=s.replace(p.metadata,r=>e(`<pre><code>${h(r)}</code></pre>`)).replace(p.codeBlock,r=>e(`<pre><code>${h(r)}</code></pre>`)).replace(p.inlineCode,(r,c)=>e(`<code>\`${h(c)}\`</code>`)).replace(p.inlineCode,(r,c)=>e(()=>`<code>\`${h(c)}\`</code>`)).replace(p.comment,(r,c)=>e(`<span class="comment">&lt;!--${h(c)}--&gt;</span>`)).replace(p.htmlTag,r=>e(`<span class="html-tag">${h(r)}</span>`)).replace(p.blockquote,r=>`BLOCKQUOTE${r.slice(1)}`).replace(p.image,(r,c,d)=>e(`<a href="${h(d)}" target="_blank" rel="noopener noreferrer">![${h(c)}](${h(d)})</a>`)).replace(p.link,(r,c,d)=>e(`<a href="${h(d)}" target="_blank" rel="noopener noreferrer">[${h(c)}](${h(d)})</a>`)),s=h(s),s=s.replace(p.horizontalRule,r=>`<span class="hr">${r}</span>`).replace(p.heading,(r,c)=>`<h${c.length}>${r}</h${c.length}>`).replace(p.bold,(r,c)=>`<b>**${c}**</b>`).replace(p.strikethrough,(r,c)=>`<s>~~${c}~~</s>`).replace(p.italicAsterisk,(r,c)=>`<em>*${c}*</em>`).replace(p.italicUnderscore,(r,c)=>`<em>_${c}_</em>`).replace(/(\uE002BLOCKQUOTE\uE003.*(?:\n\uE002BLOCKQUOTE\uE003.*)*)/g,r=>`<blockquote>${r.replace(/\uE002BLOCKQUOTE\uE003/g,"&gt;")}</blockquote>`).replace(/\uE000PROTECTED(\d+)\uE001/g,(r,c)=>a[parseInt(c,10)]),s}function te(n,s,a){let e=s;const r=[],c=[];let d=0,y="",m=!1;function b(o,t,i){try{const u=document.createRange();return u.setStart(o,0),u.setEnd(t,i),u.toString().length}catch{return 0}}function T(){const o=window.getSelection();return o.rangeCount?b(n,o.focusNode,o.focusOffset):0}function S(){const o=window.getSelection();if(!o.rangeCount)return{start:0,end:0};const t=b(n,o.anchorNode,o.anchorOffset),i=b(n,o.focusNode,o.focusOffset);return{start:Math.min(t,i),end:Math.max(t,i)}}function C(o){const t=window.getSelection(),i=document.createTreeWalker(n,NodeFilter.SHOW_TEXT);let u=o;for(;i.nextNode();){const w=i.currentNode.textContent.length;if(u<=w){t.collapse(i.currentNode,u);return}u-=w}const l=i.currentNode;l&&l!==n?t.collapse(l,l.textContent?.length||0):t.collapse(n,n.childNodes.length)}function k(){const o=window.getSelection();if(!o.rangeCount)return;const t=o.getRangeAt(0).getBoundingClientRect();if(!t||t.height===0)return;const i=n.getBoundingClientRect(),u=40;t.bottom>i.bottom-u?n.scrollBy({top:t.bottom-i.bottom+u,behavior:"smooth"}):t.top<i.top+u&&n.scrollBy({top:t.top-i.top-u,behavior:"smooth"})}function f(o,t){const i=Date.now();if(o===y&&i-d<500&&r.length>0){d=i;return}r.push({text:e,offset:t}),c.length=0,d=i,y=o}function v(){if(r.length===0)return;c.push({text:e,offset:T()});const o=r.pop();e=o.text,E(),C(o.offset),k(),a(e)}function O(){if(c.length===0)return;r.push({text:e,offset:T()});const o=c.pop();e=o.text,E(),C(o.offset),k(),a(e)}function B(o){if(o===0)return 0;let t=o;for(;t>0&&/\s/.test(e[t-1]);)t--;for(;t>0&&!/\s/.test(e[t-1]);)t--;return t}function _(o){const t=e.length;if(o>=t)return t;let i=o;for(;i<t&&!/\s/.test(e[i]);)i++;for(;i<t&&/\s/.test(e[i]);)i++;return i}function D(o){if(o===0)return 0;let t=o;for(;t>0&&e[t-1]!==`
`;)t--;return t}function A(o){const t=e.length;if(o>=t)return t;let i=o;for(;i<t&&e[i]!==`
`;)i++;return i}function E(){n.innerHTML=ee(e)}function g(o){E(),C(o),k(),a(e)}function P(o){if(m||o.inputType==="insertCompositionText"||(o.preventDefault(),o.inputType==="insertFromPaste"||o.inputType==="deleteByCut"))return;const{start:t,end:i}=S(),u=t!==i;switch(o.inputType){case"insertText":{const l=o.data||"";f("insertText",t),e=e.slice(0,t)+l+e.slice(i),g(t+l.length);break}case"insertParagraph":case"insertLineBreak":{f("insertLine",t),e=e.slice(0,t)+`
`+e.slice(i),g(t+1);break}case"deleteContentBackward":{u?(f("delete",t),e=e.slice(0,t)+e.slice(i),g(t)):t>0&&(f("delete",t),e=e.slice(0,t-1)+e.slice(t),g(t-1));break}case"deleteContentForward":{u?(f("delete",t),e=e.slice(0,t)+e.slice(i),g(t)):t<e.length&&(f("delete",t),e=e.slice(0,t)+e.slice(t+1),g(t));break}case"deleteWordBackward":{if(u)f("deleteWord",t),e=e.slice(0,t)+e.slice(i),g(t);else{const l=B(t);l<t&&(f("deleteWord",t),e=e.slice(0,l)+e.slice(t),g(l))}break}case"deleteWordForward":{if(u)f("deleteWord",t),e=e.slice(0,t)+e.slice(i),g(t);else{const l=_(t);l>t&&(f("deleteWord",t),e=e.slice(0,t)+e.slice(l),g(t))}break}case"deleteSoftLineBackward":case"deleteHardLineBackward":{if(u)f("deleteLine",t),e=e.slice(0,t)+e.slice(i),g(t);else{const l=D(t);l<t&&(f("deleteLine",t),e=e.slice(0,l)+e.slice(t),g(l))}break}case"deleteSoftLineForward":case"deleteHardLineForward":{if(u)f("deleteLine",t),e=e.slice(0,t)+e.slice(i),g(t);else{const l=A(t);l>t&&(f("deleteLine",t),e=e.slice(0,t)+e.slice(l),g(t))}break}case"historyUndo":{v();break}case"historyRedo":{O();break}case"insertReplacementText":{const l=o.getTargetRanges();if(l.length>0){const w=l[0],L=b(n,w.startContainer,w.startOffset),M=b(n,w.endContainer,w.endOffset),x=o.dataTransfer?.getData("text/plain")||o.data||"";f("replace",L),e=e.slice(0,L)+x+e.slice(M),g(L+x.length)}break}}}function R(){m=!0}function U(){m=!1;const o=T();e=n.textContent||"",E(),C(o),a(e)}function K(o){o.preventDefault();const{start:t,end:i}=S();t!==i&&o.clipboardData.setData("text/plain",e.slice(t,i))}function z(o){o.preventDefault();const{start:t,end:i}=S();t!==i&&(o.clipboardData.setData("text/plain",e.slice(t,i)),f("cut",t),e=e.slice(0,t)+e.slice(i),g(t))}function F(o){o.preventDefault();const t=o.clipboardData.getData("text/plain");if(!t)return;const{start:i,end:u}=S();f("paste",i),e=e.slice(0,i)+t+e.slice(u),g(i+t.length)}function W(o){(o.metaKey||o.ctrlKey)&&o.key==="z"&&(o.preventDefault(),o.shiftKey?O():v())}return n.addEventListener("keydown",W),n.addEventListener("beforeinput",P),n.addEventListener("compositionstart",R),n.addEventListener("compositionend",U),n.addEventListener("copy",K),n.addEventListener("cut",z),n.addEventListener("paste",F),E(),{getText:()=>e}}function ne(n,s){const a=document.querySelector(".signal-overlay");a&&a.remove();const e=document.createElement("div");e.className="signal-overlay";const r=document.createElement("div");r.className="signal";const c=document.createElement("span");c.className="signal-keys",c.textContent=n;const d=document.createElement("span");d.className="signal-message",d.textContent=s,r.appendChild(c),r.appendChild(d),e.appendChild(r),document.body.appendChild(e),e.addEventListener("animationend",y=>{y.target===e&&e.remove()})}function oe(n){document.addEventListener("keydown",s=>{if((s.metaKey||s.ctrlKey)&&s.key==="s"){s.preventDefault();const a=s.metaKey?"⌘S":"Ctrl+S";re(n,a)}})}async function re(n,s){try{const e={content:n.textContent},r=JSON.stringify(e),c=j(r),d=`${window.location.origin}${window.location.pathname}?#doc=${c}`;await navigator.clipboard.writeText(d),ne(s,"Link copied!")}catch(a){console.error("Failed to copy link to clipboard:",a)}}document.addEventListener("DOMContentLoaded",async()=>{const n=document.querySelector(".paper");se();const s=await Q();te(n,s,Z),oe(n),n.focus(),ie(2e3)});function se(){const n=document.querySelector(".logo");n?.addEventListener("animationend",()=>n.remove(),{once:!0})}function ie(n){let s;document.addEventListener("mousemove",()=>{document.body.classList.remove("hide-cursor"),clearTimeout(s),s=setTimeout(()=>{document.body.classList.add("hide-cursor")},n)},{passive:!0}),document.body.classList.add("hide-cursor")}
